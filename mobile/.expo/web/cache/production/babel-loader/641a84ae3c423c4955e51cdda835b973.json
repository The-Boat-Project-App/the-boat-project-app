{"ast":null,"code":"import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";var _excluded=[\"children\"];function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}import cloneDeep from'lodash.clonedeep';import React from'react';import PresenceTransition from\"./PresenceTransition\";import{useHasResponsiveProps}from\"../../../hooks/useHasResponsiveProps\";var defaultStaggerConfig={offset:0,reverse:false};var Stagger=function Stagger(_ref){var children=_ref.children,restProps=_objectWithoutProperties(_ref,_excluded);if(useHasResponsiveProps(restProps)){return null;}return React.Children.map(children,function(child,index){var clonedAnimationConfig=cloneDeep(restProps);var animate=clonedAnimationConfig.animate,exit=clonedAnimationConfig.exit;if(animate){var _animate$transition$d,_animate$transition$s;if(!animate.transition){animate.transition={};}animate.transition.delay=(_animate$transition$d=animate.transition.delay)!==null&&_animate$transition$d!==void 0?_animate$transition$d:0;var stagger=(_animate$transition$s=animate.transition.stagger)!==null&&_animate$transition$s!==void 0?_animate$transition$s:defaultStaggerConfig;var offset=stagger.reverse?(React.Children.count(children)-1-index)*stagger.offset:index*stagger.offset;animate.transition.delay=animate.transition.delay+offset;}if(exit){var _exit$transition$dela,_exit$transition$stag;if(!exit.transition){exit.transition={};}exit.transition.delay=(_exit$transition$dela=exit.transition.delay)!==null&&_exit$transition$dela!==void 0?_exit$transition$dela:0;var _stagger=(_exit$transition$stag=exit.transition.stagger)!==null&&_exit$transition$stag!==void 0?_exit$transition$stag:defaultStaggerConfig;var _offset=_stagger.reverse?(React.Children.count(children)-1-index)*_stagger.offset:index*_stagger.offset;exit.transition.delay=exit.transition.delay+_offset;}return React.createElement(PresenceTransition,_extends({key:child.key},clonedAnimationConfig),child);});};export default Stagger;","map":{"version":3,"mappings":"uYAAA,MAAOA,UAAP,KAAsB,kBAAtB,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,MAAOC,mBAAP,4BAEA,OAASC,qBAAT,4CA+BA,GAAMC,qBAAoC,CAAG,CAAEC,MAAM,CAAE,CAAV,CAAaC,OAAO,CAAE,KAAtB,CAA7C,CAEA,GAAMC,QAAO,CAAG,QAAVA,QAAU,MAA+C,IAA5CC,SAA4C,MAA5CA,QAA4C,CAA/BC,SAA+B,0CAE7D,GAAIN,qBAAqB,CAACM,SAAD,CAAzB,CAAsC,CACpC,MAAO,KAAP,CACD,CACD,MAAOR,MAAK,CAACS,QAANT,CAAeU,GAAfV,CAAmBO,QAAnBP,CAA6B,SAACW,KAAD,CAAQC,KAAR,CAAkB,CACpD,GAAMC,sBAAqB,CAAGd,SAAS,CAACS,SAAD,CAAvC,CACA,GAAQM,QAAR,CAA0BD,qBAA1B,CAAQC,OAAR,CAAiBC,IAAjB,CAA0BF,qBAA1B,CAAiBE,IAAjB,CAEA,GAAID,OAAJ,CAAa,iDACX,GAAI,CAACA,OAAO,CAACE,UAAb,CAAyB,CACvBF,OAAO,CAACE,UAARF,CAAqB,EAArBA,CACD,CACDA,OAAO,CAACE,UAARF,CAAmBG,KAAnBH,wBAA2BA,OAAO,CAACE,UAARF,CAAmBG,KAA9C,+DAAuD,CAAvDH,CACA,GAAMI,QAAO,wBAAGJ,OAAO,CAACE,UAARF,CAAmBI,OAAtB,+DAAiCf,oBAA9C,CACA,GAAMC,OAAM,CAAGc,OAAO,CAACb,OAARa,CACX,CAAClB,KAAK,CAACS,QAANT,CAAemB,KAAfnB,CAAqBO,QAArBP,EAAiC,CAAjCA,CAAqCY,KAAtC,EAA+CM,OAAO,CAACd,MAD5Cc,CAEXN,KAAK,CAAGM,OAAO,CAACd,MAFpB,CAGAU,OAAO,CAACE,UAARF,CAAmBG,KAAnBH,CAA2BA,OAAO,CAACE,UAARF,CAAmBG,KAAnBH,CAA2BV,MAAtDU,CACD,CAED,GAAIC,IAAJ,CAAU,iDACR,GAAI,CAACA,IAAI,CAACC,UAAV,CAAsB,CACpBD,IAAI,CAACC,UAALD,CAAkB,EAAlBA,CACD,CACDA,IAAI,CAACC,UAALD,CAAgBE,KAAhBF,wBAAwBA,IAAI,CAACC,UAALD,CAAgBE,KAAxC,+DAAiD,CAAjDF,CACA,GAAMG,SAAO,wBAAGH,IAAI,CAACC,UAALD,CAAgBG,OAAnB,+DAA8Bf,oBAA3C,CACA,GAAMC,QAAM,CAAGc,QAAO,CAACb,OAARa,CACX,CAAClB,KAAK,CAACS,QAANT,CAAemB,KAAfnB,CAAqBO,QAArBP,EAAiC,CAAjCA,CAAqCY,KAAtC,EAA+CM,QAAO,CAACd,MAD5Cc,CAEXN,KAAK,CAAGM,QAAO,CAACd,MAFpB,CAGAW,IAAI,CAACC,UAALD,CAAgBE,KAAhBF,CAAwBA,IAAI,CAACC,UAALD,CAAgBE,KAAhBF,CAAwBX,OAAhDW,CACD,CAED,MACEf,qBAACC,kBAAD,WAAoBmB,GAAG,CAAET,KAAK,CAACS,GAA/B,EAAwCP,qBAAxC,EACGF,KADH,CADF,CA5BK,EAAP,CALF,EAyCA,cAAeL,QAAf","names":["cloneDeep","React","PresenceTransition","useHasResponsiveProps","defaultStaggerConfig","offset","reverse","Stagger","children","restProps","Children","map","child","index","clonedAnimationConfig","animate","exit","transition","delay","stagger","count","key"],"sources":["Stagger.tsx"],"sourcesContent":["import cloneDeep from 'lodash.clonedeep';\nimport React from 'react';\nimport PresenceTransition from './PresenceTransition';\nimport type { ISupportedTransitions, ITransitionConfig } from './types';\nimport { useHasResponsiveProps } from '../../../hooks/useHasResponsiveProps';\n\ninterface IStaggerConfig {\n  offset: number;\n  reverse?: boolean;\n}\n\nexport interface IStaggerStyleProps extends ISupportedTransitions {\n  transition?: ITransitionConfig & { stagger?: IStaggerConfig };\n}\n\ninterface IStaggerProps {\n  children: any;\n  /**\n   * Initial styles before the transition starts\n   */\n  initial?: ISupportedTransitions;\n  /**\n   * The styles to which each child should animate to while entering.\n   */\n  animate?: IStaggerStyleProps;\n  /**\n   * The styles to which each child should animate to while exiting.\n   */\n  exit?: IStaggerStyleProps;\n  /**\n   * Determines whether to start the animation\n   */\n  visible?: boolean;\n}\n\nconst defaultStaggerConfig: IStaggerConfig = { offset: 0, reverse: false };\n\nconst Stagger = ({ children, ...restProps }: IStaggerProps) => {\n  //TODO: refactor for responsive prop\n  if (useHasResponsiveProps(restProps)) {\n    return null;\n  }\n  return React.Children.map(children, (child, index) => {\n    const clonedAnimationConfig = cloneDeep(restProps);\n    const { animate, exit } = clonedAnimationConfig;\n\n    if (animate) {\n      if (!animate.transition) {\n        animate.transition = {};\n      }\n      animate.transition.delay = animate.transition.delay ?? 0;\n      const stagger = animate.transition.stagger ?? defaultStaggerConfig;\n      const offset = stagger.reverse\n        ? (React.Children.count(children) - 1 - index) * stagger.offset\n        : index * stagger.offset;\n      animate.transition.delay = animate.transition.delay + offset;\n    }\n\n    if (exit) {\n      if (!exit.transition) {\n        exit.transition = {};\n      }\n      exit.transition.delay = exit.transition.delay ?? 0;\n      const stagger = exit.transition.stagger ?? defaultStaggerConfig;\n      const offset = stagger.reverse\n        ? (React.Children.count(children) - 1 - index) * stagger.offset\n        : index * stagger.offset;\n      exit.transition.delay = exit.transition.delay + offset;\n    }\n\n    return (\n      <PresenceTransition key={child.key} {...clonedAnimationConfig}>\n        {child}\n      </PresenceTransition>\n    );\n  });\n};\n\nexport default Stagger;\n"]},"metadata":{},"sourceType":"module"}