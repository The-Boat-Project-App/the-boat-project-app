{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}import{useRef as $eCAIO$useRef,useEffect as $eCAIO$useEffect,useMemo as $eCAIO$useMemo}from\"react\";import{getFocusableTreeWalker as $eCAIO$getFocusableTreeWalker,focusSafely as $eCAIO$focusSafely}from\"@react-aria/focus\";import{focusWithoutScrolling as $eCAIO$focusWithoutScrolling,useEvent as $eCAIO$useEvent,scrollIntoView as $eCAIO$scrollIntoView,mergeProps as $eCAIO$mergeProps,isAppleDevice as $eCAIO$isAppleDevice,isMac as $eCAIO$isMac}from\"@react-aria/utils\";import{useLocale as $eCAIO$useLocale,useCollator as $eCAIO$useCollator}from\"@react-aria/i18n\";import{usePress as $eCAIO$usePress,useLongPress as $eCAIO$useLongPress}from\"@react-aria/interactions\";function $feb5ffebff200149$export$d3e3bd3e26688c04(e){return $eCAIO$isAppleDevice()?e.altKey:e.ctrlKey;}function $feb5ffebff200149$export$16792effe837dba3(e){if($eCAIO$isMac())return e.metaKey;return e.ctrlKey;}var $fb3050f43d946246$var$TYPEAHEAD_DEBOUNCE_WAIT_MS=1000;function $fb3050f43d946246$export$e32c88dfddc6e1d8(options){var keyboardDelegate=options.keyboardDelegate,selectionManager=options.selectionManager,onTypeSelect=options.onTypeSelect;var state=$eCAIO$useRef({search:'',timeout:null}).current;var onKeyDown=function onKeyDown(e){var character=$fb3050f43d946246$var$getStringForKey(e.key);if(!character||e.ctrlKey||e.metaKey)return;if(character===' '&&state.search.trim().length>0){e.preventDefault();if(!('continuePropagation'in e))e.stopPropagation();}state.search+=character;var key=keyboardDelegate.getKeyForSearch(state.search,selectionManager.focusedKey);if(key==null)key=keyboardDelegate.getKeyForSearch(state.search);if(key!=null){selectionManager.setFocusedKey(key);if(onTypeSelect)onTypeSelect(key);}clearTimeout(state.timeout);state.timeout=setTimeout(function(){state.search='';},$fb3050f43d946246$var$TYPEAHEAD_DEBOUNCE_WAIT_MS);};return{typeSelectProps:{onKeyDownCapture:keyboardDelegate.getKeyForSearch?onKeyDown:null}};}function $fb3050f43d946246$var$getStringForKey(key){if(key.length===1||!/^[A-Z]/i.test(key))return key;return'';}function $ae20dd8cbca75726$export$d6daf82dcd84e87c(options){var manager=options.selectionManager,delegate=options.keyboardDelegate,ref=options.ref,_options$autoFocus=options.autoFocus,autoFocus=_options$autoFocus===void 0?false:_options$autoFocus,_options$shouldFocusW=options.shouldFocusWrap,shouldFocusWrap=_options$shouldFocusW===void 0?false:_options$shouldFocusW,_options$disallowEmpt=options.disallowEmptySelection,disallowEmptySelection=_options$disallowEmpt===void 0?false:_options$disallowEmpt,_options$disallowSele=options.disallowSelectAll,disallowSelectAll=_options$disallowSele===void 0?false:_options$disallowSele,_options$selectOnFocu=options.selectOnFocus,selectOnFocus=_options$selectOnFocu===void 0?manager.selectionBehavior==='replace':_options$selectOnFocu,_options$disallowType=options.disallowTypeAhead,disallowTypeAhead=_options$disallowType===void 0?false:_options$disallowType,shouldUseVirtualFocus=options.shouldUseVirtualFocus,_options$allowsTabNav=options.allowsTabNavigation,allowsTabNavigation=_options$allowsTabNav===void 0?false:_options$allowsTabNav,isVirtualized=options.isVirtualized,_options$scrollRef=options.scrollRef,scrollRef=_options$scrollRef===void 0?ref:_options$scrollRef;var _$eCAIO$useLocale=$eCAIO$useLocale(),direction=_$eCAIO$useLocale.direction;var onKeyDown=function onKeyDown(e){if(e.altKey&&e.key==='Tab')e.preventDefault();if(!ref.current.contains(e.target))return;var navigateToKey=function navigateToKey(key,childFocus){if(key!=null){manager.setFocusedKey(key,childFocus);if(e.shiftKey&&manager.selectionMode==='multiple')manager.extendSelection(key);else if(selectOnFocus&&!$feb5ffebff200149$export$d3e3bd3e26688c04(e))manager.replaceSelection(key);}};switch(e.key){case'ArrowDown':if(delegate.getKeyBelow){var ref4,ref1;e.preventDefault();var nextKey=manager.focusedKey!=null?delegate.getKeyBelow(manager.focusedKey):(ref4=delegate.getFirstKey)===null||ref4===void 0?void 0:ref4.call(delegate);if(nextKey==null&&shouldFocusWrap)nextKey=(ref1=delegate.getFirstKey)===null||ref1===void 0?void 0:ref1.call(delegate,manager.focusedKey);navigateToKey(nextKey);}break;case'ArrowUp':if(delegate.getKeyAbove){var ref2,ref3;e.preventDefault();var _nextKey=manager.focusedKey!=null?delegate.getKeyAbove(manager.focusedKey):(ref2=delegate.getLastKey)===null||ref2===void 0?void 0:ref2.call(delegate);if(_nextKey==null&&shouldFocusWrap)_nextKey=(ref3=delegate.getLastKey)===null||ref3===void 0?void 0:ref3.call(delegate,manager.focusedKey);navigateToKey(_nextKey);}break;case'ArrowLeft':if(delegate.getKeyLeftOf){e.preventDefault();var _nextKey2=delegate.getKeyLeftOf(manager.focusedKey);navigateToKey(_nextKey2,direction==='rtl'?'first':'last');}break;case'ArrowRight':if(delegate.getKeyRightOf){e.preventDefault();var _nextKey3=delegate.getKeyRightOf(manager.focusedKey);navigateToKey(_nextKey3,direction==='rtl'?'last':'first');}break;case'Home':if(delegate.getFirstKey){e.preventDefault();var firstKey=delegate.getFirstKey(manager.focusedKey,$feb5ffebff200149$export$16792effe837dba3(e));manager.setFocusedKey(firstKey);if($feb5ffebff200149$export$16792effe837dba3(e)&&e.shiftKey&&manager.selectionMode==='multiple')manager.extendSelection(firstKey);else if(selectOnFocus)manager.replaceSelection(firstKey);}break;case'End':if(delegate.getLastKey){e.preventDefault();var lastKey=delegate.getLastKey(manager.focusedKey,$feb5ffebff200149$export$16792effe837dba3(e));manager.setFocusedKey(lastKey);if($feb5ffebff200149$export$16792effe837dba3(e)&&e.shiftKey&&manager.selectionMode==='multiple')manager.extendSelection(lastKey);else if(selectOnFocus)manager.replaceSelection(lastKey);}break;case'PageDown':if(delegate.getKeyPageBelow){e.preventDefault();var _nextKey4=delegate.getKeyPageBelow(manager.focusedKey);navigateToKey(_nextKey4);}break;case'PageUp':if(delegate.getKeyPageAbove){e.preventDefault();var _nextKey5=delegate.getKeyPageAbove(manager.focusedKey);navigateToKey(_nextKey5);}break;case'a':if($feb5ffebff200149$export$16792effe837dba3(e)&&manager.selectionMode==='multiple'&&disallowSelectAll!==true){e.preventDefault();manager.selectAll();}break;case'Escape':e.preventDefault();if(!disallowEmptySelection)manager.clearSelection();break;case'Tab':if(!allowsTabNavigation){if(e.shiftKey)ref.current.focus();else{var walker=$eCAIO$getFocusableTreeWalker(ref.current,{tabbable:true});var next;var last;do{last=walker.lastChild();if(last)next=last;}while(last);if(next&&!next.contains(document.activeElement))$eCAIO$focusWithoutScrolling(next);}break;}}};var scrollPos=$eCAIO$useRef({top:0,left:0});$eCAIO$useEvent(scrollRef,'scroll',isVirtualized?null:function(){scrollPos.current={top:scrollRef.current.scrollTop,left:scrollRef.current.scrollLeft};});var onFocus=function onFocus(e){if(manager.isFocused){if(!e.currentTarget.contains(e.target))manager.setFocused(false);return;}if(!e.currentTarget.contains(e.target))return;manager.setFocused(true);if(manager.focusedKey==null){var navigateToFirstKey=function navigateToFirstKey(key){if(key!=null){manager.setFocusedKey(key);if(selectOnFocus)manager.replaceSelection(key);}};var relatedTarget=e.relatedTarget;var _lastSelectedKey,_firstSelectedKey;if(relatedTarget&&e.currentTarget.compareDocumentPosition(relatedTarget)&Node.DOCUMENT_POSITION_FOLLOWING)navigateToFirstKey((_lastSelectedKey=manager.lastSelectedKey)!==null&&_lastSelectedKey!==void 0?_lastSelectedKey:delegate.getLastKey());else navigateToFirstKey((_firstSelectedKey=manager.firstSelectedKey)!==null&&_firstSelectedKey!==void 0?_firstSelectedKey:delegate.getFirstKey());}else if(!isVirtualized){scrollRef.current.scrollTop=scrollPos.current.top;scrollRef.current.scrollLeft=scrollPos.current.left;var element=scrollRef.current.querySelector(\"[data-key=\\\"\"+manager.focusedKey+\"\\\"]\");if(element){$eCAIO$focusWithoutScrolling(element);$eCAIO$scrollIntoView(scrollRef.current,element);}}};var onBlur=function onBlur(e){if(!e.currentTarget.contains(e.relatedTarget))manager.setFocused(false);};var autoFocusRef=$eCAIO$useRef(autoFocus);$eCAIO$useEffect(function(){if(autoFocusRef.current){var focusedKey=null;if(autoFocus==='first')focusedKey=delegate.getFirstKey();if(autoFocus==='last')focusedKey=delegate.getLastKey();var selectedKeys=manager.selectedKeys;if(selectedKeys.size)focusedKey=selectedKeys.values().next().value;manager.setFocused(true);manager.setFocusedKey(focusedKey);if(focusedKey==null&&!shouldUseVirtualFocus)$eCAIO$focusSafely(ref.current);}autoFocusRef.current=false;},[]);$eCAIO$useEffect(function(){if(!isVirtualized&&manager.focusedKey&&(scrollRef===null||scrollRef===void 0?void 0:scrollRef.current)){var element=scrollRef.current.querySelector(\"[data-key=\\\"\"+manager.focusedKey+\"\\\"]\");if(element)$eCAIO$scrollIntoView(scrollRef.current,element);}},[isVirtualized,scrollRef,manager.focusedKey]);var handlers={onKeyDown:onKeyDown,onFocus:onFocus,onBlur:onBlur,onMouseDown:function onMouseDown(e){if(e.currentTarget.contains(e.target))e.preventDefault();}};var _$fb3050f43d946246$ex=$fb3050f43d946246$export$e32c88dfddc6e1d8({keyboardDelegate:delegate,selectionManager:manager}),typeSelectProps=_$fb3050f43d946246$ex.typeSelectProps;if(!disallowTypeAhead)handlers=$eCAIO$mergeProps(typeSelectProps,handlers);var tabIndex;if(!shouldUseVirtualFocus)tabIndex=manager.focusedKey==null?0:-1;return{collectionProps:_objectSpread(_objectSpread({},handlers),{},{tabIndex:tabIndex})};}function $880e95eb8b93ba9a$export$ecf600387e221c37(options){var manager=options.selectionManager,key=options.key,ref=options.ref,shouldSelectOnPressUp=options.shouldSelectOnPressUp,isVirtualized=options.isVirtualized,shouldUseVirtualFocus=options.shouldUseVirtualFocus,focus=options.focus,isDisabled=options.isDisabled,onAction=options.onAction,allowsDifferentPressOrigin=options.allowsDifferentPressOrigin;var onSelect=function onSelect(e){if(e.pointerType==='keyboard'&&$feb5ffebff200149$export$d3e3bd3e26688c04(e))manager.toggleSelection(key);else{if(manager.selectionMode==='none')return;if(manager.selectionMode==='single'){if(manager.isSelected(key)&&!manager.disallowEmptySelection)manager.toggleSelection(key);else manager.replaceSelection(key);}else if(e&&e.shiftKey)manager.extendSelection(key);else if(manager.selectionBehavior==='toggle'||e&&($feb5ffebff200149$export$16792effe837dba3(e)||e.pointerType==='touch'||e.pointerType==='virtual'))manager.toggleSelection(key);else manager.replaceSelection(key);}};$eCAIO$useEffect(function(){var isFocused=key===manager.focusedKey;if(isFocused&&manager.isFocused&&!shouldUseVirtualFocus&&document.activeElement!==ref.current){if(focus)focus();else $eCAIO$focusSafely(ref.current);}},[ref,key,manager.focusedKey,manager.childFocusStrategy,manager.isFocused,shouldUseVirtualFocus]);var itemProps={};if(!shouldUseVirtualFocus)itemProps={tabIndex:key===manager.focusedKey?0:-1,onFocus:function onFocus(e){if(e.target===ref.current)manager.setFocusedKey(key);}};isDisabled=isDisabled||manager.isDisabled(key);var allowsSelection=!isDisabled&&manager.canSelectItem(key);var allowsActions=onAction&&!isDisabled;var hasPrimaryAction=allowsActions&&(manager.selectionBehavior==='replace'?!allowsSelection:manager.isEmpty);var hasSecondaryAction=allowsActions&&allowsSelection&&manager.selectionBehavior==='replace';var hasAction=hasPrimaryAction||hasSecondaryAction;var modality=$eCAIO$useRef(null);var longPressEnabled=hasAction&&allowsSelection;var longPressEnabledOnPressStart=$eCAIO$useRef(false);var hadPrimaryActionOnPressStart=$eCAIO$useRef(false);var itemPressProps={};if(shouldSelectOnPressUp){itemPressProps.onPressStart=function(e){modality.current=e.pointerType;longPressEnabledOnPressStart.current=longPressEnabled;if(e.pointerType==='keyboard'&&(!hasAction||$880e95eb8b93ba9a$var$isSelectionKey()))onSelect(e);};if(!allowsDifferentPressOrigin)itemPressProps.onPress=function(e){if(hasPrimaryAction||hasSecondaryAction&&e.pointerType!=='mouse'){if(e.pointerType==='keyboard'&&!$880e95eb8b93ba9a$var$isActionKey())return;onAction();}else if(e.pointerType!=='keyboard')onSelect(e);};else{itemPressProps.onPressUp=function(e){if(e.pointerType!=='keyboard')onSelect(e);};itemPressProps.onPress=hasPrimaryAction?function(){return onAction();}:null;}}else{itemPressProps.onPressStart=function(e){modality.current=e.pointerType;longPressEnabledOnPressStart.current=longPressEnabled;hadPrimaryActionOnPressStart.current=hasPrimaryAction;if(e.pointerType==='mouse'&&!hasPrimaryAction||e.pointerType==='keyboard'&&(!onAction||$880e95eb8b93ba9a$var$isSelectionKey()))onSelect(e);};itemPressProps.onPress=function(e){if(e.pointerType==='touch'||e.pointerType==='pen'||e.pointerType==='virtual'||e.pointerType==='keyboard'&&hasAction&&$880e95eb8b93ba9a$var$isActionKey()||e.pointerType==='mouse'&&hadPrimaryActionOnPressStart.current){if(hasAction)onAction();else onSelect(e);}};}if(!isVirtualized)itemProps['data-key']=key;itemPressProps.preventFocusOnPress=shouldUseVirtualFocus;var _$eCAIO$usePress=$eCAIO$usePress(itemPressProps),pressProps=_$eCAIO$usePress.pressProps,isPressed=_$eCAIO$usePress.isPressed;var onDoubleClick=hasSecondaryAction?function(e){if(modality.current==='mouse'){e.stopPropagation();e.preventDefault();onAction();}}:undefined;var _$eCAIO$useLongPress=$eCAIO$useLongPress({isDisabled:!longPressEnabled,onLongPress:function onLongPress(e){if(e.pointerType==='touch'){onSelect(e);manager.setSelectionBehavior('toggle');}}}),longPressProps=_$eCAIO$useLongPress.longPressProps;var onDragStartCapture=function onDragStartCapture(e){if(modality.current==='touch'&&longPressEnabledOnPressStart.current)e.preventDefault();};return{itemProps:$eCAIO$mergeProps(itemProps,allowsSelection||hasPrimaryAction?pressProps:{},longPressEnabled?longPressProps:{},{onDoubleClick:onDoubleClick,onDragStartCapture:onDragStartCapture}),isPressed:isPressed,isSelected:manager.isSelected(key),isDisabled:isDisabled,allowsSelection:allowsSelection,hasAction:hasAction};}function $880e95eb8b93ba9a$var$isActionKey(){var event=window.event;return(event===null||event===void 0?void 0:event.key)==='Enter';}function $880e95eb8b93ba9a$var$isSelectionKey(){var event=window.event;return(event===null||event===void 0?void 0:event.key)===' '||(event===null||event===void 0?void 0:event.code)==='Space';}var $2a25aae57d74318e$export$a05409b8bb224a5a=function(){function $2a25aae57d74318e$export$a05409b8bb224a5a(collection,disabledKeys,ref,collator){_classCallCheck(this,$2a25aae57d74318e$export$a05409b8bb224a5a);this.collection=collection;this.disabledKeys=disabledKeys;this.ref=ref;this.collator=collator;}_createClass($2a25aae57d74318e$export$a05409b8bb224a5a,[{key:\"getKeyBelow\",value:function getKeyBelow(key){key=this.collection.getKeyAfter(key);while(key!=null){var item=this.collection.getItem(key);if(item.type==='item'&&!this.disabledKeys.has(key))return key;key=this.collection.getKeyAfter(key);}}},{key:\"getKeyAbove\",value:function getKeyAbove(key){key=this.collection.getKeyBefore(key);while(key!=null){var item=this.collection.getItem(key);if(item.type==='item'&&!this.disabledKeys.has(key))return key;key=this.collection.getKeyBefore(key);}}},{key:\"getFirstKey\",value:function getFirstKey(){var key=this.collection.getFirstKey();while(key!=null){var item=this.collection.getItem(key);if(item.type==='item'&&!this.disabledKeys.has(key))return key;key=this.collection.getKeyAfter(key);}}},{key:\"getLastKey\",value:function getLastKey(){var key=this.collection.getLastKey();while(key!=null){var item=this.collection.getItem(key);if(item.type==='item'&&!this.disabledKeys.has(key))return key;key=this.collection.getKeyBefore(key);}}},{key:\"getItem\",value:function getItem(key){return this.ref.current.querySelector(\"[data-key=\\\"\"+key+\"\\\"]\");}},{key:\"getKeyPageAbove\",value:function getKeyPageAbove(key){var menu=this.ref.current;var item=this.getItem(key);if(!item)return null;var pageY=Math.max(0,item.offsetTop+item.offsetHeight-menu.offsetHeight);while(item&&item.offsetTop>pageY){key=this.getKeyAbove(key);item=this.getItem(key);}return key;}},{key:\"getKeyPageBelow\",value:function getKeyPageBelow(key){var menu=this.ref.current;var item=this.getItem(key);if(!item)return null;var pageY=Math.min(menu.scrollHeight,item.offsetTop-item.offsetHeight+menu.offsetHeight);while(item&&item.offsetTop<pageY){key=this.getKeyBelow(key);item=this.getItem(key);}return key;}},{key:\"getKeyForSearch\",value:function getKeyForSearch(search,fromKey){if(!this.collator)return null;var collection=this.collection;var key=fromKey||this.getFirstKey();while(key!=null){var item=collection.getItem(key);var substring=item.textValue.slice(0,search.length);if(item.textValue&&this.collator.compare(substring,search)===0)return key;key=this.getKeyBelow(key);}return null;}}]);return $2a25aae57d74318e$export$a05409b8bb224a5a;}();function $982254629710d113$export$b95089534ab7c1fd(props){var selectionManager=props.selectionManager,collection=props.collection,disabledKeys=props.disabledKeys,ref=props.ref,keyboardDelegate=props.keyboardDelegate,autoFocus=props.autoFocus,shouldFocusWrap=props.shouldFocusWrap,isVirtualized=props.isVirtualized,disallowEmptySelection=props.disallowEmptySelection,_props$selectOnFocus=props.selectOnFocus,selectOnFocus=_props$selectOnFocus===void 0?selectionManager.selectionBehavior==='replace':_props$selectOnFocus,disallowTypeAhead=props.disallowTypeAhead,shouldUseVirtualFocus=props.shouldUseVirtualFocus,allowsTabNavigation=props.allowsTabNavigation;var collator=$eCAIO$useCollator({usage:'search',sensitivity:'base'});var disabledBehavior=selectionManager.disabledBehavior;var delegate=$eCAIO$useMemo(function(){return keyboardDelegate||new $2a25aae57d74318e$export$a05409b8bb224a5a(collection,disabledBehavior==='selection'?new Set():disabledKeys,ref,collator);},[keyboardDelegate,collection,disabledKeys,ref,collator,disabledBehavior]);var _$ae20dd8cbca75726$ex=$ae20dd8cbca75726$export$d6daf82dcd84e87c({ref:ref,selectionManager:selectionManager,keyboardDelegate:delegate,autoFocus:autoFocus,shouldFocusWrap:shouldFocusWrap,disallowEmptySelection:disallowEmptySelection,selectOnFocus:selectOnFocus,disallowTypeAhead:disallowTypeAhead,shouldUseVirtualFocus:shouldUseVirtualFocus,allowsTabNavigation:allowsTabNavigation,isVirtualized:isVirtualized,scrollRef:ref}),collectionProps=_$ae20dd8cbca75726$ex.collectionProps;return{listProps:collectionProps};}export{$ae20dd8cbca75726$export$d6daf82dcd84e87c as useSelectableCollection,$880e95eb8b93ba9a$export$ecf600387e221c37 as useSelectableItem,$982254629710d113$export$b95089534ab7c1fd as useSelectableList,$2a25aae57d74318e$export$a05409b8bb224a5a as ListKeyboardDelegate,$fb3050f43d946246$export$e32c88dfddc6e1d8 as useTypeSelect};","map":{"version":3,"mappings":"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","names":["$feb5ffebff200149$export$d3e3bd3e26688c04","e","$eCAIO$isAppleDevice","altKey","ctrlKey","$feb5ffebff200149$export$16792effe837dba3","$eCAIO$isMac","metaKey","$fb3050f43d946246$var$TYPEAHEAD_DEBOUNCE_WAIT_MS","$fb3050f43d946246$export$e32c88dfddc6e1d8","options","keyboardDelegate","selectionManager","onTypeSelect","state","$eCAIO$useRef","search","timeout","current","onKeyDown","character","$fb3050f43d946246$var$getStringForKey","key","trim","length","preventDefault","stopPropagation","getKeyForSearch","focusedKey","setFocusedKey","clearTimeout","setTimeout","typeSelectProps","onKeyDownCapture","test","$ae20dd8cbca75726$export$d6daf82dcd84e87c","manager","delegate","ref","autoFocus","shouldFocusWrap","disallowEmptySelection","disallowSelectAll","selectOnFocus","selectionBehavior","disallowTypeAhead","shouldUseVirtualFocus","allowsTabNavigation","isVirtualized","scrollRef","$eCAIO$useLocale","direction","contains","target","navigateToKey","childFocus","shiftKey","selectionMode","extendSelection","replaceSelection","getKeyBelow","ref4","ref1","nextKey","getFirstKey","call","getKeyAbove","ref2","ref3","getLastKey","getKeyLeftOf","getKeyRightOf","firstKey","lastKey","getKeyPageBelow","getKeyPageAbove","selectAll","clearSelection","focus","walker","$eCAIO$getFocusableTreeWalker","tabbable","next","last","lastChild","document","activeElement","$eCAIO$focusWithoutScrolling","scrollPos","top","left","$eCAIO$useEvent","scrollTop","scrollLeft","onFocus","isFocused","currentTarget","setFocused","navigateToFirstKey","relatedTarget","_lastSelectedKey","_firstSelectedKey","compareDocumentPosition","Node","DOCUMENT_POSITION_FOLLOWING","lastSelectedKey","firstSelectedKey","element","querySelector","$eCAIO$scrollIntoView","onBlur","autoFocusRef","$eCAIO$useEffect","selectedKeys","size","values","value","$eCAIO$focusSafely","handlers","onMouseDown","$eCAIO$mergeProps","tabIndex","collectionProps","$880e95eb8b93ba9a$export$ecf600387e221c37","shouldSelectOnPressUp","isDisabled","onAction","allowsDifferentPressOrigin","onSelect","pointerType","toggleSelection","isSelected","childFocusStrategy","itemProps","allowsSelection","canSelectItem","allowsActions","hasPrimaryAction","isEmpty","hasSecondaryAction","hasAction","modality","longPressEnabled","longPressEnabledOnPressStart","hadPrimaryActionOnPressStart","itemPressProps","onPressStart","$880e95eb8b93ba9a$var$isSelectionKey","onPress","$880e95eb8b93ba9a$var$isActionKey","onPressUp","preventFocusOnPress","$eCAIO$usePress","pressProps","isPressed","onDoubleClick","undefined","$eCAIO$useLongPress","onLongPress","setSelectionBehavior","longPressProps","onDragStartCapture","event","window","code","$2a25aae57d74318e$export$a05409b8bb224a5a","collection","disabledKeys","collator","getKeyAfter","item","getItem","type","has","getKeyBefore","menu","pageY","Math","max","offsetTop","offsetHeight","min","scrollHeight","fromKey","substring","textValue","slice","compare","$982254629710d113$export$b95089534ab7c1fd","props","$eCAIO$useCollator","usage","sensitivity","disabledBehavior","$eCAIO$useMemo","Set","listProps"],"sources":["packages/@react-aria/selection/src/utils.ts","packages/@react-aria/selection/src/useTypeSelect.ts","packages/@react-aria/selection/src/useSelectableCollection.ts","packages/@react-aria/selection/src/useSelectableItem.ts","packages/@react-aria/selection/src/ListKeyboardDelegate.ts","packages/@react-aria/selection/src/useSelectableList.ts"],"sourcesContent":["/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {isAppleDevice} from '@react-aria/utils';\nimport {isMac} from '@react-aria/utils';\n\ninterface Event {\n  altKey: boolean,\n  ctrlKey: boolean,\n  metaKey: boolean\n}\n\nexport function isNonContiguousSelectionModifier(e: Event) {\n  // Ctrl + Arrow Up/Arrow Down has a system wide meaning on macOS, so use Alt instead.\n  // On Windows and Ubuntu, Alt + Space has a system wide meaning.\n  return isAppleDevice() ? e.altKey : e.ctrlKey;\n}\n\nexport function isCtrlKeyPressed(e: Event) {\n  if (isMac()) {\n    return e.metaKey;\n  }\n\n  return e.ctrlKey;\n}\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {DOMAttributes, KeyboardDelegate} from '@react-types/shared';\nimport {Key, KeyboardEvent, useRef} from 'react';\nimport {MultipleSelectionManager} from '@react-stately/selection';\n\n/**\n * Controls how long to wait before clearing the typeahead buffer.\n */\nconst TYPEAHEAD_DEBOUNCE_WAIT_MS = 1000; // 1 second\n\nexport interface AriaTypeSelectOptions {\n  /**\n   * A delegate that returns collection item keys with respect to visual layout.\n   */\n  keyboardDelegate: KeyboardDelegate,\n  /**\n   * An interface for reading and updating multiple selection state.\n   */\n  selectionManager: MultipleSelectionManager,\n  /**\n   * Called when an item is focused by typing.\n   */\n  onTypeSelect?: (key: Key) => void\n}\n\nexport interface TypeSelectAria {\n  /**\n   * Props to be spread on the owner of the options.\n   */\n  typeSelectProps: DOMAttributes\n}\n\n/**\n * Handles typeahead interactions with collections.\n */\nexport function useTypeSelect(options: AriaTypeSelectOptions): TypeSelectAria {\n  let {keyboardDelegate, selectionManager, onTypeSelect} = options;\n  let state = useRef({\n    search: '',\n    timeout: null\n  }).current;\n\n  let onKeyDown = (e: KeyboardEvent) => {\n    let character = getStringForKey(e.key);\n    if (!character || e.ctrlKey || e.metaKey) {\n      return;\n    }\n\n    // Do not propagate the Spacebar event if it's meant to be part of the search.\n    // When we time out, the search term becomes empty, hence the check on length.\n    // Trimming is to account for the case of pressing the Spacebar more than once,\n    // which should cycle through the selection/deselection of the focused item.\n    if (character === ' ' && state.search.trim().length > 0) {\n      e.preventDefault();\n      if (!('continuePropagation' in e)) {\n        e.stopPropagation();\n      }\n    }\n\n    state.search += character;\n\n    // Use the delegate to find a key to focus.\n    // Prioritize items after the currently focused item, falling back to searching the whole list.\n    let key = keyboardDelegate.getKeyForSearch(state.search, selectionManager.focusedKey);\n\n    // If no key found, search from the top.\n    if (key == null) {\n      key = keyboardDelegate.getKeyForSearch(state.search);\n    }\n\n    if (key != null) {\n      selectionManager.setFocusedKey(key);\n      if (onTypeSelect) {\n        onTypeSelect(key);\n      }\n    }\n\n    clearTimeout(state.timeout);\n    state.timeout = setTimeout(() => {\n      state.search = '';\n    }, TYPEAHEAD_DEBOUNCE_WAIT_MS);\n  };\n\n  return {\n    typeSelectProps: {\n      // Using a capturing listener to catch the keydown event before\n      // other hooks in order to handle the Spacebar event.\n      onKeyDownCapture: keyboardDelegate.getKeyForSearch ? onKeyDown : null\n    }\n  };\n}\n\nfunction getStringForKey(key: string) {\n  // If the key is of length 1, it is an ASCII value.\n  // Otherwise, if there are no ASCII characters in the key name,\n  // it is a Unicode character.\n  // See https://www.w3.org/TR/uievents-key/\n  if (key.length === 1 || !/^[A-Z]/i.test(key)) {\n    return key;\n  }\n\n  return '';\n}\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {DOMAttributes, FocusableElement, FocusStrategy, KeyboardDelegate} from '@react-types/shared';\nimport {FocusEvent, Key, KeyboardEvent, RefObject, useEffect, useRef} from 'react';\nimport {focusSafely, getFocusableTreeWalker} from '@react-aria/focus';\nimport {focusWithoutScrolling, mergeProps, scrollIntoView, useEvent} from '@react-aria/utils';\nimport {isCtrlKeyPressed, isNonContiguousSelectionModifier} from './utils';\nimport {MultipleSelectionManager} from '@react-stately/selection';\nimport {useLocale} from '@react-aria/i18n';\nimport {useTypeSelect} from './useTypeSelect';\n\nexport interface AriaSelectableCollectionOptions {\n  /**\n   * An interface for reading and updating multiple selection state.\n   */\n  selectionManager: MultipleSelectionManager,\n  /**\n   * A delegate object that implements behavior for keyboard focus movement.\n   */\n  keyboardDelegate: KeyboardDelegate,\n  /**\n   * The ref attached to the element representing the collection.\n   */\n  ref: RefObject<HTMLElement>,\n  /**\n   * Whether the collection or one of its items should be automatically focused upon render.\n   * @default false\n   */\n  autoFocus?: boolean | FocusStrategy,\n  /**\n   * Whether focus should wrap around when the end/start is reached.\n   * @default false\n   */\n  shouldFocusWrap?: boolean,\n  /**\n   * Whether the collection allows empty selection.\n   * @default false\n   */\n  disallowEmptySelection?: boolean,\n  /**\n   * Whether the collection allows the user to select all items via keyboard shortcut.\n   * @default false\n   */\n  disallowSelectAll?: boolean,\n  /**\n   * Whether selection should occur automatically on focus.\n   * @default false\n   */\n  selectOnFocus?: boolean,\n  /**\n   * Whether typeahead is disabled.\n   * @default false\n   */\n  disallowTypeAhead?: boolean,\n  /**\n   * Whether the collection items should use virtual focus instead of being focused directly.\n   */\n  shouldUseVirtualFocus?: boolean,\n  /**\n   * Whether navigation through tab key is enabled.\n   */\n  allowsTabNavigation?: boolean,\n  /**\n   * Whether the collection items are contained in a virtual scroller.\n   */\n  isVirtualized?: boolean,\n  /**\n   * The ref attached to the scrollable body. Used to provide automatic scrolling on item focus for non-virtualized collections.\n   * If not provided, defaults to the collection ref.\n   */\n  scrollRef?: RefObject<HTMLElement>\n}\n\nexport interface SelectableCollectionAria {\n  /** Props for the collection element. */\n  collectionProps: DOMAttributes\n}\n\n/**\n * Handles interactions with selectable collections.\n */\nexport function useSelectableCollection(options: AriaSelectableCollectionOptions): SelectableCollectionAria {\n  let {\n    selectionManager: manager,\n    keyboardDelegate: delegate,\n    ref,\n    autoFocus = false,\n    shouldFocusWrap = false,\n    disallowEmptySelection = false,\n    disallowSelectAll = false,\n    selectOnFocus = manager.selectionBehavior === 'replace',\n    disallowTypeAhead = false,\n    shouldUseVirtualFocus,\n    allowsTabNavigation = false,\n    isVirtualized,\n    // If no scrollRef is provided, assume the collection ref is the scrollable region\n    scrollRef = ref\n  } = options;\n  let {direction} = useLocale();\n\n\n  let onKeyDown = (e: KeyboardEvent) => {\n    // Prevent option + tab from doing anything since it doesn't move focus to the cells, only buttons/checkboxes\n    if (e.altKey && e.key === 'Tab') {\n      e.preventDefault();\n    }\n\n    // Keyboard events bubble through portals. Don't handle keyboard events\n    // for elements outside the collection (e.g. menus).\n    if (!ref.current.contains(e.target as Element)) {\n      return;\n    }\n\n    const navigateToKey = (key: Key | undefined, childFocus?: FocusStrategy) => {\n      if (key != null) {\n        manager.setFocusedKey(key, childFocus);\n\n        if (e.shiftKey && manager.selectionMode === 'multiple') {\n          manager.extendSelection(key);\n        } else if (selectOnFocus && !isNonContiguousSelectionModifier(e)) {\n          manager.replaceSelection(key);\n        }\n      }\n    };\n\n    switch (e.key) {\n      case 'ArrowDown': {\n        if (delegate.getKeyBelow) {\n          e.preventDefault();\n          let nextKey = manager.focusedKey != null\n              ? delegate.getKeyBelow(manager.focusedKey)\n              : delegate.getFirstKey?.();\n          if (nextKey == null && shouldFocusWrap) {\n            nextKey = delegate.getFirstKey?.(manager.focusedKey);\n          }\n          navigateToKey(nextKey);\n        }\n        break;\n      }\n      case 'ArrowUp': {\n        if (delegate.getKeyAbove) {\n          e.preventDefault();\n          let nextKey = manager.focusedKey != null\n              ? delegate.getKeyAbove(manager.focusedKey)\n              : delegate.getLastKey?.();\n          if (nextKey == null && shouldFocusWrap) {\n            nextKey = delegate.getLastKey?.(manager.focusedKey);\n          }\n          navigateToKey(nextKey);\n        }\n        break;\n      }\n      case 'ArrowLeft': {\n        if (delegate.getKeyLeftOf) {\n          e.preventDefault();\n          let nextKey = delegate.getKeyLeftOf(manager.focusedKey);\n          navigateToKey(nextKey, direction === 'rtl' ? 'first' : 'last');\n        }\n        break;\n      }\n      case 'ArrowRight': {\n        if (delegate.getKeyRightOf) {\n          e.preventDefault();\n          let nextKey = delegate.getKeyRightOf(manager.focusedKey);\n          navigateToKey(nextKey, direction === 'rtl' ? 'last' : 'first');\n        }\n        break;\n      }\n      case 'Home':\n        if (delegate.getFirstKey) {\n          e.preventDefault();\n          let firstKey = delegate.getFirstKey(manager.focusedKey, isCtrlKeyPressed(e));\n          manager.setFocusedKey(firstKey);\n          if (isCtrlKeyPressed(e) && e.shiftKey && manager.selectionMode === 'multiple') {\n            manager.extendSelection(firstKey);\n          } else if (selectOnFocus) {\n            manager.replaceSelection(firstKey);\n          }\n        }\n        break;\n      case 'End':\n        if (delegate.getLastKey) {\n          e.preventDefault();\n          let lastKey = delegate.getLastKey(manager.focusedKey, isCtrlKeyPressed(e));\n          manager.setFocusedKey(lastKey);\n          if (isCtrlKeyPressed(e) && e.shiftKey && manager.selectionMode === 'multiple') {\n            manager.extendSelection(lastKey);\n          } else if (selectOnFocus) {\n            manager.replaceSelection(lastKey);\n          }\n        }\n        break;\n      case 'PageDown':\n        if (delegate.getKeyPageBelow) {\n          e.preventDefault();\n          let nextKey = delegate.getKeyPageBelow(manager.focusedKey);\n          navigateToKey(nextKey);\n        }\n        break;\n      case 'PageUp':\n        if (delegate.getKeyPageAbove) {\n          e.preventDefault();\n          let nextKey = delegate.getKeyPageAbove(manager.focusedKey);\n          navigateToKey(nextKey);\n        }\n        break;\n      case 'a':\n        if (isCtrlKeyPressed(e) && manager.selectionMode === 'multiple' && disallowSelectAll !== true) {\n          e.preventDefault();\n          manager.selectAll();\n        }\n        break;\n      case 'Escape':\n        e.preventDefault();\n        if (!disallowEmptySelection) {\n          manager.clearSelection();\n        }\n        break;\n      case 'Tab': {\n        if (!allowsTabNavigation) {\n          // There may be elements that are \"tabbable\" inside a collection (e.g. in a grid cell).\n          // However, collections should be treated as a single tab stop, with arrow key navigation internally.\n          // We don't control the rendering of these, so we can't override the tabIndex to prevent tabbing.\n          // Instead, we handle the Tab key, and move focus manually to the first/last tabbable element\n          // in the collection, so that the browser default behavior will apply starting from that element\n          // rather than the currently focused one.\n          if (e.shiftKey) {\n            ref.current.focus();\n          } else {\n            let walker = getFocusableTreeWalker(ref.current, {tabbable: true});\n            let next: FocusableElement;\n            let last: FocusableElement;\n            do {\n              last = walker.lastChild() as FocusableElement;\n              if (last) {\n                next = last;\n              }\n            } while (last);\n\n            if (next && !next.contains(document.activeElement)) {\n              focusWithoutScrolling(next);\n            }\n          }\n          break;\n        }\n      }\n    }\n  };\n\n  // Store the scroll position so we can restore it later.\n  let scrollPos = useRef({top: 0, left: 0});\n  useEvent(scrollRef, 'scroll', isVirtualized ? null : () => {\n    scrollPos.current = {\n      top: scrollRef.current.scrollTop,\n      left: scrollRef.current.scrollLeft\n    };\n  });\n\n  let onFocus = (e: FocusEvent) => {\n    if (manager.isFocused) {\n      // If a focus event bubbled through a portal, reset focus state.\n      if (!e.currentTarget.contains(e.target)) {\n        manager.setFocused(false);\n      }\n\n      return;\n    }\n\n    // Focus events can bubble through portals. Ignore these events.\n    if (!e.currentTarget.contains(e.target)) {\n      return;\n    }\n\n    manager.setFocused(true);\n\n    if (manager.focusedKey == null) {\n      let navigateToFirstKey = (key: Key | undefined) => {\n        if (key != null) {\n          manager.setFocusedKey(key);\n          if (selectOnFocus) {\n            manager.replaceSelection(key);\n          }\n        }\n      };\n      // If the user hasn't yet interacted with the collection, there will be no focusedKey set.\n      // Attempt to detect whether the user is tabbing forward or backward into the collection\n      // and either focus the first or last item accordingly.\n      let relatedTarget = e.relatedTarget as Element;\n      if (relatedTarget && (e.currentTarget.compareDocumentPosition(relatedTarget) & Node.DOCUMENT_POSITION_FOLLOWING)) {\n        navigateToFirstKey(manager.lastSelectedKey ?? delegate.getLastKey());\n      } else {\n        navigateToFirstKey(manager.firstSelectedKey ?? delegate.getFirstKey());\n      }\n    } else if (!isVirtualized) {\n      // Restore the scroll position to what it was before.\n      scrollRef.current.scrollTop = scrollPos.current.top;\n      scrollRef.current.scrollLeft = scrollPos.current.left;\n\n      // Refocus and scroll the focused item into view if it exists within the scrollable region.\n      let element = scrollRef.current.querySelector(`[data-key=\"${manager.focusedKey}\"]`) as HTMLElement;\n      if (element) {\n        // This prevents a flash of focus on the first/last element in the collection\n        focusWithoutScrolling(element);\n        scrollIntoView(scrollRef.current, element);\n      }\n    }\n  };\n\n  let onBlur = (e) => {\n    // Don't set blurred and then focused again if moving focus within the collection.\n    if (!e.currentTarget.contains(e.relatedTarget as HTMLElement)) {\n      manager.setFocused(false);\n    }\n  };\n\n  const autoFocusRef = useRef(autoFocus);\n  useEffect(() => {\n    if (autoFocusRef.current) {\n      let focusedKey = null;\n\n      // Check focus strategy to determine which item to focus\n      if (autoFocus === 'first') {\n        focusedKey = delegate.getFirstKey();\n      } if (autoFocus === 'last') {\n        focusedKey = delegate.getLastKey();\n      }\n\n      // If there are any selected keys, make the first one the new focus target\n      let selectedKeys = manager.selectedKeys;\n      if (selectedKeys.size) {\n        focusedKey = selectedKeys.values().next().value;\n      }\n\n      manager.setFocused(true);\n      manager.setFocusedKey(focusedKey);\n\n      // If no default focus key is selected, focus the collection itself.\n      if (focusedKey == null && !shouldUseVirtualFocus) {\n        focusSafely(ref.current);\n      }\n    }\n    autoFocusRef.current = false;\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // If not virtualized, scroll the focused element into view when the focusedKey changes.\n  // When virtualized, Virtualizer handles this internally.\n  useEffect(() => {\n    if (!isVirtualized && manager.focusedKey && scrollRef?.current) {\n      let element = scrollRef.current.querySelector(`[data-key=\"${manager.focusedKey}\"]`) as HTMLElement;\n      if (element) {\n        scrollIntoView(scrollRef.current, element);\n      }\n    }\n  }, [isVirtualized, scrollRef, manager.focusedKey]);\n\n  let handlers = {\n    onKeyDown,\n    onFocus,\n    onBlur,\n    onMouseDown(e) {\n      // Ignore events that bubbled through portals.\n      if (e.currentTarget.contains(e.target)) {\n        // Prevent focus going to the collection when clicking on the scrollbar.\n        e.preventDefault();\n      }\n    }\n  };\n\n  let {typeSelectProps} = useTypeSelect({\n    keyboardDelegate: delegate,\n    selectionManager: manager\n  });\n\n  if (!disallowTypeAhead) {\n    handlers = mergeProps(typeSelectProps, handlers);\n  }\n\n  // If nothing is focused within the collection, make the collection itself tabbable.\n  // This will be marshalled to either the first or last item depending on where focus came from.\n  // If using virtual focus, don't set a tabIndex at all so that VoiceOver on iOS 14 doesn't try\n  // to move real DOM focus to the element anyway.\n  let tabIndex: number;\n  if (!shouldUseVirtualFocus) {\n    tabIndex = manager.focusedKey == null ? 0 : -1;\n  }\n\n  return {\n    collectionProps: {\n      ...handlers,\n      tabIndex\n    }\n  };\n}\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {DOMAttributes, FocusableElement, LongPressEvent, PressEvent} from '@react-types/shared';\nimport {focusSafely} from '@react-aria/focus';\nimport {isCtrlKeyPressed, isNonContiguousSelectionModifier} from './utils';\nimport {Key, RefObject, useEffect, useRef} from 'react';\nimport {mergeProps} from '@react-aria/utils';\nimport {MultipleSelectionManager} from '@react-stately/selection';\nimport {PressProps, useLongPress, usePress} from '@react-aria/interactions';\n\nexport interface SelectableItemOptions {\n  /**\n   * An interface for reading and updating multiple selection state.\n   */\n  selectionManager: MultipleSelectionManager,\n  /**\n   * A unique key for the item.\n   */\n  key: Key,\n  /**\n   * Ref to the item.\n   */\n  ref: RefObject<FocusableElement>,\n  /**\n   * By default, selection occurs on pointer down. This can be strange if selecting an\n   * item causes the UI to disappear immediately (e.g. menus).\n   */\n  shouldSelectOnPressUp?: boolean,\n  /**\n   * Whether selection requires the pointer/mouse down and up events to occur on the same target or triggers selection on\n   * the target of the pointer/mouse up event.\n   */\n  allowsDifferentPressOrigin?: boolean,\n  /**\n   * Whether the option is contained in a virtual scroller.\n   */\n  isVirtualized?: boolean,\n  /**\n   * Function to focus the item.\n   */\n  focus?: () => void,\n  /**\n   * Whether the option should use virtual focus instead of being focused directly.\n   */\n  shouldUseVirtualFocus?: boolean,\n  /** Whether the item is disabled. */\n  isDisabled?: boolean,\n  /**\n   * Handler that is called when a user performs an action on the item. The exact user event depends on\n   * the collection's `selectionBehavior` prop and the interaction modality.\n   */\n  onAction?: () => void\n}\n\nexport interface SelectableItemStates {\n  /** Whether the item is currently in a pressed state. */\n  isPressed: boolean,\n  /** Whether the item is currently selected. */\n  isSelected: boolean,\n  /**\n   * Whether the item is non-interactive, i.e. both selection and actions are disabled and the item may\n   * not be focused. Dependent on `disabledKeys` and `disabledBehavior`.\n   */\n  isDisabled: boolean,\n  /**\n   * Whether the item may be selected, dependent on `selectionMode`, `disabledKeys`, and `disabledBehavior`.\n   */\n  allowsSelection: boolean,\n  /**\n   * Whether the item has an action, dependent on `onAction`, `disabledKeys`,\n   * and `disabledBehavior`. It may also change depending on the current selection state\n   * of the list (e.g. when selection is primary). This can be used to enable or disable hover\n   * styles or other visual indications of interactivity.\n   */\n  hasAction: boolean\n}\n\nexport interface SelectableItemAria extends SelectableItemStates {\n  /**\n   * Props to be spread on the item root node.\n   */\n  itemProps: DOMAttributes\n}\n\n/**\n * Handles interactions with an item in a selectable collection.\n */\nexport function useSelectableItem(options: SelectableItemOptions): SelectableItemAria {\n  let {\n    selectionManager: manager,\n    key,\n    ref,\n    shouldSelectOnPressUp,\n    isVirtualized,\n    shouldUseVirtualFocus,\n    focus,\n    isDisabled,\n    onAction,\n    allowsDifferentPressOrigin\n  } = options;\n\n  let onSelect = (e: PressEvent | LongPressEvent | PointerEvent) => {\n    if (e.pointerType === 'keyboard' && isNonContiguousSelectionModifier(e)) {\n      manager.toggleSelection(key);\n    } else {\n      if (manager.selectionMode === 'none') {\n        return;\n      }\n\n      if (manager.selectionMode === 'single') {\n        if (manager.isSelected(key) && !manager.disallowEmptySelection) {\n          manager.toggleSelection(key);\n        } else {\n          manager.replaceSelection(key);\n        }\n      } else if (e && e.shiftKey) {\n        manager.extendSelection(key);\n      } else if (manager.selectionBehavior === 'toggle' || (e && (isCtrlKeyPressed(e) || e.pointerType === 'touch' || e.pointerType === 'virtual'))) {\n        // if touch or virtual (VO) then we just want to toggle, otherwise it's impossible to multi select because they don't have modifier keys\n        manager.toggleSelection(key);\n      } else {\n        manager.replaceSelection(key);\n      }\n    }\n  };\n\n  // Focus the associated DOM node when this item becomes the focusedKey\n  useEffect(() => {\n    let isFocused = key === manager.focusedKey;\n    if (isFocused && manager.isFocused && !shouldUseVirtualFocus && document.activeElement !== ref.current) {\n      if (focus) {\n        focus();\n      } else {\n        focusSafely(ref.current);\n      }\n    }\n  }, [ref, key, manager.focusedKey, manager.childFocusStrategy, manager.isFocused, shouldUseVirtualFocus]);\n\n  // Set tabIndex to 0 if the element is focused, or -1 otherwise so that only the last focused\n  // item is tabbable.  If using virtual focus, don't set a tabIndex at all so that VoiceOver\n  // on iOS 14 doesn't try to move real DOM focus to the item anyway.\n  let itemProps: SelectableItemAria['itemProps'] = {};\n  if (!shouldUseVirtualFocus) {\n    itemProps = {\n      tabIndex: key === manager.focusedKey ? 0 : -1,\n      onFocus(e) {\n        if (e.target === ref.current) {\n          manager.setFocusedKey(key);\n        }\n      }\n    };\n  }\n\n\n  // With checkbox selection, onAction (i.e. navigation) becomes primary, and occurs on a single click of the row.\n  // Clicking the checkbox enters selection mode, after which clicking anywhere on any row toggles selection for that row.\n  // With highlight selection, onAction is secondary, and occurs on double click. Single click selects the row.\n  // With touch, onAction occurs on single tap, and long press enters selection mode.\n  isDisabled = isDisabled || manager.isDisabled(key);\n  let allowsSelection = !isDisabled && manager.canSelectItem(key);\n  let allowsActions = onAction && !isDisabled;\n  let hasPrimaryAction = allowsActions && (\n    manager.selectionBehavior === 'replace'\n      ? !allowsSelection\n      : manager.isEmpty\n  );\n  let hasSecondaryAction = allowsActions && allowsSelection && manager.selectionBehavior === 'replace';\n  let hasAction = hasPrimaryAction || hasSecondaryAction;\n  let modality = useRef(null);\n\n  let longPressEnabled = hasAction && allowsSelection;\n  let longPressEnabledOnPressStart = useRef(false);\n  let hadPrimaryActionOnPressStart = useRef(false);\n\n  // By default, selection occurs on pointer down. This can be strange if selecting an\n  // item causes the UI to disappear immediately (e.g. menus).\n  // If shouldSelectOnPressUp is true, we use onPressUp instead of onPressStart.\n  // onPress requires a pointer down event on the same element as pointer up. For menus,\n  // we want to be able to have the pointer down on the trigger that opens the menu and\n  // the pointer up on the menu item rather than requiring a separate press.\n  // For keyboard events, selection still occurs on key down.\n  let itemPressProps: PressProps = {};\n  if (shouldSelectOnPressUp) {\n    itemPressProps.onPressStart = (e) => {\n      modality.current = e.pointerType;\n      longPressEnabledOnPressStart.current = longPressEnabled;\n      if (e.pointerType === 'keyboard' && (!hasAction || isSelectionKey())) {\n        onSelect(e);\n      }\n    };\n\n    // If allowsDifferentPressOrigin, make selection happen on pressUp (e.g. open menu on press down, selection on menu item happens on press up.)\n    // Otherwise, have selection happen onPress (prevents listview row selection when clicking on interactable elements in the row)\n    if (!allowsDifferentPressOrigin) {\n      itemPressProps.onPress = (e) => {\n        if (hasPrimaryAction || (hasSecondaryAction && e.pointerType !== 'mouse')) {\n          if (e.pointerType === 'keyboard' && !isActionKey()) {\n            return;\n          }\n\n          onAction();\n        } else if (e.pointerType !== 'keyboard') {\n          onSelect(e);\n        }\n      };\n    } else {\n      itemPressProps.onPressUp = (e) => {\n        if (e.pointerType !== 'keyboard') {\n          onSelect(e);\n        }\n      };\n\n      itemPressProps.onPress = hasPrimaryAction ? () => onAction() : null;\n    }\n  } else {\n    itemPressProps.onPressStart = (e) => {\n      modality.current = e.pointerType;\n      longPressEnabledOnPressStart.current = longPressEnabled;\n      hadPrimaryActionOnPressStart.current = hasPrimaryAction;\n\n      // Select on mouse down unless there is a primary action which will occur on mouse up.\n      // For keyboard, select on key down. If there is an action, the Space key selects on key down,\n      // and the Enter key performs onAction on key up.\n      if (\n        (e.pointerType === 'mouse' && !hasPrimaryAction) ||\n        (e.pointerType === 'keyboard' && (!onAction || isSelectionKey()))\n      ) {\n        onSelect(e);\n      }\n    };\n\n    itemPressProps.onPress = (e) => {\n      // Selection occurs on touch up. Primary actions always occur on pointer up.\n      // Both primary and secondary actions occur on Enter key up. The only exception\n      // is secondary actions, which occur on double click with a mouse.\n      if (\n        e.pointerType === 'touch' ||\n        e.pointerType === 'pen' ||\n        e.pointerType === 'virtual' ||\n        (e.pointerType === 'keyboard' && hasAction && isActionKey()) ||\n        (e.pointerType === 'mouse' && hadPrimaryActionOnPressStart.current)\n      ) {\n        if (hasAction) {\n          onAction();\n        } else {\n          onSelect(e);\n        }\n      }\n    };\n  }\n\n  if (!isVirtualized) {\n    itemProps['data-key'] = key;\n  }\n\n  itemPressProps.preventFocusOnPress = shouldUseVirtualFocus;\n  let {pressProps, isPressed} = usePress(itemPressProps);\n\n  // Double clicking with a mouse with selectionBehavior = 'replace' performs an action.\n  let onDoubleClick = hasSecondaryAction ? (e) => {\n    if (modality.current === 'mouse') {\n      e.stopPropagation();\n      e.preventDefault();\n      onAction();\n    }\n  } : undefined;\n\n  // Long pressing an item with touch when selectionBehavior = 'replace' switches the selection behavior\n  // to 'toggle'. This changes the single tap behavior from performing an action (i.e. navigating) to\n  // selecting, and may toggle the appearance of a UI affordance like checkboxes on each item.\n  let {longPressProps} = useLongPress({\n    isDisabled: !longPressEnabled,\n    onLongPress(e) {\n      if (e.pointerType === 'touch') {\n        onSelect(e);\n        manager.setSelectionBehavior('toggle');\n      }\n    }\n  });\n\n  // Prevent native drag and drop on long press if we also select on long press.\n  // Once the user is in selection mode, they can long press again to drag.\n  // Use a capturing listener to ensure this runs before useDrag, regardless of\n  // the order the props get merged.\n  let onDragStartCapture = e => {\n    if (modality.current === 'touch' && longPressEnabledOnPressStart.current) {\n      e.preventDefault();\n    }\n  };\n\n  return {\n    itemProps: mergeProps(\n      itemProps,\n      allowsSelection || hasPrimaryAction ? pressProps : {},\n      longPressEnabled ? longPressProps : {},\n      {onDoubleClick, onDragStartCapture}\n    ),\n    isPressed,\n    isSelected: manager.isSelected(key),\n    isDisabled,\n    allowsSelection,\n    hasAction\n  };\n}\n\nfunction isActionKey() {\n  let event = window.event as KeyboardEvent;\n  return event?.key === 'Enter';\n}\n\nfunction isSelectionKey() {\n  let event = window.event as KeyboardEvent;\n  return event?.key === ' ' || event?.code === 'Space';\n}\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {Collection, KeyboardDelegate, Node} from '@react-types/shared';\nimport {Key, RefObject} from 'react';\n\nexport class ListKeyboardDelegate<T> implements KeyboardDelegate {\n  private collection: Collection<Node<T>>;\n  private disabledKeys: Set<Key>;\n  private ref: RefObject<HTMLElement>;\n  private collator: Intl.Collator;\n\n  constructor(collection: Collection<Node<T>>, disabledKeys: Set<Key>, ref: RefObject<HTMLElement>, collator?: Intl.Collator) {\n    this.collection = collection;\n    this.disabledKeys = disabledKeys;\n    this.ref = ref;\n    this.collator = collator;\n  }\n\n  getKeyBelow(key: Key) {\n    key = this.collection.getKeyAfter(key);\n    while (key != null) {\n      let item = this.collection.getItem(key);\n      if (item.type === 'item' && !this.disabledKeys.has(key)) {\n        return key;\n      }\n\n      key = this.collection.getKeyAfter(key);\n    }\n  }\n\n  getKeyAbove(key: Key) {\n    key = this.collection.getKeyBefore(key);\n    while (key != null) {\n      let item = this.collection.getItem(key);\n      if (item.type === 'item' && !this.disabledKeys.has(key)) {\n        return key;\n      }\n\n      key = this.collection.getKeyBefore(key);\n    }\n  }\n\n  getFirstKey() {\n    let key = this.collection.getFirstKey();\n    while (key != null) {\n      let item = this.collection.getItem(key);\n      if (item.type === 'item' && !this.disabledKeys.has(key)) {\n        return key;\n      }\n\n      key = this.collection.getKeyAfter(key);\n    }\n  }\n\n  getLastKey() {\n    let key = this.collection.getLastKey();\n    while (key != null) {\n      let item = this.collection.getItem(key);\n      if (item.type === 'item' && !this.disabledKeys.has(key)) {\n        return key;\n      }\n\n      key = this.collection.getKeyBefore(key);\n    }\n  }\n\n  private getItem(key: Key): HTMLElement {\n    return this.ref.current.querySelector(`[data-key=\"${key}\"]`);\n  }\n\n  getKeyPageAbove(key: Key) {\n    let menu = this.ref.current;\n    let item = this.getItem(key);\n    if (!item) {\n      return null;\n    }\n\n    let pageY = Math.max(0, item.offsetTop + item.offsetHeight - menu.offsetHeight);\n\n    while (item && item.offsetTop > pageY) {\n      key = this.getKeyAbove(key);\n      item = this.getItem(key);\n    }\n\n    return key;\n  }\n\n  getKeyPageBelow(key: Key) {\n    let menu = this.ref.current;\n    let item = this.getItem(key);\n    if (!item) {\n      return null;\n    }\n\n    let pageY = Math.min(menu.scrollHeight, item.offsetTop - item.offsetHeight + menu.offsetHeight);\n\n    while (item && item.offsetTop < pageY) {\n      key = this.getKeyBelow(key);\n      item = this.getItem(key);\n    }\n\n    return key;\n  }\n\n  getKeyForSearch(search: string, fromKey?: Key) {\n    if (!this.collator) {\n      return null;\n    }\n\n    let collection = this.collection;\n    let key = fromKey || this.getFirstKey();\n    while (key != null) {\n      let item = collection.getItem(key);\n      let substring = item.textValue.slice(0, search.length);\n      if (item.textValue && this.collator.compare(substring, search) === 0) {\n        return key;\n      }\n\n      key = this.getKeyBelow(key);\n    }\n\n    return null;\n  }\n}\n","/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {Collection, DOMAttributes, FocusStrategy, KeyboardDelegate, Node} from '@react-types/shared';\nimport {Key, RefObject, useMemo} from 'react';\nimport {ListKeyboardDelegate} from './ListKeyboardDelegate';\nimport {MultipleSelectionManager} from '@react-stately/selection';\nimport {useCollator} from '@react-aria/i18n';\nimport {useSelectableCollection} from './useSelectableCollection';\n\nexport interface AriaSelectableListOptions {\n  /**\n   * An interface for reading and updating multiple selection state.\n   */\n  selectionManager: MultipleSelectionManager,\n  /**\n   * State of the collection.\n   */\n  collection: Collection<Node<unknown>>,\n  /**\n   * The item keys that are disabled. These items cannot be selected, focused, or otherwise interacted with.\n   */\n  disabledKeys: Set<Key>,\n  /**\n   * A ref to the item.\n   */\n  ref?: RefObject<HTMLElement>,\n  /**\n   * A delegate that returns collection item keys with respect to visual layout.\n   */\n  keyboardDelegate?: KeyboardDelegate,\n  /**\n   * Whether the collection or one of its items should be automatically focused upon render.\n   * @default false\n   */\n  autoFocus?: boolean | FocusStrategy,\n  /**\n   * Whether focus should wrap around when the end/start is reached.\n   * @default false\n   */\n  shouldFocusWrap?: boolean,\n  /**\n   * Whether the option is contained in a virtual scroller.\n   */\n  isVirtualized?: boolean,\n  /**\n   * Whether the collection allows empty selection.\n   * @default false\n   */\n  disallowEmptySelection?: boolean,\n  /**\n   * Whether selection should occur automatically on focus.\n   * @default false\n   */\n  selectOnFocus?: boolean,\n  /**\n   * Whether typeahead is disabled.\n   * @default false\n   */\n  disallowTypeAhead?: boolean,\n  /**\n   * Whether the collection items should use virtual focus instead of being focused directly.\n   */\n  shouldUseVirtualFocus?: boolean,\n  /**\n   * Whether navigation through tab key is enabled.\n   */\n  allowsTabNavigation?: boolean\n}\n\nexport interface SelectableListAria {\n  /**\n   * Props for the option element.\n   */\n  listProps: DOMAttributes\n}\n\n/**\n * Handles interactions with a selectable list.\n */\nexport function useSelectableList(props: AriaSelectableListOptions): SelectableListAria {\n  let {\n    selectionManager,\n    collection,\n    disabledKeys,\n    ref,\n    keyboardDelegate,\n    autoFocus,\n    shouldFocusWrap,\n    isVirtualized,\n    disallowEmptySelection,\n    selectOnFocus = selectionManager.selectionBehavior === 'replace',\n    disallowTypeAhead,\n    shouldUseVirtualFocus,\n    allowsTabNavigation\n  } = props;\n\n  // By default, a KeyboardDelegate is provided which uses the DOM to query layout information (e.g. for page up/page down).\n  // When virtualized, the layout object will be passed in as a prop and override this.\n  let collator = useCollator({usage: 'search', sensitivity: 'base'});\n  let disabledBehavior = selectionManager.disabledBehavior;\n  let delegate = useMemo(() => (\n    keyboardDelegate || new ListKeyboardDelegate(collection, disabledBehavior === 'selection' ? new Set() : disabledKeys, ref, collator)\n  ), [keyboardDelegate, collection, disabledKeys, ref, collator, disabledBehavior]);\n\n  let {collectionProps} = useSelectableCollection({\n    ref,\n    selectionManager,\n    keyboardDelegate: delegate,\n    autoFocus,\n    shouldFocusWrap,\n    disallowEmptySelection,\n    selectOnFocus,\n    disallowTypeAhead,\n    shouldUseVirtualFocus,\n    allowsTabNavigation,\n    isVirtualized,\n    scrollRef: ref\n  });\n\n  return {\n    listProps: collectionProps\n  };\n}\n"]},"metadata":{},"sourceType":"module"}