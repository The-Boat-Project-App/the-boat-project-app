{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";var _excluded=[\"children\"],_excluded2=[\"defaultValue\",\"keepWithinRange\",\"value\",\"min\",\"max\",\"onChange\"];function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}import React from'react';import{useThemeProps}from\"../../../hooks\";import{useFormControlContext}from\"../FormControl\";import{NumberInputContext}from\"./Context\";import Box from\"../../primitives/Box\";import{useHasResponsiveProps}from\"../../../hooks/useHasResponsiveProps\";var NumberInput=function NumberInput(_ref,ref){var children=_ref.children,props=_objectWithoutProperties(_ref,_excluded);var _useThemeProps=useThemeProps('NumberInput',props),defaultValue=_useThemeProps.defaultValue,keepWithinRange=_useThemeProps.keepWithinRange,value=_useThemeProps.value,min=_useThemeProps.min,max=_useThemeProps.max,onChange=_useThemeProps.onChange,newProps=_objectWithoutProperties(_useThemeProps,_excluded2);var formControlContext=useFormControlContext();var _React$useState=React.useState(parseInt(value||defaultValue,10)),_React$useState2=_slicedToArray(_React$useState,2),numberInputValue=_React$useState2[0],setNumberInputValue=_React$useState2[1];var _React$useState3=React.useState(null),_React$useState4=_slicedToArray(_React$useState3,2),numberInputStepper=_React$useState4[0],setNumberInputStepper=_React$useState4[1];var handleChange=function handleChange(newValue){var temp=newValue;setNumberInputValue(temp);if(keepWithinRange){if(newValue<min)setNumberInputValue(min);else if(newValue>max)setNumberInputValue(max);}onChange&&onChange(temp);};var handleChangeWithoutCheck=function handleChangeWithoutCheck(newValue){var temp=newValue;setNumberInputValue(temp);};React.useEffect(function(){if(value!==undefined&&value!=numberInputValue)setNumberInputValue(value);},[value,numberInputValue,setNumberInputValue]);if(useHasResponsiveProps(props)){return null;}return React.createElement(Box,{ref:ref},React.createElement(NumberInputContext.Provider,{value:_objectSpread(_objectSpread(_objectSpread({},formControlContext),newProps),{},{min:min,max:max,handleChange:handleChange,handleChangeWithoutCheck:handleChangeWithoutCheck,numberInputValue:numberInputValue,numberInputStepper:numberInputStepper,setNumberInputStepper:setNumberInputStepper,isControlled:value!==undefined})},children));};export default React.memo(React.forwardRef(NumberInput));","map":{"version":3,"mappings":"skCAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,OAASC,aAAT,sBACA,OAASC,qBAAT,sBAEA,OAASC,kBAAT,iBACA,MAAOC,IAAP,4BACA,OAASC,qBAAT,4CAEA,GAAMC,YAAW,CAAG,QAAdA,YAAc,MAA4CC,GAA5C,CAA0D,IAAvDC,SAAuD,MAAvDA,QAAuD,CAA1CC,KAA0C,0CAC5E,mBAQIR,aAAa,CAAC,aAAD,CAAgBQ,KAAhB,CARjB,CACEC,YADF,gBACEA,YADF,CAEEC,eAFF,gBAEEA,eAFF,CAGEC,KAHF,gBAGEA,KAHF,CAIEC,GAJF,gBAIEA,GAJF,CAKEC,GALF,gBAKEA,GALF,CAMEC,QANF,gBAMEA,QANF,CAOKC,QAPL,qDASA,GAAMC,mBAAkB,CAAGf,qBAAqB,EAAhD,CAEA,oBAAgDF,KAAK,CAACkB,QAANlB,CAC9CmB,QAAQ,CAACP,KAAK,EAAIF,YAAV,CAAwB,EAAxB,CADsCV,CAAhD,oDAAOoB,gBAAP,qBAAyBC,mBAAzB,qBAGA,qBAAoDrB,KAAK,CAACkB,QAANlB,CAAe,IAAfA,CAApD,qDAAOsB,kBAAP,qBAA2BC,qBAA3B,qBACA,GAAMC,aAAY,CAAIC,QAAhBD,aAAgBC,SAAD,CAAsB,CACzC,GAAMC,KAAI,CAAGD,QAAb,CACAJ,mBAAmB,CAACK,IAAD,CAAnBL,CACA,GAAIV,eAAJ,CAAqB,CACnB,GAAIc,QAAQ,CAAGZ,GAAf,CAAoBQ,mBAAmB,CAACR,GAAD,CAAnBQ,CAApB,IACK,IAAII,QAAQ,CAAGX,GAAf,CAAoBO,mBAAmB,CAACP,GAAD,CAAnBO,CALc,CAQzCN,QAAQ,EAAIA,QAAQ,CAACW,IAAD,CAApBX,CARF,EAUA,GAAMY,yBAAwB,CAAIF,QAA5BE,yBAA4BF,SAAD,CAAsB,CACrD,GAAMC,KAAI,CAAGD,QAAb,CACAJ,mBAAmB,CAACK,IAAD,CAAnBL,CAFF,EAKArB,KAAK,CAAC4B,SAAN5B,CAAgB,UAAM,CACpB,GAAIY,KAAK,GAAKiB,SAAVjB,EAAuBA,KAAK,EAAIQ,gBAApC,CACEC,mBAAmB,CAACT,KAAD,CAAnBS,CAFJ,EAGG,CAACT,KAAD,CAAQQ,gBAAR,CAA0BC,mBAA1B,CAHHrB,EAKA,GAAIK,qBAAqB,CAACI,KAAD,CAAzB,CAAkC,CAChC,MAAO,KAAP,CACD,CACD,MACET,qBAACI,GAAD,EAAKG,GAAG,CAAEA,GAAV,EACEP,oBAACG,kBAAD,CAAoB2B,QAApB,EACElB,KAAK,8CACAK,kBADA,EAEAD,QAFA,MAGHH,GAHK,CAGLA,GAHG,CAIHC,GAJK,CAILA,GAJG,CAKHU,YALK,CAKLA,YALG,CAMHG,wBANK,CAMLA,wBANG,CAOHP,gBAPK,CAOLA,gBAPG,CAQHE,kBARK,CAQLA,kBARG,CASHC,qBATK,CASLA,qBATG,CAUHQ,YAAY,CAAEnB,KAAK,GAAKiB,SAVrB,EADP,EAcGrB,QAdH,CADF,CADF,CAvCF,EA6DA,cAAeR,MAAK,CAACgC,IAANhC,CAAWA,KAAK,CAACiC,UAANjC,CAAiBM,WAAjBN,CAAXA,CAAf","names":["React","useThemeProps","useFormControlContext","NumberInputContext","Box","useHasResponsiveProps","NumberInput","ref","children","props","defaultValue","keepWithinRange","value","min","max","onChange","newProps","formControlContext","useState","parseInt","numberInputValue","setNumberInputValue","numberInputStepper","setNumberInputStepper","handleChange","newValue","temp","handleChangeWithoutCheck","useEffect","undefined","Provider","isControlled","memo","forwardRef"],"sources":["NumberInput.tsx"],"sourcesContent":["import React from 'react';\nimport { useThemeProps } from '../../../hooks';\nimport { useFormControlContext } from '../FormControl';\nimport type { INumberInputProps } from './types';\nimport { NumberInputContext } from './Context';\nimport Box from '../../primitives/Box';\nimport { useHasResponsiveProps } from '../../../hooks/useHasResponsiveProps';\n\nconst NumberInput = ({ children, ...props }: INumberInputProps, ref?: any) => {\n  const {\n    defaultValue,\n    keepWithinRange,\n    value,\n    min,\n    max,\n    onChange,\n    ...newProps\n  } = useThemeProps('NumberInput', props);\n  const formControlContext = useFormControlContext();\n\n  const [numberInputValue, setNumberInputValue] = React.useState(\n    parseInt(value || defaultValue, 10)\n  );\n  const [numberInputStepper, setNumberInputStepper] = React.useState(null);\n  const handleChange = (newValue: number) => {\n    const temp = newValue;\n    setNumberInputValue(temp);\n    if (keepWithinRange) {\n      if (newValue < min) setNumberInputValue(min);\n      else if (newValue > max) setNumberInputValue(max);\n    }\n    //NOTE: only calling onChange on stepper click or blur event of input.\n    onChange && onChange(temp);\n  };\n  const handleChangeWithoutCheck = (newValue: number) => {\n    const temp = newValue;\n    setNumberInputValue(temp);\n  };\n\n  React.useEffect(() => {\n    if (value !== undefined && value != numberInputValue)\n      setNumberInputValue(value);\n  }, [value, numberInputValue, setNumberInputValue]);\n  //TODO: refactor for responsive prop\n  if (useHasResponsiveProps(props)) {\n    return null;\n  }\n  return (\n    <Box ref={ref}>\n      <NumberInputContext.Provider\n        value={{\n          ...formControlContext,\n          ...newProps,\n          min,\n          max,\n          handleChange,\n          handleChangeWithoutCheck,\n          numberInputValue,\n          numberInputStepper,\n          setNumberInputStepper,\n          isControlled: value !== undefined,\n        }}\n      >\n        {children}\n      </NumberInputContext.Provider>\n    </Box>\n  );\n};\n\nexport default React.memo(React.forwardRef(NumberInput));\n"]},"metadata":{},"sourceType":"module"}