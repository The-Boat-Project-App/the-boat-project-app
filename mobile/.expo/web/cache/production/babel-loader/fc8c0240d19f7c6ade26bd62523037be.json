{"ast":null,"code":"'use strict';var Client=typeof __webpack_dev_server_client__!=='undefined'?__webpack_dev_server_client__:require(\"./clients/SockJSClient\");var retries=0;var client=null;var socket=function initSocket(url,handlers){client=new Client(url);client.onOpen(function(){retries=0;});client.onClose(function(){if(retries===0){handlers.close();}client=null;if(retries<=10){var retryInMs=1000*Math.pow(2,retries)+Math.random()*100;retries+=1;setTimeout(function(){socket(url,handlers);},retryInMs);}});client.onMessage(function(data){var msg=JSON.parse(data);if(handlers[msg.type]){handlers[msg.type](msg.data);}});};module.exports=socket;","map":{"version":3,"names":["Client","__webpack_dev_server_client__","require","retries","client","socket","initSocket","url","handlers","onOpen","onClose","close","retryInMs","Math","pow","random","setTimeout","onMessage","data","msg","JSON","parse","type","module","exports"],"sources":["/usr/local/lib/node_modules/expo-cli/node_modules/webpack-dev-server/client/socket.js"],"sourcesContent":["'use strict';\n/* global __webpack_dev_server_client__ */\n\n/* eslint-disable\n  camelcase\n*/\n// this SockJSClient is here as a default fallback, in case inline mode\n// is off or the client is not injected. This will be switched to\n// WebsocketClient when it becomes the default\n// important: the path to SockJSClient here is made to work in the 'client'\n// directory, but is updated via the webpack compilation when compiled from\n// the 'client-src' directory\n\nvar Client = typeof __webpack_dev_server_client__ !== 'undefined' ? __webpack_dev_server_client__ : // eslint-disable-next-line import/no-unresolved\nrequire('./clients/SockJSClient');\nvar retries = 0;\nvar client = null;\n\nvar socket = function initSocket(url, handlers) {\n  client = new Client(url);\n  client.onOpen(function () {\n    retries = 0;\n  });\n  client.onClose(function () {\n    if (retries === 0) {\n      handlers.close();\n    } // Try to reconnect.\n\n\n    client = null; // After 10 retries stop trying, to prevent logspam.\n\n    if (retries <= 10) {\n      // Exponentially increase timeout to reconnect.\n      // Respectfully copied from the package `got`.\n      // eslint-disable-next-line no-mixed-operators, no-restricted-properties\n      var retryInMs = 1000 * Math.pow(2, retries) + Math.random() * 100;\n      retries += 1;\n      setTimeout(function () {\n        socket(url, handlers);\n      }, retryInMs);\n    }\n  });\n  client.onMessage(function (data) {\n    var msg = JSON.parse(data);\n\n    if (handlers[msg.type]) {\n      handlers[msg.type](msg.data);\n    }\n  });\n};\n\nmodule.exports = socket;"],"mappings":"AAAA,aAaA,GAAIA,OAAM,CAAG,MAAOC,8BAAP,GAAyC,WAAzC,CAAuDA,6BAAvD,CACbC,OAAO,0BADP,CAEA,GAAIC,QAAO,CAAG,CAAd,CACA,GAAIC,OAAM,CAAG,IAAb,CAEA,GAAIC,OAAM,CAAG,QAASC,WAAT,CAAoBC,GAApB,CAAyBC,QAAzB,CAAmC,CAC9CJ,MAAM,CAAG,GAAIJ,OAAJ,CAAWO,GAAX,CAAT,CACAH,MAAM,CAACK,MAAP,CAAc,UAAY,CACxBN,OAAO,CAAG,CAAV,CACD,CAFD,EAGAC,MAAM,CAACM,OAAP,CAAe,UAAY,CACzB,GAAIP,OAAO,GAAK,CAAhB,CAAmB,CACjBK,QAAQ,CAACG,KAAT,GACD,CAGDP,MAAM,CAAG,IAAT,CAEA,GAAID,OAAO,EAAI,EAAf,CAAmB,CAIjB,GAAIS,UAAS,CAAG,KAAOC,IAAI,CAACC,GAAL,CAAS,CAAT,CAAYX,OAAZ,CAAP,CAA8BU,IAAI,CAACE,MAAL,GAAgB,GAA9D,CACAZ,OAAO,EAAI,CAAX,CACAa,UAAU,CAAC,UAAY,CACrBX,MAAM,CAACE,GAAD,CAAMC,QAAN,CAAN,CACD,CAFS,CAEPI,SAFO,CAAV,CAGD,CACF,CAlBD,EAmBAR,MAAM,CAACa,SAAP,CAAiB,SAAUC,IAAV,CAAgB,CAC/B,GAAIC,IAAG,CAAGC,IAAI,CAACC,KAAL,CAAWH,IAAX,CAAV,CAEA,GAAIV,QAAQ,CAACW,GAAG,CAACG,IAAL,CAAZ,CAAwB,CACtBd,QAAQ,CAACW,GAAG,CAACG,IAAL,CAAR,CAAmBH,GAAG,CAACD,IAAvB,EACD,CACF,CAND,EAOD,CA/BD,CAiCAK,MAAM,CAACC,OAAP,CAAiBnB,MAAjB"},"metadata":{},"sourceType":"script"}