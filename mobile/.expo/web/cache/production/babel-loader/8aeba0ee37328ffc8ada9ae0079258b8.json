{"ast":null,"code":"\"use strict\";var _defineProperty=require(\"@babel/runtime/helpers/defineProperty\");function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}Object.defineProperty(exports,\"__esModule\",{value:true});exports.useAElementProps=useAElementProps;exports.default=void 0;var _react=_interopRequireDefault(require(\"react\"));var _useNormalizedUrl=_interopRequireDefault(require(\"../hooks/useNormalizedUrl\"));var _DocumentMetadataProvider=require(\"../context/DocumentMetadataProvider\");var _RenderersPropsProvider=require(\"../context/RenderersPropsProvider\");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function useAnchorOnLinkPress(tnode,onPress){var href=tnode.attributes.href;var normalizedHref=(0,_useNormalizedUrl.default)(href);var _ref=(0,_DocumentMetadataProvider.useDocumentMetadata)(),baseTarget=_ref.baseTarget;var shouldHandleLinkPress=tnode.tagName==='a'&&typeof normalizedHref==='string'&&href.length>0&&typeof onPress==='function';return shouldHandleLinkPress?function(e){return onPress(e,normalizedHref,tnode.attributes,tnode.attributes.target||baseTarget);}:undefined;}function useAElementProps(props){var tnode=props.tnode;var _ref2=(0,_RenderersPropsProvider.useRendererProps)('a'),onPress=_ref2.onPress;var syntheticAnchorOnLinkPress=useAnchorOnLinkPress(tnode,onPress);if(typeof syntheticAnchorOnLinkPress!=='function'){return props;}return _objectSpread(_objectSpread({},props),{},{onPress:syntheticAnchorOnLinkPress});}var ARenderer=function ARenderer(props){return _react.default.createElement(props.TDefaultRenderer,useAElementProps(props));};var _default=ARenderer;exports.default=_default;","map":{"version":3,"mappings":"i9BAAA,oDAKA,mFACA,6EACA,4JAEA,QAASA,qBAAT,CACEC,KADF,CAEEC,OAFF,CAGE,CACA,GAAMC,KAAY,CAAGF,KAAK,CAACG,UAANH,CAAiBE,IAAtC,CACA,GAAME,eAAc,CAAG,8BAAiBF,IAAjB,CAAvB,CACA,SAAuB,mDAAvB,CAAQG,UAAR,MAAQA,UAAR,CACA,GAAMC,sBAAqB,CACzBN,KAAK,CAACO,OAANP,GAAkB,GAAlBA,EACA,MAAOI,eAAP,GAA0B,QAD1BJ,EAEAE,IAAI,CAACM,MAALN,CAAc,CAFdF,EAGA,MAAOC,QAAP,GAAmB,UAJrB,CAKA,MAAOK,sBAAqB,CACvBG,UAAD,QACER,QAAO,CACLQ,CADK,CAELL,cAFK,CAGLJ,KAAK,CAACG,UAHD,CAIJH,KAAK,CAACG,UAANH,CAAiBU,MAAjBV,EACCK,UALG,CADT,EADwB,CASxBM,SATJ,CAUD,CAEM,QAASC,iBAAT,CACLC,KADK,CAEqB,CAC1B,GAAQb,MAAR,CAAkBa,KAAlB,CAAQb,KAAR,CACA,UAAoB,6CAAiB,GAAjB,CAApB,CAAQC,OAAR,OAAQA,OAAR,CACA,GAAMa,2BAA0B,CAAGf,oBAAoB,CAACC,KAAD,CAAQC,OAAR,CAAvD,CACA,GAAI,MAAOa,2BAAP,GAAsC,UAA1C,CAAsD,CACpD,MAAOD,MAAP,CACD,CACD,sCACKA,KADL,MAEEZ,OAAO,CAAEa,0BAFX,GAID,CAED,GAAMC,UAAgC,CAAIF,QAApCE,UAAoCF,MAAD,CAAW,CAClD,MAAOG,gBAAMC,aAAND,CAAoBH,KAAK,CAACK,gBAA1BF,CAA4CJ,gBAAgB,CAACC,KAAD,CAA5DG,CAAP,CADF,eAIeD","names":["useAnchorOnLinkPress","tnode","onPress","href","attributes","normalizedHref","baseTarget","shouldHandleLinkPress","tagName","length","e","target","undefined","useAElementProps","props","syntheticAnchorOnLinkPress","ARenderer","React","createElement","TDefaultRenderer"],"sources":["ARenderer.tsx"],"sourcesContent":["import React from 'react';\nimport { InternalMixedRenderer } from '../render/render-types';\nimport { TNode, DocumentContext } from '@native-html/transient-render-engine';\nimport { InternalRendererProps, RenderersProps } from '../shared-types';\nimport { GestureResponderEvent } from 'react-native';\nimport useNormalizedUrl from '../hooks/useNormalizedUrl';\nimport { useDocumentMetadata } from '../context/DocumentMetadataProvider';\nimport { useRendererProps } from '../context/RenderersPropsProvider';\n\nfunction useAnchorOnLinkPress(\n  tnode: TNode,\n  onPress: RenderersProps['a']['onPress']\n) {\n  const href: string = tnode.attributes.href;\n  const normalizedHref = useNormalizedUrl(href);\n  const { baseTarget } = useDocumentMetadata();\n  const shouldHandleLinkPress =\n    tnode.tagName === 'a' &&\n    typeof normalizedHref === 'string' &&\n    href.length > 0 &&\n    typeof onPress === 'function';\n  return shouldHandleLinkPress\n    ? (e: GestureResponderEvent) =>\n        onPress!(\n          e,\n          normalizedHref,\n          tnode.attributes,\n          (tnode.attributes.target as DocumentContext['baseTarget']) ||\n            baseTarget\n        )\n    : undefined;\n}\n\nexport function useAElementProps<T extends TNode>(\n  props: InternalRendererProps<T>\n): InternalRendererProps<T> {\n  const { tnode } = props;\n  const { onPress } = useRendererProps('a');\n  const syntheticAnchorOnLinkPress = useAnchorOnLinkPress(tnode, onPress);\n  if (typeof syntheticAnchorOnLinkPress !== 'function') {\n    return props;\n  }\n  return {\n    ...props,\n    onPress: syntheticAnchorOnLinkPress\n  };\n}\n\nconst ARenderer: InternalMixedRenderer = (props) => {\n  return React.createElement(props.TDefaultRenderer, useAElementProps(props));\n};\n\nexport default ARenderer;\n"]},"metadata":{},"sourceType":"script"}