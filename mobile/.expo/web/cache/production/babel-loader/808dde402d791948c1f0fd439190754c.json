{"ast":null,"code":"function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}import{useKeyboardDismissable,usePropsResolution,useToken}from\"../../../hooks\";import React from'react';import Platform from\"react-native-web/dist/exports/Platform\";import{Popper}from\"../Popper\";import{PopoverContext}from\"./PopoverContext\";import{useHasResponsiveProps}from\"../../../hooks/useHasResponsiveProps\";export var PopoverContent=React.forwardRef(function(props,ref){var _ref,_ref2,_props$bgColor;var _React$useContext=React.useContext(PopoverContext),onClose=_React$useContext.onClose,initialFocusRef=_React$useContext.initialFocusRef,finalFocusRef=_React$useContext.finalFocusRef,popoverContentId=_React$useContext.popoverContentId,headerMounted=_React$useContext.headerMounted,bodyMounted=_React$useContext.bodyMounted,bodyId=_React$useContext.bodyId,headerId=_React$useContext.headerId,isOpen=_React$useContext.isOpen;var resolvedProps=usePropsResolution('PopoverContent',props);var arrowDefaultColor=(_ref=(_ref2=(_props$bgColor=props.bgColor)!==null&&_props$bgColor!==void 0?_props$bgColor:props.bg)!==null&&_ref2!==void 0?_ref2:props.backgroundColor)!==null&&_ref!==void 0?_ref:resolvedProps.backgroundColor;var color=useToken('colors',arrowDefaultColor);React.useEffect(function(){var finalFocusRefCurrentVal=finalFocusRef===null||finalFocusRef===void 0?void 0:finalFocusRef.current;if(initialFocusRef&&initialFocusRef.current){initialFocusRef.current.focus();}return function(){if(finalFocusRefCurrentVal){finalFocusRefCurrentVal.focus();}};},[finalFocusRef,initialFocusRef]);useKeyboardDismissable({enabled:true,callback:onClose});var arrowElement=null;var restChildren=[];React.Children.toArray(props.children).forEach(function(child){var _child$type;if((child===null||child===void 0?void 0:(_child$type=child.type)===null||_child$type===void 0?void 0:_child$type.displayName)==='PopperArrow'){var _child$props$color;arrowElement=React.cloneElement(child,{backgroundColor:(_child$props$color=child.props.color)!==null&&_child$props$color!==void 0?_child$props$color:color});}else{restChildren.push(child);}});var accessibilityProps=Platform.OS==='web'?{'accessibilityRole':'dialog','aria-labelledby':headerMounted?headerId:undefined,'aria-describedby':bodyMounted?bodyId:undefined}:{};if(useHasResponsiveProps(props)){return null;}return React.createElement(Popper.Content,_extends({nativeID:popoverContentId},accessibilityProps,resolvedProps,{ref:ref,isOpen:isOpen}),arrowElement,restChildren);});PopoverContent.displayName='PopoverContent';","map":{"version":3,"mappings":"uRAAA,OACEA,sBADF,CAEEC,kBAFF,CAGEC,QAHF,sBAKA,MAAOC,MAAP,KAAkB,OAAlB,C,6DAGA,OAASC,MAAT,iBACA,OAASC,cAAT,wBACA,OAASC,qBAAT,4CAEA,MAAO,IAAMC,eAAc,CAAGJ,KAAK,CAACK,UAANL,CAC5B,SAACM,KAAD,CAA8BC,GAA9B,CAA2C,+BACzC,sBAUIP,KAAK,CAACQ,UAANR,CAAiBE,cAAjBF,CAVJ,CACES,OADF,mBACEA,OADF,CAEEC,eAFF,mBAEEA,eAFF,CAGEC,aAHF,mBAGEA,aAHF,CAIEC,gBAJF,mBAIEA,gBAJF,CAKEC,aALF,mBAKEA,aALF,CAMEC,WANF,mBAMEA,WANF,CAOEC,MAPF,mBAOEA,MAPF,CAQEC,QARF,mBAQEA,QARF,CASEC,MATF,mBASEA,MATF,CAWA,GAAMC,cAAa,CAAGpB,kBAAkB,CAAC,gBAAD,CAAmBQ,KAAnB,CAAxC,CAEA,GAAMa,kBAAiB,8BACrBb,KAAK,CAACc,OADe,iDAErBd,KAAK,CAACe,EAFe,+BAGrBf,KAAK,CAACgB,eAHe,6BAIrBJ,aAAa,CAACI,eAJhB,CAKA,GAAMC,MAAK,CAAGxB,QAAQ,CAAC,QAAD,CAAWoB,iBAAX,CAAtB,CAEAnB,KAAK,CAACwB,SAANxB,CAAgB,UAAM,CACpB,GAAMyB,wBAAuB,CAAGd,aAAH,OAAGA,eAAH,SAAGA,CAAH,MAAGA,cAAa,CAAEe,OAA/C,CACA,GAAIhB,eAAe,EAAIA,eAAe,CAACgB,OAAvC,CAAgD,CAC9ChB,eAAe,CAACgB,OAAhBhB,CAAwBiB,KAAxBjB,GACD,CAED,MAAO,WAAM,CACX,GAAIe,uBAAJ,CAA6B,CAC3BA,uBAAuB,CAACE,KAAxBF,GACD,CAHH,EANF,EAWG,CAACd,aAAD,CAAgBD,eAAhB,CAXHV,EAaAH,sBAAsB,CAAC,CACrB+B,OAAO,CAAE,IADY,CAErBC,QAAQ,CAAEpB,OAFW,CAAD,CAAtBZ,CAKA,GAAIiC,aAAY,CAAG,IAAnB,CACA,GAAMC,aAAiB,CAAG,EAA1B,CACA/B,KAAK,CAACgC,QAANhC,CAAeiC,OAAfjC,CAAuBM,KAAK,CAAC4B,QAA7BlC,EAAuCmC,OAAvCnC,CAAgDoC,cAAD,CAAgB,iBAC7D,GAAI,MAAK,OAALA,OAAK,SAALA,0BAAK,CAAEC,IAAP,kDAAaC,WAAb,IAA6B,aAAjC,CAAgD,wBAC9CR,YAAY,CAAG9B,KAAK,CAACuC,YAANvC,CAAmBoC,KAAnBpC,CAA0B,CACvCsB,eAAe,qBAAEc,KAAK,CAAC9B,KAAN8B,CAAYb,KAAd,yDAAuBA,KADC,CAA1BvB,CAAf8B,CADF,KAIO,CACLC,YAAY,CAACS,IAAbT,CAAkBK,KAAlBL,EACD,CAPH,GAUA,GAAMU,mBAAkB,CACtBC,QAAQ,CAACC,EAATD,GAAgB,KAAhBA,CACK,CACC,oBAAqB,QADtB,CAEC,kBAAmB7B,aAAa,CAAGG,QAAH,CAAc4B,SAF/C,CAGC,mBAAoB9B,WAAW,CAAGC,MAAH,CAAY6B,SAH5C,CADLF,CAMI,EAPN,CAUA,GAAIvC,qBAAqB,CAACG,KAAD,CAAzB,CAAkC,CAChC,MAAO,KAAP,CACD,CAED,MACEN,qBAACC,MAAD,CAAQ4C,OAAR,WACEC,QAAQ,CAAElC,gBADZ,EAEM6B,kBAFN,CAGMvB,aAHN,EAIEX,GAAG,CAAEA,GAJP,CAKEU,MAAM,CAAEA,MALV,GAOGa,YAPH,CAQGC,YARH,CADF,CAlE0B,EAAvB,CAiFP3B,cAAc,CAACkC,WAAflC,CAA6B,gBAA7BA","names":["useKeyboardDismissable","usePropsResolution","useToken","React","Popper","PopoverContext","useHasResponsiveProps","PopoverContent","forwardRef","props","ref","useContext","onClose","initialFocusRef","finalFocusRef","popoverContentId","headerMounted","bodyMounted","bodyId","headerId","isOpen","resolvedProps","arrowDefaultColor","bgColor","bg","backgroundColor","color","useEffect","finalFocusRefCurrentVal","current","focus","enabled","callback","arrowElement","restChildren","Children","toArray","children","forEach","child","type","displayName","cloneElement","push","accessibilityProps","Platform","OS","undefined","Content","nativeID"],"sources":["PopoverContent.tsx"],"sourcesContent":["import {\n  useKeyboardDismissable,\n  usePropsResolution,\n  useToken,\n} from '../../../hooks';\nimport React from 'react';\nimport { Platform } from 'react-native';\nimport type { IPopoverContentProps } from './types';\nimport { Popper } from '../Popper';\nimport { PopoverContext } from './PopoverContext';\nimport { useHasResponsiveProps } from '../../../hooks/useHasResponsiveProps';\n\nexport const PopoverContent = React.forwardRef(\n  (props: IPopoverContentProps, ref: any) => {\n    const {\n      onClose,\n      initialFocusRef,\n      finalFocusRef,\n      popoverContentId,\n      headerMounted,\n      bodyMounted,\n      bodyId,\n      headerId,\n      isOpen,\n    } = React.useContext(PopoverContext);\n    const resolvedProps = usePropsResolution('PopoverContent', props);\n\n    const arrowDefaultColor =\n      props.bgColor ??\n      props.bg ??\n      props.backgroundColor ??\n      resolvedProps.backgroundColor;\n    const color = useToken('colors', arrowDefaultColor);\n\n    React.useEffect(() => {\n      const finalFocusRefCurrentVal = finalFocusRef?.current;\n      if (initialFocusRef && initialFocusRef.current) {\n        initialFocusRef.current.focus();\n      }\n\n      return () => {\n        if (finalFocusRefCurrentVal) {\n          finalFocusRefCurrentVal.focus();\n        }\n      };\n    }, [finalFocusRef, initialFocusRef]);\n\n    useKeyboardDismissable({\n      enabled: true,\n      callback: onClose,\n    });\n\n    let arrowElement = null;\n    const restChildren: any = [];\n    React.Children.toArray(props.children).forEach((child: any) => {\n      if (child?.type?.displayName === 'PopperArrow') {\n        arrowElement = React.cloneElement(child, {\n          backgroundColor: child.props.color ?? color,\n        });\n      } else {\n        restChildren.push(child);\n      }\n    });\n\n    const accessibilityProps =\n      Platform.OS === 'web'\n        ? ({\n            'accessibilityRole': 'dialog',\n            'aria-labelledby': headerMounted ? headerId : undefined,\n            'aria-describedby': bodyMounted ? bodyId : undefined,\n          } as any)\n        : {};\n\n    //TODO: refactor for responsive prop\n    if (useHasResponsiveProps(props)) {\n      return null;\n    }\n\n    return (\n      <Popper.Content\n        nativeID={popoverContentId}\n        {...accessibilityProps}\n        {...resolvedProps}\n        ref={ref}\n        isOpen={isOpen}\n      >\n        {arrowElement}\n        {restChildren}\n      </Popper.Content>\n    );\n  }\n);\n\nPopoverContent.displayName = 'PopoverContent';\n"]},"metadata":{},"sourceType":"module"}