{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";var _excluded=[\"isDisabled\",\"isReadOnly\"];function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}import React,{forwardRef}from'react';import{useSliderState}from'@react-stately/slider';import{useLayout}from\"../../../hooks\";import{usePropsResolution}from\"../../../hooks\";import Box from\"../Box\";import{SliderContext}from\"./Context\";import{useSlider}from'@react-native-aria/slider';import{useHasResponsiveProps}from\"../../../hooks/useHasResponsiveProps\";function Slider(_ref,ref){var isDisabled=_ref.isDisabled,isReadOnly=_ref.isReadOnly,props=_objectWithoutProperties(_ref,_excluded);var _props$accessibilityL;var newProps=_objectSpread(_objectSpread({},props),{},{'aria-label':(_props$accessibilityL=props.accessibilityLabel)!==null&&_props$accessibilityL!==void 0?_props$accessibilityL:'Slider'});if(typeof props.value==='number'){newProps.value=[props.value];}if(typeof props.defaultValue==='number'){newProps.defaultValue=[props.defaultValue];}props=newProps;var _useLayout=useLayout(),onLayout=_useLayout.onLayout,trackLayout=_useLayout.layout;var updatedProps=Object.assign({},props);if(isReadOnly||isDisabled){updatedProps.isDisabled=true;}var state=useSliderState(_objectSpread(_objectSpread({},updatedProps),{},{numberFormatter:{format:function format(e){return e;}},minValue:props.minValue,maxValue:props.maxValue,onChange:function onChange(val){props.onChange&&props.onChange(val[0]);},onChangeEnd:function onChangeEnd(val){props.onChangeEnd&&props.onChangeEnd(val[0]);}}));var resolvedProps=usePropsResolution('Slider',props,{isDisabled:isDisabled,isReadOnly:isReadOnly});var _useSlider=useSlider(props,state,trackLayout),trackProps=_useSlider.trackProps;var contextValue=React.useMemo(function(){return{trackLayout:trackLayout,state:state,orientation:props.orientation,isDisabled:isDisabled,isReversed:props.isReversed,colorScheme:props.colorScheme,trackProps:trackProps,isReadOnly:isReadOnly,onTrackLayout:onLayout,thumbSize:resolvedProps.thumbSize,sliderSize:resolvedProps.sliderTrackHeight,_interactionBox:resolvedProps._interactionBox};},[trackLayout,state,props.orientation,isDisabled,props.isReversed,props.colorScheme,isReadOnly,onLayout,resolvedProps.thumbSize,resolvedProps.sliderTrackHeight]);if(useHasResponsiveProps(props)){return null;}return React.createElement(SliderContext.Provider,{value:contextValue},React.createElement(Box,_extends({},resolvedProps,{ref:ref}),React.Children.map(props.children,function(child,index){if(child.displayName==='SliderThumb'){return React.cloneElement(child,{index:index});}return child;})));}export default forwardRef(Slider);","map":{"version":3,"mappings":"8tCAAA,MAAOA,MAAP,EAAgBC,UAAhB,KAAkC,OAAlC,CACA,OAASC,cAAT,KAA+B,uBAA/B,CACA,OAASC,SAAT,sBACA,OAASC,kBAAT,sBAEA,MAAOC,IAAP,cACA,OAASC,aAAT,iBACA,OAASC,SAAT,KAA0B,2BAA1B,CACA,OAASC,qBAAT,4CAEA,QAASC,OAAT,MAAoEC,GAApE,CAA+E,IAA7DC,WAA6D,MAA7DA,UAA6D,CAAjDC,UAAiD,MAAjDA,UAAiD,CAAlCC,KAAkC,oEAC7E,GAAMC,SAAQ,gCACTD,KADS,MAEZ,oCAAcA,KAAK,CAACE,kBAApB,+DAA0C,QAF9B,EAAd,CAKA,GAAI,MAAOF,MAAK,CAACG,KAAb,GAAuB,QAA3B,CAAqC,CAEnCF,QAAQ,CAACE,KAATF,CAAiB,CAACD,KAAK,CAACG,KAAP,CAAjBF,CACD,CAED,GAAI,MAAOD,MAAK,CAACI,YAAb,GAA8B,QAAlC,CAA4C,CAE1CH,QAAQ,CAACG,YAATH,CAAwB,CAACD,KAAK,CAACI,YAAP,CAAxBH,CACD,CAEDD,KAAK,CAAGC,QAARD,CAEA,eAA0CV,SAAS,EAAnD,CAAQe,QAAR,YAAQA,QAAR,CAA0BC,WAA1B,YAAkBC,MAAlB,CACA,GAAMC,aAA0B,CAAGC,MAAM,CAACC,MAAPD,CAAc,EAAdA,CAAkBT,KAAlBS,CAAnC,CAEA,GAAIV,UAAU,EAAID,UAAlB,CAA8B,CAC5BU,YAAY,CAACV,UAAbU,CAA0B,IAA1BA,CACD,CAED,GAAMG,MAAK,CAAGtB,cAAc,gCACvBmB,YADuB,MAG1BI,eAAe,CAAE,CAAEC,MAAM,CAAGC,iBAAD,QAAOA,EAAP,EAAV,CAHS,CAI1BC,QAAQ,CAAEf,KAAK,CAACe,QAJU,CAK1BC,QAAQ,CAAEhB,KAAK,CAACgB,QALU,CAM1BC,QAAQ,CAAGC,qBAAD,CAAc,CACtBlB,KAAK,CAACiB,QAANjB,EAAkBA,KAAK,CAACiB,QAANjB,CAAekB,GAAG,CAAC,CAAD,CAAlBlB,CAAlBA,CAPyB,CAAD,CAS1BmB,WAAW,CAAGD,wBAAD,CAAc,CACzBlB,KAAK,CAACmB,WAANnB,EAAqBA,KAAK,CAACmB,WAANnB,CAAkBkB,GAAG,CAAC,CAAD,CAArBlB,CAArBA,CACD,CAXyB,GAA5B,CAcA,GAAMoB,cAAa,CAAG7B,kBAAkB,CAAC,QAAD,CAAWS,KAAX,CAAkB,CACxDF,UADwD,CACxDA,UADwD,CAExDC,qBAFwD,CAAlB,CAAxC,CAKA,eAAuBL,SAAS,CAC7BM,KAD6B,CAE9BW,KAF8B,CAG9BL,WAH8B,CAAhC,CAAQe,UAAR,YAAQA,UAAR,CAMA,GAAMC,aAAY,CAAGnC,KAAK,CAACoC,OAANpC,CAAc,UAAM,CACvC,MAAO,CACLmB,WADK,CACLA,WADK,CAELK,KAFK,CAELA,KAFK,CAGLa,WAAW,CAAExB,KAAK,CAACwB,WAHd,CAIL1B,UAAU,CAAEA,UAJP,CAKL2B,UAAU,CAAEzB,KAAK,CAACyB,UALb,CAMLC,WAAW,CAAE1B,KAAK,CAAC0B,WANd,CAOLL,UAPK,CAOLA,UAPK,CAQLtB,UAAU,CAAEA,UARP,CASL4B,aAAa,CAAEtB,QATV,CAULuB,SAAS,CAAER,aAAa,CAACQ,SAVpB,CAWLC,UAAU,CAAET,aAAa,CAACU,iBAXrB,CAYLC,eAAe,CAAEX,aAAa,CAACW,eAZ1B,CAAP,CADmB,EAgBlB,CACDzB,WADC,CAEDK,KAFC,CAGDX,KAAK,CAACwB,WAHL,CAID1B,UAJC,CAKDE,KAAK,CAACyB,UALL,CAMDzB,KAAK,CAAC0B,WANL,CAOD3B,UAPC,CAQDM,QARC,CASDe,aAAa,CAACQ,SATb,CAUDR,aAAa,CAACU,iBAVb,CAhBkB3C,CAArB,CA8BA,GAAIQ,qBAAqB,CAACK,KAAD,CAAzB,CAAkC,CAChC,MAAO,KAAP,CACD,CAED,MACEb,qBAACM,aAAD,CAAeuC,QAAf,EAAwB7B,KAAK,CAAEmB,YAA/B,EACEnC,oBAACK,GAAD,aAAS4B,aAAT,EAAwBvB,GAAG,CAAEA,GAA7B,GACGV,KAAK,CAAC8C,QAAN9C,CAAe+C,GAAf/C,CAAmBa,KAAK,CAACmC,QAAzBhD,CAAmC,SAACiD,KAAD,CAAQC,KAAR,CAAkB,CACpD,GAAID,KAAK,CAACE,WAANF,GAAsB,aAA1B,CAAyC,CACvC,MAAOjD,MAAK,CAACoD,YAANpD,CAAmBiD,KAAnBjD,CAAgD,CACrDkD,WADqD,CAAhDlD,CAAP,CAGD,CAED,MAAOiD,MAAP,CAPD,EADH,CADF,CADF,CAeD,CAED,cAAehD,WAAU,CAACQ,MAAD,CAAzB","names":["React","forwardRef","useSliderState","useLayout","usePropsResolution","Box","SliderContext","useSlider","useHasResponsiveProps","Slider","ref","isDisabled","isReadOnly","props","newProps","accessibilityLabel","value","defaultValue","onLayout","trackLayout","layout","updatedProps","Object","assign","state","numberFormatter","format","e","minValue","maxValue","onChange","val","onChangeEnd","resolvedProps","trackProps","contextValue","useMemo","orientation","isReversed","colorScheme","onTrackLayout","thumbSize","sliderSize","sliderTrackHeight","_interactionBox","Provider","Children","map","children","child","index","displayName","cloneElement"],"sources":["Slider.tsx"],"sourcesContent":["import React, { forwardRef } from 'react';\nimport { useSliderState } from '@react-stately/slider';\nimport { useLayout } from '../../../hooks';\nimport { usePropsResolution } from '../../../hooks';\nimport type { ISliderProps } from './types';\nimport Box from '../Box';\nimport { SliderContext } from './Context';\nimport { useSlider } from '@react-native-aria/slider';\nimport { useHasResponsiveProps } from '../../../hooks/useHasResponsiveProps';\n\nfunction Slider({ isDisabled, isReadOnly, ...props }: ISliderProps, ref?: any) {\n  const newProps = {\n    ...props,\n    'aria-label': props.accessibilityLabel ?? 'Slider',\n  };\n\n  if (typeof props.value === 'number') {\n    //@ts-ignore - React Native Aria slider accepts array of values\n    newProps.value = [props.value];\n  }\n\n  if (typeof props.defaultValue === 'number') {\n    //@ts-ignore - React Native Aria slider accepts array of values\n    newProps.defaultValue = [props.defaultValue];\n  }\n\n  props = newProps;\n\n  const { onLayout, layout: trackLayout } = useLayout();\n  const updatedProps: ISliderProps = Object.assign({}, props);\n\n  if (isReadOnly || isDisabled) {\n    updatedProps.isDisabled = true;\n  }\n\n  const state = useSliderState({\n    ...updatedProps,\n    //@ts-ignore\n    numberFormatter: { format: (e) => e },\n    minValue: props.minValue,\n    maxValue: props.maxValue,\n    onChange: (val: any) => {\n      props.onChange && props.onChange(val[0]);\n    },\n    onChangeEnd: (val: any) => {\n      props.onChangeEnd && props.onChangeEnd(val[0]);\n    },\n  });\n\n  const resolvedProps = usePropsResolution('Slider', props, {\n    isDisabled,\n    isReadOnly,\n  });\n\n  const { trackProps } = useSlider(\n    (props as unknown) as any,\n    state,\n    trackLayout\n  );\n\n  const contextValue = React.useMemo(() => {\n    return {\n      trackLayout,\n      state,\n      orientation: props.orientation,\n      isDisabled: isDisabled,\n      isReversed: props.isReversed,\n      colorScheme: props.colorScheme,\n      trackProps,\n      isReadOnly: isReadOnly,\n      onTrackLayout: onLayout,\n      thumbSize: resolvedProps.thumbSize,\n      sliderSize: resolvedProps.sliderTrackHeight,\n      _interactionBox: resolvedProps._interactionBox,\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [\n    trackLayout,\n    state,\n    props.orientation,\n    isDisabled,\n    props.isReversed,\n    props.colorScheme,\n    isReadOnly,\n    onLayout,\n    resolvedProps.thumbSize,\n    resolvedProps.sliderTrackHeight,\n  ]);\n\n  //TODO: refactor for responsive prop\n  if (useHasResponsiveProps(props)) {\n    return null;\n  }\n\n  return (\n    <SliderContext.Provider value={contextValue}>\n      <Box {...resolvedProps} ref={ref}>\n        {React.Children.map(props.children, (child, index) => {\n          if (child.displayName === 'SliderThumb') {\n            return React.cloneElement(child as React.ReactElement, {\n              index,\n            });\n          }\n\n          return child;\n        })}\n      </Box>\n    </SliderContext.Provider>\n  );\n}\n\nexport default forwardRef(Slider);\n"]},"metadata":{},"sourceType":"module"}