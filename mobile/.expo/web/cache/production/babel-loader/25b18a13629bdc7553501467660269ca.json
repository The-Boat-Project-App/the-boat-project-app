{"ast":null,"code":"\"use strict\";var _objectWithoutProperties=require(\"@babel/runtime/helpers/objectWithoutProperties\");var _excluded=[\"remoteErrorView\",\"remoteLoadingView\",\"renderersProps\",\"children\",\"renderers\"];Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=RenderHTMLConfigProvider;exports.renderHTMLConfigPropTypes=void 0;var _react=_interopRequireWildcard(require(\"react\"));var _propTypes=_interopRequireDefault(require(\"prop-types\"));var _RenderersPropsProvider=_interopRequireDefault(require(\"./context/RenderersPropsProvider\"));var _SharedPropsProvider=_interopRequireDefault(require(\"./context/SharedPropsProvider\"));var _TChildrenRendererContext=_interopRequireDefault(require(\"./context/TChildrenRendererContext\"));var _TNodeChildrenRenderer=_interopRequireDefault(require(\"./TNodeChildrenRenderer\"));var _TChildrenRenderer=_interopRequireDefault(require(\"./TChildrenRenderer\"));var _sourceLoaderContext=_interopRequireWildcard(require(\"./context/sourceLoaderContext\"));var _RenderRegistryProvider=_interopRequireDefault(require(\"./context/RenderRegistryProvider\"));var _TRenderEngineProvider=require(\"./TRenderEngineProvider\");var _useProfiler=_interopRequireDefault(require(\"./hooks/useProfiler\"));var _ListStyleSpecsProvider=_interopRequireDefault(require(\"./context/ListStyleSpecsProvider\"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!==\"function\")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||typeof obj!==\"object\"&&typeof obj!==\"function\"){return{default:obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!==\"default\"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}var childrenRendererContext={TChildrenRenderer:_TChildrenRenderer.default,TNodeChildrenRenderer:_TNodeChildrenRenderer.default};var renderHTMLConfigPropTypes={bypassAnonymousTPhrasingNodes:_propTypes.default.bool,defaultTextProps:_propTypes.default.object,defaultViewProps:_propTypes.default.object,enableExperimentalBRCollapsing:_propTypes.default.bool,enableExperimentalGhostLinesPrevention:_propTypes.default.bool,enableExperimentalMarginCollapsing:_propTypes.default.bool,remoteErrorView:_propTypes.default.func,remoteLoadingView:_propTypes.default.func,debug:_propTypes.default.bool,computeEmbeddedMaxWidth:_propTypes.default.func,renderersProps:_propTypes.default.object,WebView:_propTypes.default.any,GenericPressable:_propTypes.default.any,defaultWebViewProps:_propTypes.default.object,pressableHightlightColor:_propTypes.default.string,customListStyleSpecs:_propTypes.default.object,renderers:_propTypes.default.object,provideEmbeddedHeaders:_propTypes.default.func};exports.renderHTMLConfigPropTypes=renderHTMLConfigPropTypes;function RenderHTMLConfigProvider(props){var remoteErrorView=props.remoteErrorView,remoteLoadingView=props.remoteLoadingView,renderersProps=props.renderersProps,children=props.children,renderers=props.renderers,sharedProps=_objectWithoutProperties(props,_excluded);var engine=(0,_TRenderEngineProvider.useAmbientTRenderEngine)();var profile=(0,_useProfiler.default)({prop:'remoteErrorView or remoteLoadingView'});var sourceLoaderConfig=(0,_react.useMemo)(function(){typeof __DEV__==='boolean'&&__DEV__&&profile();return{remoteErrorView:remoteErrorView||_sourceLoaderContext.defaultRenderError,remoteLoadingView:remoteLoadingView||_sourceLoaderContext.defaultRenderLoading};},[remoteErrorView,remoteLoadingView,profile]);return _react.default.createElement(_RenderRegistryProvider.default,{renderers:renderers,elementModels:engine.getHTMLElementsModels()},_react.default.createElement(_SharedPropsProvider.default,sharedProps,_react.default.createElement(_ListStyleSpecsProvider.default,null,_react.default.createElement(_RenderersPropsProvider.default,{renderersProps:renderersProps},_react.default.createElement(_TChildrenRendererContext.default.Provider,{value:childrenRendererContext},_react.default.createElement(_sourceLoaderContext.default.Provider,{value:sourceLoaderConfig},children))))));}RenderHTMLConfigProvider.propTypes=renderHTMLConfigPropTypes;","map":{"version":3,"mappings":"6UAAA,qDACA,6DACA,gGACA,0FACA,oGAEA,sFACA,8EACA,2FAIA,gGACA,8DACA,wEACA,6qCAEA,GAAMA,wBAAuB,CAAG,CAC9BC,iBAAiB,CAAjBA,0BAD8B,CAE9BC,qBAAqB,CAArBA,8BAF8B,CAAhC,CAOO,GAAMC,0BAAoD,CAAG,CAClEC,6BAA6B,CAAEC,mBAAUC,IADyB,CAElEC,gBAAgB,CAAEF,mBAAUG,MAFsC,CAGlEC,gBAAgB,CAAEJ,mBAAUG,MAHsC,CAIlEE,8BAA8B,CAAEL,mBAAUC,IAJwB,CAKlEK,sCAAsC,CAAEN,mBAAUC,IALgB,CAMlEM,kCAAkC,CAAEP,mBAAUC,IANoB,CAOlEO,eAAe,CAAER,mBAAUS,IAPuC,CAQlEC,iBAAiB,CAAEV,mBAAUS,IARqC,CASlEE,KAAK,CAAEX,mBAAUC,IATiD,CAUlEW,uBAAuB,CAAEZ,mBAAUS,IAV+B,CAWlEI,cAAc,CAAEb,mBAAUG,MAXwC,CAYlEW,OAAO,CAAEd,mBAAUe,GAZ+C,CAalEC,gBAAgB,CAAEhB,mBAAUe,GAbsC,CAclEE,mBAAmB,CAAEjB,mBAAUG,MAdmC,CAelEe,wBAAwB,CAAElB,mBAAUmB,MAf8B,CAgBlEC,oBAAoB,CAAEpB,mBAAUG,MAhBkC,CAiBlEkB,SAAS,CAAErB,mBAAUG,MAjB6C,CAkBlEmB,sBAAsB,CAAEtB,mBAAUS,IAlBgC,CAA7D,6DAyBQ,QAASc,yBAAT,CACbC,KADa,CAEC,CACd,GACEhB,gBADF,CAOIgB,KAPJ,CACEhB,eADF,CAEEE,iBAFF,CAOIc,KAPJ,CAEEd,iBAFF,CAGEG,cAHF,CAOIW,KAPJ,CAGEX,cAHF,CAIEY,QAJF,CAOID,KAPJ,CAIEC,QAJF,CAKEJ,SALF,CAOIG,KAPJ,CAKEH,SALF,CAMKK,WANL,0BAOIF,KAPJ,YAQA,GAAMG,OAAM,CAAG,oDAAf,CACA,GAAMC,QAAO,CAAG,yBAAY,CAAEC,IAAI,CAAE,sCAAR,CAAZ,CAAhB,CACA,GAAMC,mBAAkB,CAAG,mBAAQ,UAAM,CACvC,MAAOC,QAAP,GAAmB,SAAnB,EAAgCA,OAAhC,EAA2CH,OAAO,EAAlD,CACA,MAAO,CACLpB,eAAe,CAAEA,eAAe,EAAIwB,uCAD/B,CAELtB,iBAAiB,CAAEA,iBAAiB,EAAIuB,yCAFnC,CAAP,CAFyB,EAMxB,CAACzB,eAAD,CAAkBE,iBAAlB,CAAqCkB,OAArC,CANwB,CAA3B,CAOA,MACEM,8BAACC,+BAAD,EACEd,SAAS,CAAEA,SADb,CAEEe,aAAa,CAAET,MAAM,CAACU,qBAAPV,EAFjB,EAGEO,6BAACI,4BAAD,CAAyBZ,WAAzB,CACEQ,6BAACK,+BAAD,MACEL,6BAACM,+BAAD,EAAwB3B,cAAc,CAAEA,cAAxC,EACEqB,6BAACO,kCAA0BC,QAA3B,EAAoCC,KAAK,CAAEhD,uBAA3C,EACEuC,6BAACU,6BAAoBF,QAArB,EAA8BC,KAAK,CAAEb,kBAArC,EACGL,QADH,CADF,CADF,CADF,CADF,CAHF,CADF,CAiBD,CAKDF,wBAAwB,CAACsB,SAAzBtB,CAAqCzB,yBAArCyB","names":["childrenRendererContext","TChildrenRenderer","TNodeChildrenRenderer","renderHTMLConfigPropTypes","bypassAnonymousTPhrasingNodes","PropTypes","bool","defaultTextProps","object","defaultViewProps","enableExperimentalBRCollapsing","enableExperimentalGhostLinesPrevention","enableExperimentalMarginCollapsing","remoteErrorView","func","remoteLoadingView","debug","computeEmbeddedMaxWidth","renderersProps","WebView","any","GenericPressable","defaultWebViewProps","pressableHightlightColor","string","customListStyleSpecs","renderers","provideEmbeddedHeaders","RenderHTMLConfigProvider","props","children","sharedProps","engine","profile","prop","sourceLoaderConfig","__DEV__","defaultRenderError","defaultRenderLoading","_react","_RenderRegistryProvider","elementModels","getHTMLElementsModels","_SharedPropsProvider","_ListStyleSpecsProvider","_RenderersPropsProvider","_TChildrenRendererContext","Provider","value","_sourceLoaderContext","propTypes"],"sources":["RenderHTMLConfigProvider.tsx"],"sourcesContent":["import React, { PropsWithChildren, ReactElement, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport RenderersPropsProvider from './context/RenderersPropsProvider';\nimport SharedPropsProvider from './context/SharedPropsProvider';\nimport TChildrenRenderersContext from './context/TChildrenRendererContext';\nimport { RenderHTMLConfig } from './shared-types';\nimport TNodeChildrenRenderer from './TNodeChildrenRenderer';\nimport TChildrenRenderer from './TChildrenRenderer';\nimport sourceLoaderContext, {\n  defaultRenderError,\n  defaultRenderLoading\n} from './context/sourceLoaderContext';\nimport RenderRegistryProvider from './context/RenderRegistryProvider';\nimport { useAmbientTRenderEngine } from './TRenderEngineProvider';\nimport useProfiler from './hooks/useProfiler';\nimport ListStyleSpecsProvider from './context/ListStyleSpecsProvider';\n\nconst childrenRendererContext = {\n  TChildrenRenderer,\n  TNodeChildrenRenderer\n};\n\nexport type RenderHTMLConfigPropTypes = Record<keyof RenderHTMLConfig, any>;\n\nexport const renderHTMLConfigPropTypes: RenderHTMLConfigPropTypes = {\n  bypassAnonymousTPhrasingNodes: PropTypes.bool,\n  defaultTextProps: PropTypes.object,\n  defaultViewProps: PropTypes.object,\n  enableExperimentalBRCollapsing: PropTypes.bool,\n  enableExperimentalGhostLinesPrevention: PropTypes.bool,\n  enableExperimentalMarginCollapsing: PropTypes.bool,\n  remoteErrorView: PropTypes.func,\n  remoteLoadingView: PropTypes.func,\n  debug: PropTypes.bool,\n  computeEmbeddedMaxWidth: PropTypes.func,\n  renderersProps: PropTypes.object,\n  WebView: PropTypes.any,\n  GenericPressable: PropTypes.any,\n  defaultWebViewProps: PropTypes.object,\n  pressableHightlightColor: PropTypes.string,\n  customListStyleSpecs: PropTypes.object,\n  renderers: PropTypes.object,\n  provideEmbeddedHeaders: PropTypes.func\n};\n\n/**\n * A component to provide configuration for {@link RenderHTMLSource}\n * descendants, to be used in conjunction with {@link TRenderEngineProvider}.\n */\nexport default function RenderHTMLConfigProvider(\n  props: PropsWithChildren<RenderHTMLConfig>\n): ReactElement {\n  const {\n    remoteErrorView,\n    remoteLoadingView,\n    renderersProps,\n    children,\n    renderers,\n    ...sharedProps\n  } = props;\n  const engine = useAmbientTRenderEngine();\n  const profile = useProfiler({ prop: 'remoteErrorView or remoteLoadingView' });\n  const sourceLoaderConfig = useMemo(() => {\n    typeof __DEV__ === 'boolean' && __DEV__ && profile();\n    return {\n      remoteErrorView: remoteErrorView || defaultRenderError,\n      remoteLoadingView: remoteLoadingView || defaultRenderLoading\n    };\n  }, [remoteErrorView, remoteLoadingView, profile]);\n  return (\n    <RenderRegistryProvider\n      renderers={renderers}\n      elementModels={engine.getHTMLElementsModels()}>\n      <SharedPropsProvider {...sharedProps}>\n        <ListStyleSpecsProvider>\n          <RenderersPropsProvider renderersProps={renderersProps}>\n            <TChildrenRenderersContext.Provider value={childrenRendererContext}>\n              <sourceLoaderContext.Provider value={sourceLoaderConfig}>\n                {children}\n              </sourceLoaderContext.Provider>\n            </TChildrenRenderersContext.Provider>\n          </RenderersPropsProvider>\n        </ListStyleSpecsProvider>\n      </SharedPropsProvider>\n    </RenderRegistryProvider>\n  );\n}\n\n/**\n * @ignore\n */\nRenderHTMLConfigProvider.propTypes = renderHTMLConfigPropTypes;\n"]},"metadata":{},"sourceType":"script"}