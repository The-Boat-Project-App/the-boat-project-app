{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import Dimensions from\"react-native-web/dist/exports/Dimensions\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import React from'react';export var getResponsiveStylesImpl=function getResponsiveStylesImpl(width){return function(queries){if(typeof width==='number'){var styles=queries.initial?[StyleSheet.create({initial:StyleSheet.flatten(queries.initial)}).initial]:[];if(queries.query){queries.query.forEach(function(queryRule){if(queryRule.style){var flattenQueryStyle=StyleSheet.flatten(queryRule.style);if(typeof queryRule.maxWidth==='number'&&typeof queryRule.minWidth==='number'){if(width>=queryRule.minWidth&&width<=queryRule.maxWidth){styles.push(StyleSheet.create({rangeStyle:flattenQueryStyle}).rangeStyle);}}else if(typeof queryRule.minWidth==='number'){if(width>=queryRule.minWidth){styles.push(StyleSheet.create({minWidthStyle:flattenQueryStyle}).minWidthStyle);}}else if(typeof queryRule.maxWidth==='number'){if(width<=queryRule.maxWidth){styles.push(StyleSheet.create({maxWidthStyle:flattenQueryStyle}).maxWidthStyle);}}}});return{styles:styles};}}return{};};};export var useDimensionsWithEnable=function useDimensionsWithEnable(_ref){var enable=_ref.enable;var _React$useState=React.useState(function(){return Dimensions.get('window');}),_React$useState2=_slicedToArray(_React$useState,2),dimensions=_React$useState2[0],setDimensions=_React$useState2[1];React.useEffect(function(){if(enable){function handleChange(_ref2){var window=_ref2.window;if(dimensions.width!==window.width||dimensions.height!==window.height||dimensions.scale!==window.scale||dimensions.fontScale!==window.fontScale){setDimensions(window);}}Dimensions.addEventListener('change',handleChange);handleChange({window:Dimensions.get('window')});return function(){Dimensions.removeEventListener('change',handleChange);};}return function(){};},[dimensions,enable]);return dimensions;};","map":{"version":3,"mappings":"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","names":["React","getResponsiveStylesImpl","width","queries","styles","initial","StyleSheet","create","flatten","query","forEach","queryRule","style","flattenQueryStyle","maxWidth","minWidth","push","rangeStyle","minWidthStyle","maxWidthStyle","useDimensionsWithEnable","enable","useState","Dimensions","get","dimensions","setDimensions","useEffect","handleChange","window","height","scale","fontScale","addEventListener","removeEventListener"],"sources":["common.ts"],"sourcesContent":["import type {\n  GetResponsiveStylesParams,\n  GetResponsiveStylesReturnType,\n} from './types';\nimport { Dimensions, ScaledSize, StyleSheet } from 'react-native';\nimport React from 'react';\n\nexport const getResponsiveStylesImpl = (width: number) => (\n  queries: GetResponsiveStylesParams\n): GetResponsiveStylesReturnType => {\n  if (typeof width === 'number') {\n    let styles = queries.initial\n      ? [\n          StyleSheet.create({ initial: StyleSheet.flatten(queries.initial) })\n            .initial,\n        ]\n      : [];\n\n    if (queries.query) {\n      queries.query.forEach((queryRule) => {\n        if (queryRule.style) {\n          const flattenQueryStyle = StyleSheet.flatten(queryRule.style);\n\n          if (\n            typeof queryRule.maxWidth === 'number' &&\n            typeof queryRule.minWidth === 'number'\n          ) {\n            if (width >= queryRule.minWidth && width <= queryRule.maxWidth) {\n              styles.push(\n                StyleSheet.create({ rangeStyle: flattenQueryStyle }).rangeStyle\n              );\n            }\n          } else if (typeof queryRule.minWidth === 'number') {\n            if (width >= queryRule.minWidth) {\n              styles.push(\n                StyleSheet.create({ minWidthStyle: flattenQueryStyle })\n                  .minWidthStyle\n              );\n            }\n          } else if (typeof queryRule.maxWidth === 'number') {\n            if (width <= queryRule.maxWidth) {\n              styles.push(\n                StyleSheet.create({ maxWidthStyle: flattenQueryStyle })\n                  .maxWidthStyle\n              );\n            }\n          }\n        }\n      });\n      return { styles };\n    }\n  }\n\n  return {};\n};\n\n// The below implementation is taken from React Native's source and added a flag to conditionally attach/remove listeners\nexport const useDimensionsWithEnable = ({ enable }: { enable?: boolean }) => {\n  const [dimensions, setDimensions] = React.useState(() =>\n    Dimensions.get('window')\n  );\n\n  React.useEffect(() => {\n    if (enable) {\n      function handleChange({ window }: { window: ScaledSize }) {\n        if (\n          dimensions.width !== window.width ||\n          dimensions.height !== window.height ||\n          dimensions.scale !== window.scale ||\n          dimensions.fontScale !== window.fontScale\n        ) {\n          setDimensions(window);\n        }\n      }\n      Dimensions.addEventListener('change', handleChange);\n      // We might have missed an update between calling `get` in render and\n      // `addEventListener` in this handler, so we set it here. If there was\n      // no change, React will filter out this update as a no-op.\n      handleChange({ window: Dimensions.get('window') });\n\n      return () => {\n        Dimensions.removeEventListener('change', handleChange);\n      };\n    }\n    return () => {};\n  }, [dimensions, enable]);\n  return dimensions;\n};\n"]},"metadata":{},"sourceType":"module"}