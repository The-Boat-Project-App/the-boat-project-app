{"ast":null,"code":"import createEventHandle from\"../createEventHandle\";import useLayoutEffect from\"../useLayoutEffect\";import useStable from\"../useStable\";export default function useEvent(event,options){var targetListeners=useStable(function(){return new Map();});var addListener=useStable(function(){var addEventListener=createEventHandle(event,options);return function(target,callback){var removeTargetListener=targetListeners.get(target);if(removeTargetListener!=null){removeTargetListener();}if(callback==null){targetListeners.delete(target);}var removeEventListener=addEventListener(target,callback);targetListeners.set(target,removeEventListener);return removeEventListener;};});useLayoutEffect(function(){return function(){targetListeners.forEach(function(removeListener){removeListener();});targetListeners.clear();};},[targetListeners]);return addListener;}","map":{"version":3,"names":["createEventHandle","useLayoutEffect","useStable","useEvent","event","options","targetListeners","Map","addListener","addEventListener","target","callback","removeTargetListener","get","delete","removeEventListener","set","forEach","removeListener","clear"],"sources":["/Users/matthieu/Documents/boatproject/node_modules/react-native-web/dist/modules/useEvent/index.js"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n */\nimport createEventHandle from '../createEventHandle';\nimport useLayoutEffect from '../useLayoutEffect';\nimport useStable from '../useStable';\n\n/**\n * This can be used with any event type include custom events.\n *\n * const click = useEvent('click', options);\n * useEffect(() => {\n *   click.setListener(target, onClick);\n *   return () => click.clear();\n * }).\n */\nexport default function useEvent(event, options) {\n  var targetListeners = useStable(() => new Map());\n  var addListener = useStable(() => {\n    var addEventListener = createEventHandle(event, options);\n    return (target, callback) => {\n      var removeTargetListener = targetListeners.get(target);\n\n      if (removeTargetListener != null) {\n        removeTargetListener();\n      }\n\n      if (callback == null) {\n        targetListeners.delete(target);\n      }\n\n      var removeEventListener = addEventListener(target, callback);\n      targetListeners.set(target, removeEventListener);\n      return removeEventListener;\n    };\n  });\n  useLayoutEffect(() => {\n    return () => {\n      targetListeners.forEach(removeListener => {\n        removeListener();\n      });\n      targetListeners.clear();\n    };\n  }, [targetListeners]);\n  return addListener;\n}"],"mappings":"AAQA,MAAOA,kBAAP,4BACA,MAAOC,gBAAP,0BACA,MAAOC,UAAP,oBAWA,cAAe,SAASC,SAAT,CAAkBC,KAAlB,CAAyBC,OAAzB,CAAkC,CAC/C,GAAIC,gBAAe,CAAGJ,SAAS,CAAC,iBAAM,IAAIK,IAAJ,EAAN,EAAD,CAA/B,CACA,GAAIC,YAAW,CAAGN,SAAS,CAAC,UAAM,CAChC,GAAIO,iBAAgB,CAAGT,iBAAiB,CAACI,KAAD,CAAQC,OAAR,CAAxC,CACA,MAAO,UAACK,MAAD,CAASC,QAAT,CAAsB,CAC3B,GAAIC,qBAAoB,CAAGN,eAAe,CAACO,GAAhB,CAAoBH,MAApB,CAA3B,CAEA,GAAIE,oBAAoB,EAAI,IAA5B,CAAkC,CAChCA,oBAAoB,GACrB,CAED,GAAID,QAAQ,EAAI,IAAhB,CAAsB,CACpBL,eAAe,CAACQ,MAAhB,CAAuBJ,MAAvB,EACD,CAED,GAAIK,oBAAmB,CAAGN,gBAAgB,CAACC,MAAD,CAASC,QAAT,CAA1C,CACAL,eAAe,CAACU,GAAhB,CAAoBN,MAApB,CAA4BK,mBAA5B,EACA,MAAOA,oBAAP,CACD,CAdD,CAeD,CAjB0B,CAA3B,CAkBAd,eAAe,CAAC,UAAM,CACpB,MAAO,WAAM,CACXK,eAAe,CAACW,OAAhB,CAAwB,SAAAC,cAAc,CAAI,CACxCA,cAAc,GACf,CAFD,EAGAZ,eAAe,CAACa,KAAhB,GACD,CALD,CAMD,CAPc,CAOZ,CAACb,eAAD,CAPY,CAAf,CAQA,MAAOE,YAAP,CACD"},"metadata":{},"sourceType":"module"}