{"ast":null,"code":"import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _objectDestructuringEmpty from\"@babel/runtime/helpers/objectDestructuringEmpty\";import{NativeWindStyleSheet as _NativeWindStyleSheet}from\"nativewind\";import{StyledComponent as _StyledComponent}from\"nativewind\";import Text from\"react-native-web/dist/exports/Text\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import View from\"react-native-web/dist/exports/View\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import Image from\"react-native-web/dist/exports/Image\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import{UserIcon,MicrophoneIcon,ListBulletIcon,ChevronRightIcon,BellAlertIcon,MapPinIcon,ArrowRightOnRectangleIcon,CameraIcon}from'react-native-heroicons/solid';import{useNavigation,useIsFocused}from'@react-navigation/native';import{useEffect,useState}from'react';import{deleteAccessToken,getAccessToken}from'accessToken';import SignInScreen from\"../SignInScreen/SignInScreen\";import{useReactiveVar}from'@apollo/client';import{accessTokenVar}from\"../../variables/accessToken\";import{userDataVar}from\"../../variables/userData\";import{SafeAreaView}from'react-native-safe-area-context';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProfileScreen=function ProfileScreen(_ref){_objectDestructuringEmpty(_ref);var isFocused=useIsFocused();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),userToken=_useState2[0],setUserToken=_useState2[1];var navigation=useNavigation();var tokeninstate=useReactiveVar(accessTokenVar);var userDataInApollo=useReactiveVar(userDataVar);console.log('userDataInApollo',userDataInApollo);var emptySecureStore=function(){var _ref2=_asyncToGenerator(function*(){console.log('suppression de l access token et retour à SignInScreen');yield deleteAccessToken();accessTokenVar('');userDataVar({firstName:'',lastName:'',avatar:''});setUserToken(null);});return function emptySecureStore(){return _ref2.apply(this,arguments);};}();useEffect(function(){var isTokenExisting=function(){var _ref3=_asyncToGenerator(function*(){var myVariable=yield getAccessToken();setUserToken(myVariable);});return function isTokenExisting(){return _ref3.apply(this,arguments);};}();isTokenExisting();},[isFocused]);if(!userToken){return _jsx(SignInScreen,{});}else{return _jsxs(_StyledComponent,{className:\"flex-1 items-center text-center \",component:SafeAreaView,children:[_jsxs(_StyledComponent,{className:\"flex-row-reverse\",component:View,children:[_jsx(_StyledComponent,{className:\"w-40 h-40 rounded-full mt-20\",source:{uri:userDataInApollo.avatar},component:Image}),_jsx(_StyledComponent,{className:\"absolute mt-52\",component:TouchableOpacity,children:_jsx(CameraIcon,{size:40,color:'#87BC23'})})]}),_jsx(_StyledComponent,{className:\"text-center font-bold text-xl mt-5 text-gray-600\",component:Text,children:userDataInApollo.firstName+\" \"+userDataInApollo.lastName}),_jsx(_StyledComponent,{className:\"text-center \",selectionColor:\"#0C617D\",component:Text,children:\"Compagnon de la M\\xE9diterran\\xE9e\"}),_jsxs(TouchableOpacity,{children:[_jsx(_StyledComponent,{style:styles.colorBlue,className:\"text-center font-bold text-xl mt-5 \",component:Text,children:\"12\"}),_jsx(Text,{style:styles.colorBlue,children:\"Publications\"})]}),_jsxs(ScrollView,{children:[_jsxs(_StyledComponent,{className:\"flex-row mt-10\",component:View,children:[_jsxs(_StyledComponent,{className:\"items-center space-y-5 rounded-lg shadow-md  p-10 \",component:TouchableOpacity,children:[_jsx(UserIcon,{size:30,color:'#0C617D'}),_jsx(Text,{style:styles.colorBlue,children:\"\\xC9ditez votre profil\"})]}),_jsxs(_StyledComponent,{className:\"items-center space-y-5 rounded-lg shadow-md  p-10\",component:TouchableOpacity,children:[_jsx(MicrophoneIcon,{size:30,color:'#0C617D'}),_jsx(Text,{style:styles.colorBlue,children:\"D\\xEEte bonjour !\"})]})]}),_jsxs(_StyledComponent,{className:\"flex-row items-center space-x-40 shadow-md rounded-lg  p-5\",component:TouchableOpacity,children:[_jsxs(_StyledComponent,{className:\"flex-row items-center\",component:View,children:[_jsx(ListBulletIcon,{size:30,color:'grey'}),_jsx(Text,{children:\" Mes activit\\xE9es\"})]}),_jsx(ChevronRightIcon,{size:20,color:'grey',style:styles.paddingLeft3})]}),_jsxs(_StyledComponent,{className:\"flex-row items-center space-x-40 mt-5 rounded-lg shadow-md  p-5\",component:TouchableOpacity,children:[_jsxs(_StyledComponent,{className:\"flex-row items-center\",component:View,children:[_jsx(BellAlertIcon,{size:30,color:'grey'}),_jsx(Text,{children:\" Notifications\"})]}),_jsx(ChevronRightIcon,{size:20,color:'grey',style:styles.paddingLeft5})]}),_jsxs(_StyledComponent,{className:\"flex-row items-center space-x-40 mt-5 rounded-lg shadow-md  p-5\",component:TouchableOpacity,children:[_jsxs(_StyledComponent,{className:\"flex-row items-center\",component:View,children:[_jsx(MapPinIcon,{size:30,color:'grey'}),_jsx(Text,{children:\" Ma localisation\"})]}),_jsx(ChevronRightIcon,{size:20,color:'grey'})]}),_jsxs(_StyledComponent,{className:\"flex-row items-center space-x-40 mt-5 rounded-lg shadow-md  p-5 mb-5\",onPress:function onPress(){return emptySecureStore();},component:TouchableOpacity,children:[_jsxs(_StyledComponent,{className:\"flex-row items-center\",component:View,children:[_jsx(ArrowRightOnRectangleIcon,{size:30,color:'red'}),_jsx(_StyledComponent,{className:\"text-red-600\",component:Text,children:\" D\\xE9connexion\"})]}),_jsx(ChevronRightIcon,{size:20,color:'grey',style:styles.paddingLeft5})]})]})]});}};var styles=StyleSheet.create({colorBlue:{color:'#0C617D'},paddingLeft5:{paddingLeft:50},paddingLeft3:{paddingLeft:30}});export default ProfileScreen;_NativeWindStyleSheet.create({styles:{\"shadow-md@0\":{\"elevation\":6,\"shadowColor\":\"rgba(0, 0, 0, 0.1)\"},\"shadow-md@1\":{\"shadowOffset\":{\"width\":0,\"height\":6},\"shadowRadius\":10,\"shadowColor\":\"rgba(0, 0, 0, 0.1)\",\"shadowOpacity\":1},\"shadow-md@2\":{\"shadowOffset\":{\"width\":0,\"height\":6},\"shadowRadius\":10,\"shadowColor\":\"rgba(0, 0, 0, 0.1)\",\"shadowOpacity\":1},\"absolute\":{\"position\":\"absolute\"},\"mt-20\":{\"marginTop\":80},\"mt-52\":{\"marginTop\":208},\"mt-5\":{\"marginTop\":20},\"mt-10\":{\"marginTop\":40},\"mb-5\":{\"marginBottom\":20},\"h-40\":{\"height\":160},\"w-40\":{\"width\":160},\"flex-1\":{\"flexGrow\":1,\"flexShrink\":1},\"flex-row\":{\"flexDirection\":\"row\"},\"flex-row-reverse\":{\"flexDirection\":\"row-reverse\"},\"items-center\":{\"alignItems\":\"center\"},\"rounded-full\":{\"borderTopLeftRadius\":9999,\"borderTopRightRadius\":9999,\"borderBottomRightRadius\":9999,\"borderBottomLeftRadius\":9999},\"rounded-lg\":{\"borderTopLeftRadius\":8,\"borderTopRightRadius\":8,\"borderBottomRightRadius\":8,\"borderBottomLeftRadius\":8},\"p-10\":{\"paddingTop\":40,\"paddingRight\":40,\"paddingBottom\":40,\"paddingLeft\":40},\"p-5\":{\"paddingTop\":20,\"paddingRight\":20,\"paddingBottom\":20,\"paddingLeft\":20},\"text-center\":{\"textAlign\":\"center\"},\"font-bold\":{\"fontWeight\":\"700\"},\"space-y-5.children@0\":{\"marginTop\":20},\"space-x-40.children@0\":{\"marginLeft\":160},\"text-xl\":{\"fontSize\":20,\"lineHeight\":28}},atRules:{\"shadow-md\":[[[\"media\",\"android\"]],[[\"media\",\"ios\"]],[[\"media\",\"web\"]]],\"space-y-5.children\":[[[\"selector\",\"(> *:not(:first-child))\"]]],\"space-x-40.children\":[[[\"selector\",\"(> *:not(:first-child))\"]]]},childClasses:{\"space-y-5\":[\"space-y-5.children\"],\"space-x-40\":[\"space-x-40.children\"]}});","map":{"version":3,"names":["UserIcon","MicrophoneIcon","ListBulletIcon","ChevronRightIcon","BellAlertIcon","MapPinIcon","ArrowRightOnRectangleIcon","CameraIcon","useNavigation","useIsFocused","useEffect","useState","deleteAccessToken","getAccessToken","SignInScreen","useReactiveVar","accessTokenVar","userDataVar","SafeAreaView","ProfileScreen","isFocused","userToken","setUserToken","navigation","tokeninstate","userDataInApollo","console","log","emptySecureStore","firstName","lastName","avatar","isTokenExisting","myVariable","uri","styles","colorBlue","paddingLeft3","paddingLeft5","StyleSheet","create","color","paddingLeft"],"sources":["/Users/matthieu/Documents/boatproject/mobile/screens/ProfileScreen/ProfileScreen.tsx"],"sourcesContent":["import { Text, TouchableOpacity, View, ScrollView, Image, StyleSheet } from 'react-native'\nimport {\n  UserIcon,\n  MicrophoneIcon,\n  ListBulletIcon,\n  ChevronRightIcon,\n  BellAlertIcon,\n  MapPinIcon,\n  ArrowRightOnRectangleIcon,\n  CameraIcon,\n} from 'react-native-heroicons/solid'\n\nimport { useNavigation, useIsFocused } from '@react-navigation/native'\nimport { useEffect, useState } from 'react'\nimport { deleteAccessToken, getAccessToken } from 'accessToken'\nimport SignInScreen from '@screens/SignInScreen/SignInScreen'\nimport { useReactiveVar, gql, useQuery } from '@apollo/client'\nimport { accessTokenVar } from '../../variables/accessToken'\nimport { useGetUserDataQuery } from '../../graphql/graphql'\nimport { userDataVar } from '../../variables/userData'\nimport { SafeAreaView } from 'react-native-safe-area-context'\n\ninterface ProfileScreenProps {}\n\nconst ProfileScreen: React.FunctionComponent<ProfileScreenProps> = ({}) => {\n  const isFocused = useIsFocused()\n  const [userToken, setUserToken] = useState<string | null>(null)\n  const navigation = useNavigation()\n  const tokeninstate = useReactiveVar(accessTokenVar)\n  const userDataInApollo = useReactiveVar(userDataVar)\n  console.log('userDataInApollo', userDataInApollo)\n\n  const emptySecureStore = async () => {\n    console.log('suppression de l access token et retour à SignInScreen')\n    await deleteAccessToken()\n    accessTokenVar('')\n    userDataVar({ firstName: '', lastName: '', avatar: '' })\n    setUserToken(null)\n  }\n\n  useEffect(() => {\n    const isTokenExisting = async () => {\n      const myVariable = await getAccessToken()\n\n      setUserToken(myVariable)\n    }\n    isTokenExisting()\n    // setIsLoggedIn(checkedToken)\n  }, [isFocused])\n\n  if (!userToken) {\n    return <SignInScreen />\n  } else {\n    return (\n      <SafeAreaView className='flex-1 items-center text-center '>\n        <View className='flex-row-reverse'>\n          <Image\n            className='w-40 h-40 rounded-full mt-20'\n            source={{\n              uri: userDataInApollo.avatar,\n            }}\n          />\n          <TouchableOpacity className='absolute mt-52'>\n            <CameraIcon size={40} color={'#87BC23'} />\n          </TouchableOpacity>\n        </View>\n        <Text className='text-center font-bold text-xl mt-5 text-gray-600'>\n          {`${userDataInApollo.firstName} ${userDataInApollo.lastName}`}\n        </Text>\n        <Text className='text-center ' selectionColor='#0C617D'>\n          Compagnon de la Méditerranée\n        </Text>\n        <TouchableOpacity>\n          <Text style={styles.colorBlue} className='text-center font-bold text-xl mt-5 '>\n            12\n          </Text>\n          <Text style={styles.colorBlue}>Publications</Text>\n        </TouchableOpacity>\n        <ScrollView>\n          <View className='flex-row mt-10'>\n            <TouchableOpacity className='items-center space-y-5 rounded-lg shadow-md  p-10 '>\n              <UserIcon size={30} color={'#0C617D'} />\n              <Text style={styles.colorBlue}>Éditez votre profil</Text>\n            </TouchableOpacity>\n            <TouchableOpacity className='items-center space-y-5 rounded-lg shadow-md  p-10'>\n              <MicrophoneIcon size={30} color={'#0C617D'} />\n              <Text style={styles.colorBlue}>Dîte bonjour !</Text>\n            </TouchableOpacity>\n          </View>\n\n          <TouchableOpacity className='flex-row items-center space-x-40 shadow-md rounded-lg  p-5'>\n            <View className='flex-row items-center'>\n              <ListBulletIcon size={30} color={'grey'} />\n              <Text> Mes activitées</Text>\n            </View>\n            <ChevronRightIcon size={20} color={'grey'} style={styles.paddingLeft3} />\n          </TouchableOpacity>\n\n          <TouchableOpacity className='flex-row items-center space-x-40 mt-5 rounded-lg shadow-md  p-5'>\n            <View className='flex-row items-center'>\n              <BellAlertIcon size={30} color={'grey'} />\n              <Text> Notifications</Text>\n            </View>\n            <ChevronRightIcon size={20} color={'grey'} style={styles.paddingLeft5} />\n          </TouchableOpacity>\n\n          <TouchableOpacity className='flex-row items-center space-x-40 mt-5 rounded-lg shadow-md  p-5'>\n            <View className='flex-row items-center'>\n              <MapPinIcon size={30} color={'grey'} />\n              <Text> Ma localisation</Text>\n            </View>\n            <ChevronRightIcon size={20} color={'grey'} />\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            className='flex-row items-center space-x-40 mt-5 rounded-lg shadow-md  p-5 mb-5'\n            onPress={() => emptySecureStore()}\n          >\n            <View className='flex-row items-center'>\n              <ArrowRightOnRectangleIcon size={30} color={'red'} />\n              <Text className='text-red-600'> Déconnexion</Text>\n            </View>\n            <ChevronRightIcon size={20} color={'grey'} style={styles.paddingLeft5} />\n          </TouchableOpacity>\n        </ScrollView>\n      </SafeAreaView>\n    )\n  }\n}\nconst styles = StyleSheet.create({\n  colorBlue: { color: '#0C617D' },\n  paddingLeft5: { paddingLeft: 50 },\n  paddingLeft3: { paddingLeft: 30 },\n})\n\nexport default ProfileScreen\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}