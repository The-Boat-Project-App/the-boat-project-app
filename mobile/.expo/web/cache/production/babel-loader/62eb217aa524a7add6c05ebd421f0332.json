{"ast":null,"code":"import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";var _excluded=[\"onFocus\",\"onBlur\",\"_stack\",\"_interactionBox\"];function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}import React,{forwardRef}from'react';import Platform from\"react-native-web/dist/exports/Platform\";import{useSliderThumb}from'@react-native-aria/slider';import{VisuallyHidden}from'@react-aria/visually-hidden';import{useToken}from\"../../../hooks\";import{usePropsResolution}from\"../../../hooks/useThemeProps\";import Box from\"../Box\";import{SliderContext}from\"./Context\";import{useHasResponsiveProps}from\"../../../hooks/useHasResponsiveProps\";import{useHover}from'@react-native-aria/interactions';import{mergeRefs}from\"../../../utils\";import{extractInObject,stylingProps}from\"../../../theme/tools/utils\";import{Stack}from\"../Stack\";import{Center}from\"../../composites/Center\";function SliderThumb(props,ref){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isPressed=_React$useState2[0],setIsPressed=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isFocused=_React$useState4[0],setIsFocused=_React$useState4[1];var handleFocus=function handleFocus(focusState,callback){setIsFocused(focusState);callback();};var _ref=React.useRef(null);var _useHover=useHover({},_ref),isHovered=_useHover.isHovered;var _React$useContext=React.useContext(SliderContext),state=_React$useContext.state,trackLayout=_React$useContext.trackLayout,orientation=_React$useContext.orientation,colorScheme=_React$useContext.colorScheme,thumbSize=_React$useContext.thumbSize,isReadOnly=_React$useContext.isReadOnly,isDisabled=_React$useContext.isDisabled,interactionBoxContext=_React$useContext._interactionBox;var _usePropsResolution=usePropsResolution('SliderThumb',_objectSpread({size:thumbSize,_interactionBox:interactionBoxContext,colorScheme:colorScheme},props),{isDisabled:isDisabled,isReadOnly:isReadOnly,isPressed:isPressed,isFocused:isFocused,isHovered:isHovered}),_onFocus=_usePropsResolution.onFocus,_onBlur=_usePropsResolution.onBlur,_stack=_usePropsResolution._stack,_interactionBox=_usePropsResolution._interactionBox,resolvedProps=_objectWithoutProperties(_usePropsResolution,_excluded);var inputRef=React.useRef(null);var _useSliderThumb=useSliderThumb({index:0,trackLayout:trackLayout,inputRef:inputRef,orientation:orientation},state),thumbProps=_useSliderThumb.thumbProps,inputProps=_useSliderThumb.inputProps;React.useEffect(function(){setIsPressed(state.isThumbDragging(0));},[state]);var thumbAbsoluteSize=useToken('sizes',resolvedProps.size);var thumbStyles={bottom:orientation==='vertical'?\"\".concat(state.getThumbPercent(0)*100,\"%\"):undefined,left:orientation!=='vertical'?\"\".concat(state.getThumbPercent(0)*100,\"%\"):undefined,transform:orientation==='vertical'?[{translateY:parseInt(thumbAbsoluteSize)/2}]:[{translateX:-parseInt(thumbAbsoluteSize)/2}]};thumbStyles.transform.push({scale:state.isThumbDragging(0)?resolvedProps.scaleOnPressed:1});var _extractInObject=extractInObject(resolvedProps,[].concat(_toConsumableArray(stylingProps.margin),_toConsumableArray(stylingProps.layout),_toConsumableArray(stylingProps.flexbox),_toConsumableArray(stylingProps.position),_toConsumableArray(stylingProps.outline))),_extractInObject2=_slicedToArray(_extractInObject,2),layoutProps=_extractInObject2[0],nonLayoutProps=_extractInObject2[1];var _extractInObject3=extractInObject(nonLayoutProps,['accessibilityRole','accessibilityState']),_extractInObject4=_slicedToArray(_extractInObject3,2),accessibilityProps=_extractInObject4[0],nonAccessibilityProps=_extractInObject4[1];if(useHasResponsiveProps(props)){return null;}return React.createElement(Box,_extends({position:\"absolute\"},thumbProps,resolvedProps,accessibilityProps,layoutProps,{style:[thumbStyles,resolvedProps.style],onFocus:function onFocus(e){handleFocus(true,_onFocus?function(){return _onFocus(e);}:function(){});},onBlur:function onBlur(e){handleFocus(false,_onBlur?function(){return _onBlur(e);}:function(){});},ref:mergeRefs([_ref,ref])}),React.createElement(Stack,_stack,React.createElement(Box,_interactionBox),React.createElement(Center,nonAccessibilityProps,props.children,Platform.OS==='web'&&React.createElement(VisuallyHidden,null,React.createElement(\"input\",_extends({ref:inputRef},inputProps))))));}SliderThumb.displayName='SliderThumb';export default forwardRef(SliderThumb);","map":{"version":3,"mappings":"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","names":["React","forwardRef","useSliderThumb","VisuallyHidden","useToken","usePropsResolution","Box","SliderContext","useHasResponsiveProps","useHover","mergeRefs","extractInObject","stylingProps","Stack","Center","SliderThumb","props","ref","useState","isPressed","setIsPressed","isFocused","setIsFocused","handleFocus","focusState","callback","_ref","useRef","isHovered","useContext","state","trackLayout","orientation","colorScheme","thumbSize","isReadOnly","isDisabled","interactionBoxContext","_interactionBox","size","onFocus","onBlur","_stack","resolvedProps","inputRef","index","thumbProps","inputProps","useEffect","isThumbDragging","thumbAbsoluteSize","thumbStyles","bottom","getThumbPercent","undefined","left","transform","translateY","parseInt","translateX","push","scale","scaleOnPressed","margin","layout","flexbox","position","outline","layoutProps","nonLayoutProps","accessibilityProps","nonAccessibilityProps","style","e","children","Platform","OS","displayName"],"sources":["SliderThumb.tsx"],"sourcesContent":["import React, { forwardRef } from 'react';\nimport { Platform } from 'react-native';\nimport { useSliderThumb } from '@react-native-aria/slider';\nimport { VisuallyHidden } from '@react-aria/visually-hidden';\nimport { useToken } from '../../../hooks';\nimport { usePropsResolution } from '../../../hooks/useThemeProps';\nimport type { ISliderThumbProps } from './types';\nimport Box from '../Box';\nimport { SliderContext } from './Context';\nimport { useHasResponsiveProps } from '../../../hooks/useHasResponsiveProps';\nimport { useHover } from '@react-native-aria/interactions';\nimport { mergeRefs } from '../../../utils';\nimport { extractInObject, stylingProps } from '../../../theme/tools/utils';\nimport { Stack } from '../Stack';\nimport { Center } from '../../composites/Center';\n\nfunction SliderThumb(props: ISliderThumbProps, ref: any) {\n  const [isPressed, setIsPressed] = React.useState(false);\n\n  const [isFocused, setIsFocused] = React.useState(false);\n  const handleFocus = (focusState: boolean, callback: any) => {\n    setIsFocused(focusState);\n    callback();\n  };\n\n  const _ref = React.useRef(null);\n  const { isHovered } = useHover({}, _ref);\n\n  const {\n    state,\n    trackLayout,\n    orientation,\n    colorScheme,\n    thumbSize,\n    isReadOnly,\n    isDisabled,\n    _interactionBox: interactionBoxContext,\n  } = React.useContext(SliderContext);\n  const {\n    onFocus,\n    onBlur,\n    _stack,\n    _interactionBox,\n    ...resolvedProps\n  } = usePropsResolution(\n    'SliderThumb',\n    {\n      size: thumbSize,\n      _interactionBox: interactionBoxContext,\n      colorScheme,\n      ...props,\n    },\n    {\n      isDisabled,\n      isReadOnly,\n      isPressed,\n      isFocused,\n      isHovered,\n    }\n  );\n\n  const inputRef = React.useRef(null);\n  const { thumbProps, inputProps } = useSliderThumb(\n    {\n      index: 0,\n      trackLayout,\n      inputRef,\n      orientation,\n    },\n    state\n  );\n\n  React.useEffect(() => {\n    setIsPressed(state.isThumbDragging(0));\n  }, [state]);\n\n  const thumbAbsoluteSize = useToken('sizes', resolvedProps.size);\n\n  const thumbStyles: any = {\n    bottom:\n      orientation === 'vertical'\n        ? `${state.getThumbPercent(0) * 100}%`\n        : undefined,\n    left:\n      orientation !== 'vertical'\n        ? `${state.getThumbPercent(0) * 100}%`\n        : undefined,\n    transform:\n      orientation === 'vertical'\n        ? [{ translateY: parseInt(thumbAbsoluteSize) / 2 }]\n        : [{ translateX: -parseInt(thumbAbsoluteSize) / 2 }],\n  };\n\n  thumbStyles.transform.push({\n    scale: state.isThumbDragging(0) ? resolvedProps.scaleOnPressed : 1,\n  });\n\n  const [layoutProps, nonLayoutProps] = extractInObject(resolvedProps, [\n    ...stylingProps.margin,\n    ...stylingProps.layout,\n    ...stylingProps.flexbox,\n    ...stylingProps.position,\n    ...stylingProps.outline,\n  ]);\n\n  const [\n    accessibilityProps,\n    nonAccessibilityProps,\n  ] = extractInObject(nonLayoutProps, [\n    'accessibilityRole',\n    'accessibilityState',\n  ]);\n\n  //TODO: refactor for responsive prop\n  if (useHasResponsiveProps(props)) {\n    return null;\n  }\n\n  return (\n    <Box\n      position=\"absolute\"\n      {...thumbProps}\n      {...resolvedProps}\n      {...accessibilityProps}\n      {...layoutProps}\n      style={[thumbStyles, resolvedProps.style]}\n      onFocus={(e: any) => {\n        handleFocus(true, onFocus ? () => onFocus(e) : () => {});\n      }}\n      onBlur={(e: any) => {\n        handleFocus(false, onBlur ? () => onBlur(e) : () => {});\n      }}\n      // {...(isReadOnly && _readOnly)}\n      // {...(isDisabled && _disabled)}\n      ref={mergeRefs([_ref, ref])}\n    >\n      <Stack {..._stack}>\n        <Box {..._interactionBox} />\n        <Center {...nonAccessibilityProps}>\n          {props.children}\n          {Platform.OS === 'web' && (\n            <VisuallyHidden>\n              <input ref={inputRef} {...inputProps} />\n            </VisuallyHidden>\n          )}\n        </Center>\n      </Stack>\n    </Box>\n  );\n}\n\nSliderThumb.displayName = 'SliderThumb';\n\nexport default forwardRef(SliderThumb);\n"]},"metadata":{},"sourceType":"module"}