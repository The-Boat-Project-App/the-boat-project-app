{"ast":null,"code":"'use strict';var _require=require(\"./log\"),log=_require.log;function reloadApp(_ref,_ref2){var hotReload=_ref.hotReload,hot=_ref.hot,liveReload=_ref.liveReload;var isUnloading=_ref2.isUnloading,currentHash=_ref2.currentHash;if(isUnloading||!hotReload){return;}if(hot){log.info('[WDS] App hot update...');var hotEmitter=require('webpack/hot/emitter');hotEmitter.emit('webpackHotUpdate',currentHash);if(typeof self!=='undefined'&&self.window){self.postMessage(\"webpackHotUpdate\".concat(currentHash),'*');}}else if(liveReload){var rootWindow=self;var intervalId=self.setInterval(function(){if(rootWindow.location.protocol!=='about:'){applyReload(rootWindow,intervalId);}else{rootWindow=rootWindow.parent;if(rootWindow.parent===rootWindow){applyReload(rootWindow,intervalId);}}});}function applyReload(rootWindow,intervalId){clearInterval(intervalId);log.info('[WDS] App updated. Reloading...');rootWindow.location.reload();}}module.exports=reloadApp;","map":{"version":3,"names":["_require","require","log","reloadApp","_ref","_ref2","hotReload","hot","liveReload","isUnloading","currentHash","info","hotEmitter","emit","self","window","postMessage","concat","rootWindow","intervalId","setInterval","location","protocol","applyReload","parent","clearInterval","reload","module","exports"],"sources":["/usr/local/lib/node_modules/expo-cli/node_modules/webpack-dev-server/client/utils/reloadApp.js"],"sourcesContent":["'use strict';\n/* global WorkerGlobalScope self */\n\nvar _require = require('./log'),\n    log = _require.log;\n\nfunction reloadApp(_ref, _ref2) {\n  var hotReload = _ref.hotReload,\n      hot = _ref.hot,\n      liveReload = _ref.liveReload;\n  var isUnloading = _ref2.isUnloading,\n      currentHash = _ref2.currentHash;\n\n  if (isUnloading || !hotReload) {\n    return;\n  }\n\n  if (hot) {\n    log.info('[WDS] App hot update...');\n\n    var hotEmitter = require('webpack/hot/emitter');\n\n    hotEmitter.emit('webpackHotUpdate', currentHash);\n\n    if (typeof self !== 'undefined' && self.window) {\n      // broadcast update to window\n      self.postMessage(\"webpackHotUpdate\".concat(currentHash), '*');\n    }\n  } // allow refreshing the page only if liveReload isn't disabled\n  else if (liveReload) {\n      var rootWindow = self; // use parent window for reload (in case we're in an iframe with no valid src)\n\n      var intervalId = self.setInterval(function () {\n        if (rootWindow.location.protocol !== 'about:') {\n          // reload immediately if protocol is valid\n          applyReload(rootWindow, intervalId);\n        } else {\n          rootWindow = rootWindow.parent;\n\n          if (rootWindow.parent === rootWindow) {\n            // if parent equals current window we've reached the root which would continue forever, so trigger a reload anyways\n            applyReload(rootWindow, intervalId);\n          }\n        }\n      });\n    }\n\n  function applyReload(rootWindow, intervalId) {\n    clearInterval(intervalId);\n    log.info('[WDS] App updated. Reloading...');\n    rootWindow.location.reload();\n  }\n}\n\nmodule.exports = reloadApp;"],"mappings":"AAAA,aAGA,GAAIA,SAAQ,CAAGC,OAAO,SAAtB,CACIC,GAAG,CAAGF,QAAQ,CAACE,GADnB,CAGA,QAASC,UAAT,CAAmBC,IAAnB,CAAyBC,KAAzB,CAAgC,CAC9B,GAAIC,UAAS,CAAGF,IAAI,CAACE,SAArB,CACIC,GAAG,CAAGH,IAAI,CAACG,GADf,CAEIC,UAAU,CAAGJ,IAAI,CAACI,UAFtB,CAGA,GAAIC,YAAW,CAAGJ,KAAK,CAACI,WAAxB,CACIC,WAAW,CAAGL,KAAK,CAACK,WADxB,CAGA,GAAID,WAAW,EAAI,CAACH,SAApB,CAA+B,CAC7B,OACD,CAED,GAAIC,GAAJ,CAAS,CACPL,GAAG,CAACS,IAAJ,CAAS,yBAAT,EAEA,GAAIC,WAAU,CAAGX,OAAO,CAAC,qBAAD,CAAxB,CAEAW,UAAU,CAACC,IAAX,CAAgB,kBAAhB,CAAoCH,WAApC,EAEA,GAAI,MAAOI,KAAP,GAAgB,WAAhB,EAA+BA,IAAI,CAACC,MAAxC,CAAgD,CAE9CD,IAAI,CAACE,WAAL,CAAiB,mBAAmBC,MAAnB,CAA0BP,WAA1B,CAAjB,CAAyD,GAAzD,EACD,CACF,CAXD,IAYK,IAAIF,UAAJ,CAAgB,CACjB,GAAIU,WAAU,CAAGJ,IAAjB,CAEA,GAAIK,WAAU,CAAGL,IAAI,CAACM,WAAL,CAAiB,UAAY,CAC5C,GAAIF,UAAU,CAACG,QAAX,CAAoBC,QAApB,GAAiC,QAArC,CAA+C,CAE7CC,WAAW,CAACL,UAAD,CAAaC,UAAb,CAAX,CACD,CAHD,IAGO,CACLD,UAAU,CAAGA,UAAU,CAACM,MAAxB,CAEA,GAAIN,UAAU,CAACM,MAAX,GAAsBN,UAA1B,CAAsC,CAEpCK,WAAW,CAACL,UAAD,CAAaC,UAAb,CAAX,CACD,CACF,CACF,CAZgB,CAAjB,CAaD,CAEH,QAASI,YAAT,CAAqBL,UAArB,CAAiCC,UAAjC,CAA6C,CAC3CM,aAAa,CAACN,UAAD,CAAb,CACAjB,GAAG,CAACS,IAAJ,CAAS,iCAAT,EACAO,UAAU,CAACG,QAAX,CAAoBK,MAApB,GACD,CACF,CAEDC,MAAM,CAACC,OAAP,CAAiBzB,SAAjB"},"metadata":{},"sourceType":"script"}