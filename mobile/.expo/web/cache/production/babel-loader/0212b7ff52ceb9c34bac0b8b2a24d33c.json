{"ast":null,"code":"\"use strict\";var _defineProperty=require(\"@babel/runtime/helpers/defineProperty\");function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}Object.defineProperty(exports,\"__esModule\",{value:true});exports.useListStyleSpecs=useListStyleSpecs;exports.default=ListStyleSpecsProvider;var _ramda=require(\"ramda\");var _react=_interopRequireWildcard(require(\"react\"));var _reactNative=require(\"react-native-web/dist/index\");var _defaultListStyleSpecs=_interopRequireDefault(require(\"../elements/defaultListStyleSpecs\"));var _SharedPropsProvider=require(\"./SharedPropsProvider\");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!==\"function\")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||typeof obj!==\"object\"&&typeof obj!==\"function\"){return{default:obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!==\"default\"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}var listStyleSpecsContext=(0,_react.createContext)(_defaultListStyleSpecs.default);function useListStyleSpecs(){return(0,_react.useContext)(listStyleSpecsContext);}function createSymbolicMarkerRenderer(_ref){var Component=_ref.Component,counterStyleRenderer=_ref.counterStyleRenderer;var prefix=counterStyleRenderer.renderPrefix();var suffix=counterStyleRenderer.renderSuffix();return function(_ref2){var style=_ref2.style,markerTextStyle=_ref2.markerTextStyle,counterIndex=_ref2.counterIndex,rtlMarkerReversed=_ref2.rtlMarkerReversed;return _react.default.createElement(_reactNative.View,{style:[style,{flexDirection:rtlMarkerReversed?'row-reverse':'row',justifyContent:'flex-end'}]},!!prefix&&_react.default.createElement(_reactNative.Text,{style:markerTextStyle},prefix),_react.default.createElement(Component,_objectSpread(_objectSpread({},markerTextStyle),{},{index:counterIndex})),!!suffix&&_react.default.createElement(_reactNative.Text,{style:markerTextStyle},suffix));};}var makeMarkerRenderers=(0,_ramda.mapObjIndexed)(function(value){if(value.type==='unitary'){return _objectSpread(_objectSpread({},value),{},{renderMarker:createSymbolicMarkerRenderer(value)});}return value;});function ListStyleSpecsProvider(_ref3){var children=_ref3.children;var _ref4=(0,_SharedPropsProvider.useSharedProps)(),customListStyleSpecs=_ref4.customListStyleSpecs;var mergedListStyleSpecs=(0,_react.useMemo)(function(){return makeMarkerRenderers(customListStyleSpecs!=null?_objectSpread(_objectSpread({},_defaultListStyleSpecs.default),customListStyleSpecs):_defaultListStyleSpecs.default);},[customListStyleSpecs]);return _react.default.createElement(listStyleSpecsContext.Provider,{value:mergedListStyleSpecs},children);}","map":{"version":3,"mappings":"m+BAEA,4BACA,qD,wDAOA,gGAEA,uoCAEA,GAAMA,sBAAqB,CAAG,yBAK5BC,8BAL4B,CAA9B,CAOO,QAASC,kBAAT,EAA6B,CAClC,MAAO,sBAAWF,qBAAX,CAAP,CACD,CAED,QAASG,6BAAT,MAGyB,IAFvBC,UAEuB,MAFvBA,SAEuB,CADvBC,oBACuB,MADvBA,oBACuB,CACvB,GAAMC,OAAM,CAAGD,oBAAoB,CAACE,YAArBF,EAAf,CACA,GAAMG,OAAM,CAAGH,oBAAoB,CAACI,YAArBJ,EAAf,CACA,MAAO,gBAKe,IAJpBK,MAIoB,OAJpBA,KAIoB,CAHpBC,eAGoB,OAHpBA,eAGoB,CAFpBC,YAEoB,OAFpBA,YAEoB,CADpBC,iBACoB,OADpBA,iBACoB,CACpB,MACEC,8BAACC,iBAAD,EACEL,KAAK,CAAE,CACLA,KADK,CAEL,CACEM,aAAa,CAAEH,iBAAiB,CAAG,aAAH,CAAmB,KADrD,CAEEI,cAAc,CAAE,UAFlB,CAFK,CADT,EAQG,CAAC,CAACX,MAAF,EAAYQ,6BAACC,iBAAD,EAAML,KAAK,CAAEC,eAAb,EAA+BL,MAA/B,CARf,CASGY,eAAMC,aAAND,CAAoBd,SAApBc,gCACKP,eADLO,MAECE,KAAK,CAAER,YAFRM,GATH,CAaG,CAAC,CAACV,MAAF,EAAYM,6BAACC,iBAAD,EAAML,KAAK,CAAEC,eAAb,EAA+BH,MAA/B,CAbf,CADF,CANF,EAwBD,CAED,GAAMa,oBAAmB,CAAG,yBAAeC,cAAD,CAA0B,CAClE,GAAIA,KAAK,CAACC,IAAND,GAAe,SAAnB,CAA8B,CAC5B,sCACKA,KADL,MAEEE,YAAY,CAAErB,4BAA4B,CAACmB,KAAD,CAF5C,GAID,CACD,MAAOA,MAAP,CAP0B,EAA5B,CAUe,QAASG,uBAAT,OAEW,IADxBC,SACwB,OADxBA,QACwB,CACxB,UAAiC,yCAAjC,CAAQC,oBAAR,OAAQA,oBAAR,CACA,GAAMC,qBAAoB,CAAG,mBAAQ,UAAM,CACzC,MAAOP,oBAAmB,CACxBM,oBAAoB,EAAI,IAAxBA,gCACS1B,8BADT0B,EACmCA,oBADnCA,EAEI1B,8BAHoB,CAA1B,CAD2B,EAM1B,CAAC0B,oBAAD,CAN0B,CAA7B,CAOA,MACEb,8BAACd,qBAAD,CAAuB6B,QAAvB,EAAgCP,KAAK,CAAEM,oBAAvC,EACGF,QADH,CADF,CAKD","names":["listStyleSpecsContext","defaultListStyleSpecs","useListStyleSpecs","createSymbolicMarkerRenderer","Component","counterStyleRenderer","prefix","renderPrefix","suffix","renderSuffix","style","markerTextStyle","counterIndex","rtlMarkerReversed","_react","_reactNative","flexDirection","justifyContent","React","createElement","index","makeMarkerRenderers","value","type","renderMarker","ListStyleSpecsProvider","children","customListStyleSpecs","mergedListStyleSpecs","Provider"],"sources":["ListStyleSpecsProvider.tsx"],"sourcesContent":["/* eslint-disable react-native/no-inline-styles */\nimport { MarkerBoxProps } from '@jsamr/react-native-li';\nimport { mapObjIndexed } from 'ramda';\nimport React, {\n  createContext,\n  PropsWithChildren,\n  useContext,\n  useMemo\n} from 'react';\nimport { Text, View } from 'react-native';\nimport defaultListStyleSpecs from '../elements/defaultListStyleSpecs';\nimport { ListStyleSpec, UnitaryListStyleSpec } from '../shared-types';\nimport { useSharedProps } from './SharedPropsProvider';\n\nconst listStyleSpecsContext = createContext<\n  Record<\n    string,\n    ListStyleSpec & { renderMarker?: (props: MarkerBoxProps) => any }\n  >\n>(defaultListStyleSpecs);\n\nexport function useListStyleSpecs() {\n  return useContext(listStyleSpecsContext);\n}\n\nfunction createSymbolicMarkerRenderer({\n  Component,\n  counterStyleRenderer\n}: UnitaryListStyleSpec) {\n  const prefix = counterStyleRenderer.renderPrefix();\n  const suffix = counterStyleRenderer.renderSuffix();\n  return ({\n    style,\n    markerTextStyle,\n    counterIndex,\n    rtlMarkerReversed\n  }: MarkerBoxProps) => {\n    return (\n      <View\n        style={[\n          style,\n          {\n            flexDirection: rtlMarkerReversed ? 'row-reverse' : 'row',\n            justifyContent: 'flex-end'\n          }\n        ]}>\n        {!!prefix && <Text style={markerTextStyle}>{prefix}</Text>}\n        {React.createElement(Component, {\n          ...(markerTextStyle as any),\n          index: counterIndex\n        })}\n        {!!suffix && <Text style={markerTextStyle}>{suffix}</Text>}\n      </View>\n    );\n  };\n}\n\nconst makeMarkerRenderers = mapObjIndexed((value: ListStyleSpec) => {\n  if (value.type === 'unitary') {\n    return {\n      ...value,\n      renderMarker: createSymbolicMarkerRenderer(value)\n    };\n  }\n  return value;\n});\n\nexport default function ListStyleSpecsProvider({\n  children\n}: PropsWithChildren<{}>) {\n  const { customListStyleSpecs } = useSharedProps();\n  const mergedListStyleSpecs = useMemo(() => {\n    return makeMarkerRenderers(\n      customListStyleSpecs != null\n        ? { ...defaultListStyleSpecs, ...customListStyleSpecs }\n        : defaultListStyleSpecs\n    );\n  }, [customListStyleSpecs]);\n  return (\n    <listStyleSpecsContext.Provider value={mergedListStyleSpecs}>\n      {children}\n    </listStyleSpecsContext.Provider>\n  );\n}\n"]},"metadata":{},"sourceType":"script"}