{"ast":null,"code":"import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _objectDestructuringEmpty from\"@babel/runtime/helpers/objectDestructuringEmpty\";import{NativeWindStyleSheet as _NativeWindStyleSheet}from\"nativewind\";import{StyledComponent as _StyledComponent}from\"nativewind\";import{useState}from'react';import View from\"react-native-web/dist/exports/View\";import TextInput from\"react-native-web/dist/exports/TextInput\";import{useNavigation}from'@react-navigation/native';import CustomButton from\"../../components/CustomButton/CustomButton\";import{useLoginMutation}from\"../../graphql/graphql\";import{setAccessToken}from\"../../accessToken\";import{accessTokenVar}from\"../../variables/accessToken\";import{userDataVar}from\"../../variables/userData\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SignInScreen=function SignInScreen(_ref){_objectDestructuringEmpty(_ref);var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useLoginMutation=useLoginMutation(),_useLoginMutation2=_slicedToArray(_useLoginMutation,1),login=_useLoginMutation2[0];var navigation=useNavigation();var signIn=function(){var _ref2=_asyncToGenerator(function*(){var response=yield login({variables:{UsersLoginInput:{email:email,password:password}}});console.log('response',response);if(response&&response.data){setAccessToken(response.data.loginUsers.accessToken,response.data.loginUsers.refreshToken);accessTokenVar(response.data.loginUsers.accessToken);userDataVar({firstName:response.data.loginUsers.firstName,lastName:response.data.loginUsers.lastName,avatar:response.data.loginUsers.avatar});navigation.navigate('BottomTabs',{screen:'Home'});}});return function signIn(){return _ref2.apply(this,arguments);};}();var goSignUp=function goSignUp(){return navigation.navigate('SignUp');};return _jsx(_StyledComponent,{className:\"flex-1 items-center justify-center bg-blue-100\",component:View,children:_jsxs(_StyledComponent,{className:\"mt-10 \",component:View,children:[_jsx(_StyledComponent,{className:\"bg-red-300\",onChangeText:function onChangeText(val){return setEmail(val);},value:email,placeholder:\"Adresse Email\",component:TextInput}),_jsx(_StyledComponent,{className:\"bg-red-300\",onChangeText:function onChangeText(val){return setPassword(val);},value:password,secureTextEntry:true,placeholder:\"Mot de passe\",component:TextInput}),_jsx(CustomButton,{buttonTitle:\"Se connecter\",onPress:signIn}),_jsx(CustomButton,{buttonTitle:\"Se cr\\xE9er un compte\",onPress:goSignUp})]})});};export default SignInScreen;_NativeWindStyleSheet.create({styles:{\"mt-10\":{\"marginTop\":40},\"flex-1\":{\"flexGrow\":1,\"flexShrink\":1},\"items-center\":{\"alignItems\":\"center\"},\"justify-center\":{\"justifyContent\":\"center\"}}});","map":{"version":3,"names":["useState","useNavigation","CustomButton","useLoginMutation","setAccessToken","accessTokenVar","userDataVar","SignInScreen","email","setEmail","password","setPassword","login","navigation","signIn","response","variables","UsersLoginInput","console","log","data","loginUsers","accessToken","refreshToken","firstName","lastName","avatar","navigate","screen","goSignUp","val"],"sources":["/Users/matthieu/Documents/boatproject/mobile/screens/SignInScreen/SignInScreen.tsx"],"sourcesContent":["import { useState } from 'react'\nimport { View, TextInput } from 'react-native'\nimport { useNavigation } from '@react-navigation/native'\nimport CustomButton from '@components/CustomButton/CustomButton'\nimport { useLoginMutation } from '../../graphql/graphql'\nimport { setAccessToken } from '../../accessToken'\nimport { accessTokenVar } from '../../variables/accessToken'\nimport { userDataVar } from '../../variables/userData'\n\ninterface SignInScreenProps {}\n\nconst SignInScreen: React.FunctionComponent<SignInScreenProps> = ({}) => {\n  const [email, setEmail] = useState<string>('')\n  const [password, setPassword] = useState<string>('')\n\n  const [login] = useLoginMutation()\n\n  const navigation = useNavigation()\n\n  const signIn = async () => {\n    const response = await login({\n      variables: {\n        UsersLoginInput: {\n          email,\n          password,\n        },\n      },\n    })\n    console.log('response', response)\n    if (response && response.data) {\n      setAccessToken(response.data.loginUsers.accessToken, response.data.loginUsers.refreshToken)\n      accessTokenVar(response.data.loginUsers.accessToken)\n      userDataVar({\n        firstName: response.data.loginUsers.firstName,\n        lastName: response.data.loginUsers.lastName,\n        avatar: response.data.loginUsers.avatar,\n      })\n      navigation.navigate('BottomTabs', { screen: 'Home' })\n    }\n  }\n\n  const goSignUp = () => navigation.navigate('SignUp')\n\n  return (\n    <View className='flex-1 items-center justify-center bg-blue-100'>\n      <View className='mt-10 '>\n        <TextInput\n          className='bg-red-300'\n          onChangeText={(val) => setEmail(val)}\n          value={email}\n          placeholder='Adresse Email'\n        />\n        <TextInput\n          className='bg-red-300'\n          onChangeText={(val) => setPassword(val)}\n          value={password}\n          secureTextEntry={true}\n          placeholder='Mot de passe'\n        />\n\n        <CustomButton buttonTitle='Se connecter' onPress={signIn} />\n\n        <CustomButton buttonTitle='Se crÃ©er un compte' onPress={goSignUp} />\n      </View>\n    </View>\n  )\n}\n\nexport default SignInScreen\n"],"mappings":"iWAAA,OAASA,QAAT,KAAyB,OAAzB,C,oHAEA,OAASC,aAAT,KAA8B,0BAA9B,CACA,MAAOC,aAAP,kDACA,OAASC,gBAAT,6BACA,OAASC,cAAT,yBACA,OAASC,cAAT,mCACA,OAASC,WAAT,gC,wFAIA,GAAMC,aAAwD,CAAG,QAA3DA,aAA2D,MAAQ,iCACvE,cAA0BP,QAAQ,CAAS,EAAT,CAAlC,wCAAOQ,KAAP,eAAcC,QAAd,eACA,eAAgCT,QAAQ,CAAS,EAAT,CAAxC,yCAAOU,QAAP,eAAiBC,WAAjB,eAEA,sBAAgBR,gBAAgB,EAAhC,wDAAOS,KAAP,uBAEA,GAAMC,WAAU,CAAGZ,aAAa,EAAhC,CAEA,GAAMa,OAAM,wCAAG,WAAY,CACzB,GAAMC,SAAQ,MAASH,MAAK,CAAC,CAC3BI,SAAS,CAAE,CACTC,eAAe,CAAE,CACfT,KAAK,CAALA,KADe,CAEfE,QAAQ,CAARA,QAFe,CADR,CADgB,CAAD,CAA5B,CAQAQ,OAAO,CAACC,GAAR,CAAY,UAAZ,CAAwBJ,QAAxB,EACA,GAAIA,QAAQ,EAAIA,QAAQ,CAACK,IAAzB,CAA+B,CAC7BhB,cAAc,CAACW,QAAQ,CAACK,IAAT,CAAcC,UAAd,CAAyBC,WAA1B,CAAuCP,QAAQ,CAACK,IAAT,CAAcC,UAAd,CAAyBE,YAAhE,CAAd,CACAlB,cAAc,CAACU,QAAQ,CAACK,IAAT,CAAcC,UAAd,CAAyBC,WAA1B,CAAd,CACAhB,WAAW,CAAC,CACVkB,SAAS,CAAET,QAAQ,CAACK,IAAT,CAAcC,UAAd,CAAyBG,SAD1B,CAEVC,QAAQ,CAAEV,QAAQ,CAACK,IAAT,CAAcC,UAAd,CAAyBI,QAFzB,CAGVC,MAAM,CAAEX,QAAQ,CAACK,IAAT,CAAcC,UAAd,CAAyBK,MAHvB,CAAD,CAAX,CAKAb,UAAU,CAACc,QAAX,CAAoB,YAApB,CAAkC,CAAEC,MAAM,CAAE,MAAV,CAAlC,EACD,CACF,CApBW,iBAANd,OAAM,2CAAZ,CAsBA,GAAMe,SAAQ,CAAG,QAAXA,SAAW,SAAMhB,WAAU,CAACc,QAAX,CAAoB,QAApB,CAAN,EAAjB,CAEA,8BACQ,SAAS,CAAC,gDADlB,iDAEU,SAAS,CAAC,QAFpB,iDAIQ,SAAS,CAAC,YAJlB,CAKQ,YAAY,CAAE,sBAACG,GAAD,QAASrB,SAAQ,CAACqB,GAAD,CAAjB,EALtB,CAMQ,KAAK,CAAEtB,KANf,CAOQ,WAAW,CAAC,eAPpB,8CAUQ,SAAS,CAAC,YAVlB,CAWQ,YAAY,CAAE,sBAACsB,GAAD,QAASnB,YAAW,CAACmB,GAAD,CAApB,EAXtB,CAYQ,KAAK,CAAEpB,QAZf,CAaQ,eAAe,CAAE,IAbzB,CAcQ,WAAW,CAAC,cAdpB,uBAiBM,KAAC,YAAD,EAAc,WAAW,CAAC,cAA1B,CAAyC,OAAO,CAAEI,MAAlD,EAjBN,CAmBM,KAAC,YAAD,EAAc,WAAW,CAAC,uBAA1B,CAA+C,OAAO,CAAEe,QAAxD,EAnBN,MAuBD,CAvDD,CAyDA,cAAetB,aAAf,C"},"metadata":{},"sourceType":"module"}