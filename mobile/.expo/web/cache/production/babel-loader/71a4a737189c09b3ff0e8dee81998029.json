{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useMemo}from'react';import Platform from\"react-native-web/dist/exports/Platform\";import{HybridContext}from\"./Context\";import{useModeManager}from\"./../color-mode/hooks\";import{keyboardDismissHandlerManager}from\"../../hooks\";var HybridProvider=function HybridProvider(_ref){var children=_ref.children,_ref$options=_ref.options,_ref$options$initialC=_ref$options.initialColorMode,initialColorMode=_ref$options$initialC===void 0?'light':_ref$options$initialC,_ref$options$accessib=_ref$options.accessibleColors,isTextColorAccessible=_ref$options$accessib===void 0?false:_ref$options$accessib,useSystemColorMode=_ref$options.useSystemColorMode,colorModeManager=_ref.colorModeManager;var _useModeManager=useModeManager(initialColorMode,useSystemColorMode,colorModeManager),colorMode=_useModeManager.colorMode,setColorMode=_useModeManager.setColorMode;var toggleColorMode=React.useCallback(function(){setColorMode(colorMode==='light'?'dark':'light');},[colorMode,setColorMode]);var _React$useState=React.useState(isTextColorAccessible),_React$useState2=_slicedToArray(_React$useState,2),accessibleColors=_React$useState2[0],setAccessibleColors=_React$useState2[1];var contextValue=useMemo(function(){return{colorMode:{colorMode:colorMode,toggleColorMode:toggleColorMode,setColorMode:setColorMode,accessibleColors:accessibleColors,setAccessibleColors:setAccessibleColors}};},[colorMode,toggleColorMode,setColorMode,accessibleColors,setAccessibleColors]);React.useEffect(function(){var escapeKeyListener=null;if(Platform.OS==='web'){escapeKeyListener=function escapeKeyListener(e){if(e.key==='Escape'){if(keyboardDismissHandlerManager.length()>0){var lastHandler=keyboardDismissHandlerManager.pop();lastHandler();}}};document.addEventListener('keydown',escapeKeyListener);}return function(){if(Platform.OS==='web'){document.removeEventListener('keydown',escapeKeyListener);}};},[]);return React.createElement(HybridContext.Provider,{value:contextValue},children);};export default HybridProvider;","map":{"version":3,"mappings":"iEAAA,MAAOA,MAAP,EAAgBC,OAAhB,KAA+B,OAA/B,C,6DAEA,OAASC,aAAT,iBACA,OAASC,cAAT,6BAEA,OAASC,6BAAT,mBAEA,GAAMC,eAAc,CAAG,QAAjBA,eAAiB,MAQQ,IAP7BC,SAO6B,MAP7BA,QAO6B,mBAN7BC,OAM6B,oCAL3BC,gBAK2B,CAL3BA,gBAK2B,gCALR,OAKQ,0DAJ3BC,gBAI2B,CAJTC,qBAIS,gCAJe,KAIf,uBAH3BC,kBAG2B,cAH3BA,kBAG2B,CAD7BC,gBAC6B,MAD7BA,gBAC6B,CAE7B,oBAAoCT,cAAc,CAChDK,gBADgD,CAEhDG,kBAFgD,CAGhDC,gBAHgD,CAAlD,CAAQC,SAAR,iBAAQA,SAAR,CAAmBC,YAAnB,iBAAmBA,YAAnB,CAMA,GAAMC,gBAAe,CAAGf,KAAK,CAACgB,WAANhB,CAAkB,UAAM,CAC9Cc,YAAY,CAACD,SAAS,GAAK,OAAdA,CAAwB,MAAxBA,CAAiC,OAAlC,CAAZC,CADsB,EAErB,CAACD,SAAD,CAAYC,YAAZ,CAFqBd,CAAxB,CAKA,oBAAgDA,KAAK,CAACiB,QAANjB,CAC9CU,qBAD8CV,CAAhD,oDAAOS,gBAAP,qBAAyBS,mBAAzB,qBAIA,GAAMC,aAAY,CAAGlB,OAAO,CAAC,UAAM,CACjC,MAAO,CACLY,SAAS,CAAE,CACTA,SADS,CACTA,SADS,CAETE,eAFS,CAETA,eAFS,CAGTD,YAHS,CAGTA,YAHS,CAITL,gBAJS,CAITA,gBAJS,CAKTS,uCALS,CADN,CAAP,CAD0B,EAUzB,CACDL,SADC,CAEDE,eAFC,CAGDD,YAHC,CAIDL,gBAJC,CAKDS,mBALC,CAVyB,CAA5B,CAkBAlB,KAAK,CAACoB,SAANpB,CAAgB,UAAM,CACpB,GAAIqB,kBAAsB,CAAG,IAA7B,CAEA,GAAIC,QAAQ,CAACC,EAATD,GAAgB,KAApB,CAA2B,CACzBD,iBAAiB,CAAIG,4BAAD,CAAsB,CACxC,GAAIA,CAAC,CAACC,GAAFD,GAAU,QAAd,CAAwB,CACtB,GAAIpB,6BAA6B,CAACsB,MAA9BtB,GAAyC,CAA7C,CAAgD,CAC9C,GAAMuB,YAAgB,CAAGvB,6BAA6B,CAACwB,GAA9BxB,EAAzB,CACAuB,WAAW,GACZ,CACF,CANH,EAQAE,QAAQ,CAACC,gBAATD,CAA0B,SAA1BA,CAAqCR,iBAArCQ,EACD,CAED,MAAO,WAAM,CACX,GAAIP,QAAQ,CAACC,EAATD,GAAgB,KAApB,CAA2B,CACzBO,QAAQ,CAACE,mBAATF,CAA6B,SAA7BA,CAAwCR,iBAAxCQ,EACD,CAHH,EAfF,EAoBG,EApBH7B,EAsBA,MACEA,qBAACE,aAAD,CAAe8B,QAAf,EAAwBC,KAAK,CAAEd,YAA/B,EACGb,QADH,CADF,CAjEF,EAwEA,cAAeD,eAAf","names":["React","useMemo","HybridContext","useModeManager","keyboardDismissHandlerManager","HybridProvider","children","options","initialColorMode","accessibleColors","isTextColorAccessible","useSystemColorMode","colorModeManager","colorMode","setColorMode","toggleColorMode","useCallback","useState","setAccessibleColors","contextValue","useEffect","escapeKeyListener","Platform","OS","e","key","length","lastHandler","pop","document","addEventListener","removeEventListener","Provider","value"],"sources":["HybridProvider.tsx"],"sourcesContent":["import React, { useMemo } from 'react';\nimport { Platform } from 'react-native';\nimport { HybridContext } from './Context';\nimport { useModeManager } from './../color-mode/hooks';\nimport type { IColorModeProviderProps } from './../color-mode';\nimport { keyboardDismissHandlerManager } from '../../hooks';\n\nconst HybridProvider = ({\n  children,\n  options: {\n    initialColorMode = 'light',\n    accessibleColors: isTextColorAccessible = false,\n    useSystemColorMode,\n  },\n  colorModeManager,\n}: IColorModeProviderProps) => {\n  // Color-mode content\n  const { colorMode, setColorMode } = useModeManager(\n    initialColorMode,\n    useSystemColorMode,\n    colorModeManager\n  );\n\n  const toggleColorMode = React.useCallback(() => {\n    setColorMode(colorMode === 'light' ? 'dark' : 'light');\n  }, [colorMode, setColorMode]);\n\n  // Accessible color hook\n  const [accessibleColors, setAccessibleColors] = React.useState<boolean>(\n    isTextColorAccessible\n  );\n\n  const contextValue = useMemo(() => {\n    return {\n      colorMode: {\n        colorMode,\n        toggleColorMode,\n        setColorMode,\n        accessibleColors,\n        setAccessibleColors,\n      },\n    };\n  }, [\n    colorMode,\n    toggleColorMode,\n    setColorMode,\n    accessibleColors,\n    setAccessibleColors,\n  ]);\n\n  React.useEffect(() => {\n    let escapeKeyListener: any = null;\n\n    if (Platform.OS === 'web') {\n      escapeKeyListener = (e: KeyboardEvent) => {\n        if (e.key === 'Escape') {\n          if (keyboardDismissHandlerManager.length() > 0) {\n            const lastHandler: any = keyboardDismissHandlerManager.pop();\n            lastHandler();\n          }\n        }\n      };\n      document.addEventListener('keydown', escapeKeyListener);\n    }\n\n    return () => {\n      if (Platform.OS === 'web') {\n        document.removeEventListener('keydown', escapeKeyListener);\n      }\n    };\n  }, []);\n\n  return (\n    <HybridContext.Provider value={contextValue}>\n      {children}\n    </HybridContext.Provider>\n  );\n};\n\nexport default HybridProvider;\n"]},"metadata":{},"sourceType":"module"}