{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";var _excluded=[\"children\"],_excluded2=[\"isTruncated\",\"noOfLines\",\"bold\",\"italic\",\"sub\",\"highlight\",\"underline\",\"strikeThrough\",\"fontFamily\",\"fontWeight\",\"fontStyle\",\"_hover\",\"fontSize\",\"numberOfLines\"];function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}import React,{memo,forwardRef,useRef}from'react';import{usePropsResolution}from\"../../../hooks/useThemeProps\";import{useHover}from'@react-native-aria/interactions';import{mergeRefs}from\"../../../utils/mergeRefs\";import{makeStyledComponent}from\"../../../utils/styled\";import{useResolvedFontFamily}from\"../../../hooks/useResolvedFontFamily\";import NativeText from\"react-native-web/dist/exports/Text\";import{useHasResponsiveProps}from\"../../../hooks/useHasResponsiveProps\";var StyledText=makeStyledComponent(NativeText);var TextAncestorContext=React.createContext(false);var Text=function Text(_ref2,ref){var children=_ref2.children,props=_objectWithoutProperties(_ref2,_excluded);var hasTextAncestor=React.useContext(TextAncestorContext);var _usePropsResolution=usePropsResolution('Text',props,{},{resolveResponsively:['noOfLines','numberOfLines'],componentTheme:hasTextAncestor?{}:undefined}),isTruncated=_usePropsResolution.isTruncated,noOfLines=_usePropsResolution.noOfLines,bold=_usePropsResolution.bold,italic=_usePropsResolution.italic,sub=_usePropsResolution.sub,highlight=_usePropsResolution.highlight,underline=_usePropsResolution.underline,strikeThrough=_usePropsResolution.strikeThrough,propFontFamily=_usePropsResolution.fontFamily,propFontWeight=_usePropsResolution.fontWeight,propFontStyle=_usePropsResolution.fontStyle,_hover=_usePropsResolution._hover,fontSize=_usePropsResolution.fontSize,numberOfLines=_usePropsResolution.numberOfLines,resolvedProps=_objectWithoutProperties(_usePropsResolution,_excluded2);var _ref=useRef(null);var _useHover=useHover({},_hover?_ref:null),isHovered=_useHover.isHovered;var fontFamily=propFontFamily;var fontStyle=italic?'italic':propFontStyle;var fontWeight=bold?'bold':propFontWeight;var resolvedFontFamily=useResolvedFontFamily({fontFamily:fontFamily,fontWeight:fontWeight!==null&&fontWeight!==void 0?fontWeight:hasTextAncestor?undefined:400,fontStyle:fontStyle!==null&&fontStyle!==void 0?fontStyle:hasTextAncestor?undefined:'normal'});if(resolvedFontFamily){fontFamily=resolvedFontFamily;}if(useHasResponsiveProps(props)){return null;}var propsToSpread=_objectSpread(_objectSpread(_objectSpread({},resolvedProps),{},{numberOfLines:numberOfLines||noOfLines?numberOfLines||noOfLines:isTruncated?1:undefined},resolvedFontFamily),{},{bg:highlight?'warning.300':resolvedProps.bg,textDecorationLine:underline&&strikeThrough?'underline line-through':underline?'underline':strikeThrough?'line-through':resolvedProps.textDecorationLine,fontSize:sub?10:fontSize,ref:mergeRefs([ref,_ref])},isHovered&&_hover);return hasTextAncestor?React.createElement(StyledText,propsToSpread,children):React.createElement(TextAncestorContext.Provider,{value:true},React.createElement(StyledText,propsToSpread,children));};export default memo(forwardRef(Text));","map":{"version":3,"mappings":"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","names":["React","memo","forwardRef","useRef","usePropsResolution","useHover","mergeRefs","makeStyledComponent","useResolvedFontFamily","useHasResponsiveProps","StyledText","NativeText","TextAncestorContext","createContext","Text","ref","children","props","hasTextAncestor","useContext","resolveResponsively","componentTheme","undefined","isTruncated","noOfLines","bold","italic","sub","highlight","underline","strikeThrough","propFontFamily","fontFamily","propFontWeight","fontWeight","propFontStyle","fontStyle","_hover","fontSize","numberOfLines","resolvedProps","_ref","isHovered","resolvedFontFamily","propsToSpread","bg","textDecorationLine","Provider","value"],"sources":["index.tsx"],"sourcesContent":["import React, { memo, forwardRef, useRef } from 'react';\nimport { usePropsResolution } from '../../../hooks/useThemeProps';\nimport type { ITextProps } from './types';\nimport { useHover } from '@react-native-aria/interactions';\nimport { mergeRefs } from '../../../utils/mergeRefs';\nimport { makeStyledComponent } from '../../../utils/styled';\nimport { useResolvedFontFamily } from '../../../hooks/useResolvedFontFamily';\nimport { Text as NativeText } from 'react-native';\nimport { useHasResponsiveProps } from '../../../hooks/useHasResponsiveProps';\n\nconst StyledText = makeStyledComponent(NativeText);\n// To have a RN compatible behaviour, we'll inherit parent text styles as base style\nconst TextAncestorContext = React.createContext(false);\n\nconst Text = ({ children, ...props }: ITextProps, ref: any) => {\n  const hasTextAncestor = React.useContext(TextAncestorContext);\n\n  const {\n    isTruncated,\n    noOfLines,\n    bold,\n    italic,\n    sub,\n    highlight,\n    underline,\n    strikeThrough,\n    fontFamily: propFontFamily,\n    fontWeight: propFontWeight,\n    fontStyle: propFontStyle,\n    _hover,\n    fontSize,\n    numberOfLines,\n    ...resolvedProps\n  } = usePropsResolution(\n    'Text',\n    props,\n    {},\n    {\n      resolveResponsively: ['noOfLines', 'numberOfLines'],\n      // We override the component base theme if text has an ancestor.\n      componentTheme: hasTextAncestor ? {} : undefined,\n    }\n  );\n\n  const _ref = useRef(null);\n  // TODO: might have to add this condition\n  const { isHovered } = useHover({}, _hover ? _ref : null);\n  // const { isHovered } = useHover({}, _ref);\n  let fontFamily = propFontFamily;\n  const fontStyle = italic ? 'italic' : propFontStyle;\n  const fontWeight = bold ? 'bold' : propFontWeight;\n\n  const resolvedFontFamily = useResolvedFontFamily({\n    fontFamily,\n    fontWeight: fontWeight ?? (hasTextAncestor ? undefined : 400),\n    fontStyle: fontStyle ?? (hasTextAncestor ? undefined : 'normal'),\n  });\n\n  if (resolvedFontFamily) {\n    fontFamily = resolvedFontFamily;\n  }\n\n  //TODO: refactor for responsive prop\n  if (useHasResponsiveProps(props)) {\n    return null;\n  }\n\n  const propsToSpread = {\n    ...resolvedProps,\n    numberOfLines:\n      numberOfLines || noOfLines\n        ? numberOfLines || noOfLines\n        : isTruncated\n        ? 1\n        : undefined,\n    ...resolvedFontFamily,\n    bg: highlight ? 'warning.300' : resolvedProps.bg,\n    textDecorationLine:\n      underline && strikeThrough\n        ? 'underline line-through'\n        : underline\n        ? 'underline'\n        : strikeThrough\n        ? 'line-through'\n        : resolvedProps.textDecorationLine,\n    fontSize: sub ? 10 : fontSize,\n    ref: mergeRefs([ref, _ref]),\n    ...(isHovered && _hover),\n  };\n\n  return hasTextAncestor ? (\n    <StyledText {...propsToSpread}>{children}</StyledText>\n  ) : (\n    <TextAncestorContext.Provider value={true}>\n      <StyledText {...propsToSpread}>{children}</StyledText>\n    </TextAncestorContext.Provider>\n  );\n};\n\nexport default memo(forwardRef(Text));\nexport type { ITextProps };\n"]},"metadata":{},"sourceType":"module"}