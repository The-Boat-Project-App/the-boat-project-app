{"ast":null,"code":"import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _objectDestructuringEmpty from\"@babel/runtime/helpers/objectDestructuringEmpty\";import{NativeWindStyleSheet as _NativeWindStyleSheet}from\"nativewind\";import{StyledComponent as _StyledComponent}from\"nativewind\";import React,{useState}from'react';import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import Image from\"react-native-web/dist/exports/Image\";import useWindowDimensions from\"react-native-web/dist/exports/useWindowDimensions\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import Button from\"react-native-web/dist/exports/Button\";import{SafeAreaView}from'react-native-safe-area-context';import{newPostVar}from\"../../variables/newPost\";import RenderHtml from'react-native-render-html';import{useReactiveVar}from'@apollo/client';import ScreenHeader from\"../../components/ScreenHeader/ScreenHeader\";import CustomAvatar from\"../../components/CustomAvatar/CustomAvatar\";import{useCreateNewPostMutation}from\"../../graphql/graphql\";import{userDataVar}from'variables/userData';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PreviewPostScreen=function PreviewPostScreen(_ref){_objectDestructuringEmpty(_ref);var newPostData=useReactiveVar(newPostVar);var userData=useReactiveVar(userDataVar);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),refreshing=_useState2[0],setRefreshing=_useState2[1];var _useState3=useState(newPostData.title),_useState4=_slicedToArray(_useState3,2),title=_useState4[0],setTitle=_useState4[1];var _useState5=useState('intro de larticle'),_useState6=_slicedToArray(_useState5,2),intro=_useState6[0],setIntro=_useState6[1];var _useState7=useState(newPostData.content),_useState8=_slicedToArray(_useState7,2),content=_useState8[0],setContent=_useState8[1];var _useState9=useState('https://upload.wikimedia.org/wikipedia/commons/thumb/c/ca/MI_84_%E2%80%94_RER_B.1.jpg/300px-MI_84_%E2%80%94_RER_B.1.jpg'),_useState10=_slicedToArray(_useState9,2),mainPicture=_useState10[0],setMainPicture=_useState10[1];var _useState11=useState('Matthieu'),_useState12=_slicedToArray(_useState11,2),author=_useState12[0],setAuthor=_useState12[1];var _useState13=useState(111),_useState14=_slicedToArray(_useState13,2),likes=_useState14[0],setLikes=_useState14[1];var _useState15=useState(true),_useState16=_slicedToArray(_useState15,2),submitted=_useState16[0],setSubmitted=_useState16[1];var _useState17=useState('pending'),_useState18=_slicedToArray(_useState17,2),validated=_useState18[0],setValidated=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),isBookmarked=_useState20[0],setIsBookmarked=_useState20[1];var _useCreateNewPostMuta=useCreateNewPostMutation(),_useCreateNewPostMuta2=_slicedToArray(_useCreateNewPostMuta,1),createNewPost=_useCreateNewPostMuta2[0];var _useWindowDimensions=useWindowDimensions(),height=_useWindowDimensions.height,width=_useWindowDimensions.width;var source={html:newPostData.content};console.log('source',source);var createPost=function(){var _ref2=_asyncToGenerator(function*(){var response=yield createNewPost({variables:{newPostsInput:{title:title,intro:intro,content:content,author:author,mainPicture:mainPicture,likes:likes,submitted:submitted,validated:validated}}});if(response&&response.data){console.log('REPONSE',response);}});return function createPost(){return _ref2.apply(this,arguments);};}();var savePost=function(){var _ref3=_asyncToGenerator(function*(){var response=yield createNewPost({variables:{newPostsInput:{title:title,intro:intro,content:content,author:author,mainPicture:mainPicture,likes:likes,submitted:false,validated:validated}}});if(response&&response.data){console.log('REPONSE',response);}});return function savePost(){return _ref3.apply(this,arguments);};}();console.log('newPostData.image in PreviewPostScreen',newPostData.image);return _jsxs(_StyledComponent,{className:\"flex-1 bg-white\",component:SafeAreaView,children:[_jsx(ScreenHeader,{}),_jsxs(ScrollView,{showsVerticalScrollIndicator:false,children:[_jsxs(_StyledComponent,{className:\"justify-center bg-white px-3 \",component:View,children:[_jsx(_StyledComponent,{className:\"text-xl color-deepBlue font-ralewayBold  ml-3 mb-4 text-center\",component:Text,children:newPostData.title}),_jsx(_StyledComponent,{className:\"h-40 rounded-md \",source:{uri:newPostData.image},component:Image}),_jsx(_StyledComponent,{className:\"flex-row justify-between mt-2 \",component:View,children:_jsx(_StyledComponent,{className:\"-mt-12\",component:View,children:_jsx(CustomAvatar,{isConnected:true,avatarPicture:userData.avatar})})}),_jsxs(_StyledComponent,{className:\" text-md color-deepBlue font-ralewayBold \",component:Text,children:[\"Publi\\xE9 par \",userData.firstName]}),_jsx(_StyledComponent,{className:\"text-xs color-deepBlue font-raleway  mb-4\",component:Text,children:\"Aujourd'hui\"}),_jsx(_StyledComponent,{className:\"color-deepBlue\",component:View,children:_jsx(RenderHtml,{contentWidth:width,source:source})})]}),_jsx(Button,{title:\"Publier!\",onPress:createPost}),_jsx(Button,{title:\"Sauvegarder\",onPress:savePost})]})]});};export default PreviewPostScreen;_NativeWindStyleSheet.create({styles:{\"ml-3\":{\"marginLeft\":12},\"mb-4\":{\"marginBottom\":16},\"mt-2\":{\"marginTop\":8},\"-mt-12\":{\"marginTop\":-48},\"h-40\":{\"height\":160},\"flex-1\":{\"flexGrow\":1,\"flexShrink\":1},\"flex-row\":{\"flexDirection\":\"row\"},\"justify-center\":{\"justifyContent\":\"center\"},\"justify-between\":{\"justifyContent\":\"space-between\"},\"rounded-md\":{\"borderTopLeftRadius\":6,\"borderTopRightRadius\":6,\"borderBottomRightRadius\":6,\"borderBottomLeftRadius\":6},\"bg-white\":{\"backgroundColor\":\"#FFFFFF\"},\"px-3\":{\"paddingLeft\":12,\"paddingRight\":12},\"text-center\":{\"textAlign\":\"center\"},\"font-ralewayBold\":{\"fontFamily\":\"Raleway_600SemiBold\"},\"font-raleway\":{\"fontFamily\":\"Raleway_400Regular\"},\"color-deepBlue\":{\"color\":\"#272E67\"},\"text-xl\":{\"fontSize\":20,\"lineHeight\":28},\"text-xs\":{\"fontSize\":12,\"lineHeight\":16}}});","map":{"version":3,"names":["React","useState","SafeAreaView","newPostVar","RenderHtml","useReactiveVar","ScreenHeader","CustomAvatar","useCreateNewPostMutation","userDataVar","PreviewPostScreen","newPostData","userData","refreshing","setRefreshing","title","setTitle","intro","setIntro","content","setContent","mainPicture","setMainPicture","author","setAuthor","likes","setLikes","submitted","setSubmitted","validated","setValidated","isBookmarked","setIsBookmarked","createNewPost","useWindowDimensions","height","width","source","html","console","log","createPost","response","variables","newPostsInput","data","savePost","image","uri","avatar","firstName"],"sources":["/Users/matthieu/Documents/boatproject/mobile/screens/PreviewPostScreen/PreviewPostScreen.tsx"],"sourcesContent":["import React, { useState, useCallback } from 'react'\nimport { View, Text, Image, useWindowDimensions, ScrollView, Button } from 'react-native'\nimport { SafeAreaView } from 'react-native-safe-area-context'\nimport { newPostVar } from '../../variables/newPost'\nimport RenderHtml from 'react-native-render-html'\nimport { useReactiveVar } from '@apollo/client'\nimport ScreenHeader from '@components/ScreenHeader/ScreenHeader'\nimport CustomAvatar from '@components/CustomAvatar/CustomAvatar'\nimport Toggle from '@components/Toggle/Toggle'\nimport { useCreateNewPostMutation } from '../../graphql/graphql'\nimport { userDataVar } from 'variables/userData'\n\ninterface PreviewPostScreenProps {}\n\nconst PreviewPostScreen: React.FunctionComponent<PreviewPostScreenProps> = ({}) => {\n  const newPostData = useReactiveVar(newPostVar)\n  const userData = useReactiveVar(userDataVar)\n\n  const [refreshing, setRefreshing] = useState<boolean>(false)\n  const [title, setTitle] = useState<string>(newPostData.title)\n  const [intro, setIntro] = useState<string>('intro de larticle')\n  const [content, setContent] = useState<string>(newPostData.content)\n  const [mainPicture, setMainPicture] = useState<string>(\n    'https://upload.wikimedia.org/wikipedia/commons/thumb/c/ca/MI_84_%E2%80%94_RER_B.1.jpg/300px-MI_84_%E2%80%94_RER_B.1.jpg',\n  )\n  const [author, setAuthor] = useState<string>('Matthieu')\n  const [likes, setLikes] = useState<number>(111)\n  const [submitted, setSubmitted] = useState<boolean>(true)\n  const [validated, setValidated] = useState<string>('pending')\n\n  const [isBookmarked, setIsBookmarked] = useState<boolean>(false)\n  const [createNewPost] = useCreateNewPostMutation()\n\n  const { height, width } = useWindowDimensions()\n  const source = {\n    html: newPostData.content,\n  }\n  console.log('source', source)\n\n  const createPost = async () => {\n    const response = await createNewPost({\n      variables: {\n        newPostsInput: {\n          title,\n          intro,\n          content,\n          author,\n          mainPicture,\n          likes,\n          submitted,\n          validated,\n        },\n      },\n    })\n    if (response && response.data) {\n      console.log('REPONSE', response)\n    }\n  }\n\n  const savePost = async () => {\n    const response = await createNewPost({\n      variables: {\n        newPostsInput: {\n          title,\n          intro,\n          content,\n          author,\n          mainPicture,\n          likes,\n          submitted: false,\n          validated,\n        },\n      },\n    })\n    if (response && response.data) {\n      console.log('REPONSE', response)\n    }\n  }\n\n  console.log('newPostData.image in PreviewPostScreen', newPostData.image)\n  return (\n    <SafeAreaView className='flex-1 bg-white'>\n      <ScreenHeader />\n      <ScrollView showsVerticalScrollIndicator={false}>\n        <View className='justify-center bg-white px-3 '>\n          <Text className='text-xl color-deepBlue font-ralewayBold  ml-3 mb-4 text-center'>\n            {newPostData.title}\n          </Text>\n          <Image\n            className='h-40 rounded-md '\n            source={{\n              uri: newPostData.image,\n            }}\n          />\n          <View className='flex-row justify-between mt-2 '>\n            <View className='-mt-12'>\n              <CustomAvatar isConnected={true} avatarPicture={userData.avatar} />\n            </View>\n          </View>\n          <Text className=' text-md color-deepBlue font-ralewayBold '>\n            Publié par {userData.firstName}\n          </Text>\n          <Text className='text-xs color-deepBlue font-raleway  mb-4'>Aujourd'hui</Text>\n          <View className='color-deepBlue'>\n            <RenderHtml contentWidth={width} source={source} />\n          </View>\n        </View>\n        <Button title='Publier!' onPress={createPost} />\n        <Button title='Sauvegarder' onPress={savePost} />\n      </ScrollView>\n    </SafeAreaView>\n  )\n}\n\nexport default PreviewPostScreen\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}